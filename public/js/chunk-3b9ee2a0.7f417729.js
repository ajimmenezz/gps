(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3b9ee2a0"],{"15cd":function(e,t,a){"use strict";var s=a("686c"),r=a.n(s);r.a},"686c":function(e,t,a){},7227:function(e,t,a){},ab65:function(e,t,a){"use strict";var s=a("7227"),r=a.n(s);r.a},c5c5:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"row-content"},[e.loader.visible?a("loader",{attrs:{message:"Obteniendo datos, espere porfavor."}}):e._e(),e._m(0),e._m(1),e._m(2),a("div",{staticClass:"col-12 text-left",staticStyle:{"margin-top":"15px"}},[e._v("\r\n        Mostrando alertas desde las "),a("b",[e._v(e._s(e._f("moment")(e.alertsTable.params.fromTimestamp,"h:mm:ss a")))]),e._v("\r\n        hasta las "),a("b",[e._v(e._s(e._f("moment")(e.alertsTable.params.toTimestamp,"h:mm:ss a")))])]),a("div",{staticClass:"col-12",staticStyle:{"margin-top":"40px"}},[a("data-table",{ref:"alertsTable",attrs:{showIndex:!1,paging:!0,responsive:!0,showEditButton:!1,showWatchButton:!1,showDeleteButton:!1}})],1)],1)},r=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"col-8 text-left"},[a("h5",{staticClass:"text--title"},[e._v("Alertas")]),a("small",{},[e._v("Consulta las notificaciones y alertas de tu dispositivos")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"col-4 text-right"},[a("button",{staticClass:"btn btn-primary btn-sm",staticStyle:{"margin-top":"15px"},attrs:{id:"date-report"}},[e._v("Nueva consulta")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"col-12"},[a("hr")])}],i=(a("ac6a"),a("96cf"),a("3b8d")),n=a("08e6"),l=a("d3e3"),o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("transition",{attrs:{name:"fade"}},[a("div",{staticClass:"wrapper",attrs:{id:"loader"}},[a("div",{staticClass:"modal-dialog modal-dialog-centered"},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-body"},[a("p",[e._v(e._s(this.message))]),a("div",{staticClass:"spinner-border",staticStyle:{}})])])])])])},c=[],m={name:"Loader",props:{message:{type:String,default:"Espere por favor"}}},u=m,d=(a("15cd"),a("2877")),h=Object(d["a"])(u,o,c,!1,null,"cb7fa9ea",null),p=h.exports,f=a("a9b0"),b={name:"Alertas",mixins:[n["a"]],components:{loader:p,dataTable:f["a"]},data:function(){return{loader:{visible:!1},alertsTable:{params:{fromTimestamp:0,toTimestamp:0},headers:[{title:"Fecha",key:"date",orderable:!0,searchable:!0},{title:"Evento",key:"reportType",orderable:!0,searchable:!0},{title:"Unidad",key:"alias",orderable:!0,searchable:!0},{title:"Direccion",key:"adress",orderable:!0,searchable:!0,default:'<span style="font-style: italic">No disponible</span>',width:150},{title:"Geocerca",key:"geofenceName",orderable:!0,searchable:!0,default:'<span style="font-style: italic">No aplica</span>'}],rows:[]}}},mounted:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.$store.state.seccionMenu="alertas",e.next=3,l["a"].$emit("NAVBAR_MenuSimple","alertas");case 3:return this.$refs.alertsTable.Render(this.alertsTable.headers,this.alertsTable.rows),this.alertsTable.params.fromTimestamp=this.$moment().subtract(3,"hours").unix(),this.alertsTable.params.toTimestamp=this.$moment().unix(),this.initializeDatePicker(),l["a"].$on("refresh_dataTable",this.OnMenuSizeChanged),e.next=10,this.GetAlerts(this.alertsTable.params.fromTimestamp,this.alertsTable.params.toTimestamp);case 10:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),methods:{OnMenuSizeChanged:function(){console.debug("Refresh Table alerts"),this.$refs.alertsTable.Refresh()},initializeDatePicker:function(){$("#date-report").bootstrapMaterialDatePicker({lang:"es",currentDate:this.fromTimestamp,maxDate:this.$moment(this.fromTimestamp).endOf("day"),year:!1,date:!0,time:!0,shortTime:!0,format:"LLL a"}).on("change",this.onDateChanged)},GetAlerts:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t,a){var s,r,i=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.loader.visible=!0,s={fromTimestamp:t,toTimestamp:a},e.next=4,this.getRequest("reports/alerts",s);case 4:r=e.sent,this.alertsTable.rows=r.data.reports,this.alertsTable.rows.forEach((function(e){e.date=i.$moment(1e3*e.timestamp).format("LL h:mm:ss a")})),this.$refs.alertsTable.SetRows(this.alertsTable.rows),this.loader.visible=!1;case 9:case"end":return e.stop()}}),e,this)})));function t(t,a){return e.apply(this,arguments)}return t}(),onDateChanged:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t,a){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.alertsTable.params.fromTimestamp=this.$moment(a).unix(),this.alertsTable.params.toTimestamp=this.$moment(a).add(3,"hour").unix(),e.next=4,this.GetAlerts(this.alertsTable.params.fromTimestamp,this.alertsTable.params.toTimestamp);case 4:case"end":return e.stop()}}),e,this)})));function t(t,a){return e.apply(this,arguments)}return t}()}},v=b,T=(a("ab65"),Object(d["a"])(v,s,r,!1,null,"5042ea68",null));t["default"]=T.exports}}]);
//# sourceMappingURL=chunk-3b9ee2a0.7f417729.js.map