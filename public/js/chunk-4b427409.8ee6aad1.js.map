{"version":3,"sources":["webpack:///./src/views/Administrador/transferencias/newTransacctions.vue?d8c4","webpack:///src/views/Administrador/transferencias/newTransacctions.vue","webpack:///./src/views/Administrador/transferencias/newTransacctions.vue?5678","webpack:///./src/views/Administrador/transferencias/newTransacctions.vue?8bb1","webpack:///./src/views/Administrador/transferencias/newTransacctions.vue?104f"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","staticStyle","tipo","_v","_e","_m","$store","state","clientType","attrs","directives","name","rawName","value","expression","typeTranf","on","$event","$$selectedVal","Array","prototype","filter","call","target","options","o","selected","map","val","_value","multiple","tipoTranf","_l","tranf","key","id","domProps","_s","type","showProductSelector","currentProductSelectorTab","tag","OnProductSelected","OnProductsSelected","product","index","productType","factory","removeProduct","productTypeID","notas","model","callback","$$v","trim","ref","customer","customers","titleCliente","OnCustomerSelected","goReturn","confirmSaleBtnEnabled","confirmSale","staticRenderFns","mixins","API","components","productSelector","mSelect","created","loader","$route","params","catTypeTransfer","data","products","listCatypeTranf","methods","notify","showKitSelector","console","debug","addProduct","forEach","findIndex","i","push","productID","validateTransaction","processTransferencia","$router","validTransaction","length","$refs","customerSelect","selectedItem","component"],"mappings":"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","file":"js/chunk-4b427409.8ee6aad1.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"row\",staticStyle:{\"margin-bottom\":\"150px\"}},[_c('div',{staticClass:\"col-12\"},[_c('h5',{staticClass:\"float-left\",staticStyle:{\"font-size\":\"20px\",\"padding-bottom\":\"10px\"}},[(this.tipo==1)?_c('b',[_vm._v(\"Nueva transferencia\")]):_vm._e(),(this.tipo==2)?_c('b',[_vm._v(\"Nueva devoluci√≥n\")]):_vm._e()])]),_c('div',{staticClass:\"col-12 card\"},[_c('div',{staticClass:\"card-body\"},[_c('div',{staticClass:\"row\"},[_vm._m(0),( this.$store.state.clientType==2)?_c('div',{staticClass:\"col-12 col-md-4 float-left\",staticStyle:{\"margin-bottom\":\"15px\"}},[_c('div',{staticClass:\"form-group\"},[_c('label',{attrs:{\"for\":\"typeTranf\"}},[_vm._v(\"Tipo de tranferencia\")]),_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.typeTranf),expression:\"typeTranf\"}],staticClass:\"form-control\",attrs:{\"id\":\"typeTranf\",\"valor\":_vm.typeTranf,\"required\":\"\"},on:{\"change\":[function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.typeTranf=$event.target.multiple ? $$selectedVal : $$selectedVal[0]},function($event){return _vm.tipoTranf()}]}},[_c('option',{attrs:{\"value\":\"\"}},[_vm._v(\"Selecciona\")]),_vm._l((_vm.listCatypeTranf),function(tranf){return _c('option',{key:tranf.id,domProps:{\"value\":tranf.id}},[_vm._v(_vm._s(tranf.type))])})],2)])]):_vm._e(),_c('div',{staticClass:\"col-12 text-left\"},[_c('ul',{staticClass:\"nav nav-tabs\",attrs:{\"role\":\"tablist\"}},[_c('li',{staticClass:\"nav-item\"},[_c('a',{staticClass:\"nav-link active cursor\",attrs:{\"data-toggle\":\"tab\",\"role\":\"tab\",\"aria-selected\":\"true\"},on:{\"click\":function($event){return _vm.showProductSelector()}}},[_vm._v(\"Agregar Producto\\n              \")])])])]),_c('div',{staticClass:\"col-12\",staticStyle:{\"border\":\"solid 1px lightgrey\",\"padding\":\"10px\"}},[_c(_vm.currentProductSelectorTab,{tag:\"component\",on:{\"OnProductSelected\":_vm.OnProductSelected,\"OnProductsSelected\":_vm.OnProductsSelected}})],1)]),_c('div',{staticClass:\"row\",staticStyle:{\"margin-top\":\"70px\"}},[_c('div',{staticClass:\"col-12 text-left\",staticStyle:{\"font-size\":\"16px\"}},[(this.tipo==1)?_c('b',[_vm._v(\"Productos seleccionados a transferir\")]):_vm._e(),(this.tipo==2)?_c('b',[_vm._v(\"Productos seleccionados a devolver\")]):_vm._e()]),_c('div',{staticClass:\"col-12\",staticStyle:{\"margin-top\":\"15px\"}},[_c('table',{staticClass:\"table table-hover header_fijo\"},[_vm._m(1),_c('tbody',_vm._l((_vm.products),function(product,index){return _c('tr',{key:index},[_c('td',[_vm._v(_vm._s(product.productType))]),_c('td',[_vm._v(_vm._s(product.factory))]),_c('td',[_vm._v(_vm._s(product.id))]),_c('td',[_c('span',[_c('i',{staticClass:\"icon icon-md universalicon-trash-2 colorText-red cursor\",on:{\"click\":function($event){return _vm.removeProduct(product.productTypeID, product.id)}}})])])])}),0)])])]),_c('div',{staticClass:\"row\",staticStyle:{\"margin-top\":\"50px\"}},[_vm._m(2),_c('div',{staticClass:\"col-12 float-left\",staticStyle:{\"padding-top\":\"21px\"}},[_c('config-input',{attrs:{\"id\":\"notes\",\"label\":\"Notas\",\"typeinput\":\"text\",\"placeholder\":\"Notas\",\"required\":\"false\",\"valor\":_vm.notas},model:{value:(_vm.notas),callback:function ($$v) {_vm.notas=(typeof $$v === 'string'? $$v.trim(): $$v)},expression:\"notas\"}})],1),_c('div',{staticClass:\"col-6 col-lg-5 text-left\"},[(this.tipo!=2)?_c('m-select',{ref:\"customerSelect\",attrs:{\"data\":_vm.customer.customers,\"filterby\":\"name\",\"title\":_vm.titleCliente},on:{\"selectionChanged\":_vm.OnCustomerSelected}}):_vm._e()],1),_c('div',{staticClass:\"col-6 col-lg-7 text-right align-self-end\"},[_c('button',{staticClass:\"btn btn-sm btn-secondary\",attrs:{\"type\":\"button\"},on:{\"click\":_vm.goReturn}},[_vm._v(\"CANCELAR\")]),_c('button',{staticClass:\"btn btn-sm btn-primary\",attrs:{\"type\":\"button\",\"disabled\":!_vm.confirmSaleBtnEnabled},on:{\"click\":_vm.confirmSale}},[_vm._v(\"CONFIRMAR\")])])])])])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"col-12\"},[_c('p',{staticClass:\"text-muted\",staticStyle:{\"text-align\":\"justify\",\"font-size\":\"12px\",\"margin-top\":\"7px\"}},[_vm._v(\"\\n           A continuaci√≥n podr√°s transferir producto a tus clientes o devolver productos a tus proveedores\")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('thead',[_c('tr',[_c('th',[_vm._v(\"Tipo de Producto\")]),_c('th',[_vm._v(\"Marca\")]),_c('th',[_vm._v(\"IMEI/Serie\")]),_c('th',[_vm._v(\"Acciones\")])])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"col-12\"},[_c('hr')])}]\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"row\" style=\"margin-bottom:150px;\">\r\n    <div class=\"col-12\">\r\n\r\n      <h5 class=\"float-left\" style=\"font-size:20px; padding-bottom:10px;\">\r\n        <b v-if=\"this.tipo==1\">Nueva transferencia</b>\r\n        <b v-if=\"this.tipo==2\">Nueva devoluci√≥n</b>\r\n\r\n      </h5>\r\n    </div>\r\n\r\n    <div class=\"col-12 card\" >\r\n      <div class=\"card-body\">\r\n        <div class=\"row\" >\r\n           <div class=\"col-12\">  <p class=\"text-muted\" style=\"text-align: justify; font-size: 12px; margin-top: 7px;\">\r\n             A continuaci√≥n podr√°s transferir producto a tus clientes o devolver productos a tus proveedores</p></div>\r\n           <div class=\"col-12 col-md-4 float-left\" style=\"margin-bottom:15px;\"  v-if=\" this.$store.state.clientType==2\">\r\n                      <div class=\"form-group\">\r\n                        <label for=\"typeTranf\">Tipo de tranferencia</label>\r\n                        <select class=\"form-control\" id=\"typeTranf\" v-model=\"typeTranf\" :valor=\"typeTranf\"  @change=\"tipoTranf()\" required>\r\n                            <option value=\"\">Selecciona</option>\r\n\r\n                            <option v-for=\"tranf in listCatypeTranf\" :value=\"tranf.id\" :key=\"tranf.id\">{{tranf.type}}</option>\r\n                        </select>\r\n                      </div>\r\n                    </div>\r\n\r\n          <div class=\"col-12 text-left\">\r\n           <ul class=\"nav nav-tabs\" role=\"tablist\">\r\n              <li class=\"nav-item\">\r\n                <a class=\"nav-link active cursor\" data-toggle=\"tab\" role=\"tab\" aria-selected=\"true\"\r\n                @click=\"showProductSelector()\">Agregar Producto\r\n                </a>\r\n              </li>\r\n              <!-- <li class=\"nav-item\">\r\n                <a class=\"nav-link cursor\" data-toggle=\"tab\" role=\"tab\" aria-selected=\"false\"\r\n                @click=\"showKitSelector()\">Agregar Kit</a>\r\n              </li> -->\r\n            </ul>\r\n          </div>\r\n          <div class=\"col-12\" style=\"border: solid 1px lightgrey; padding:10px;\">\r\n            <component v-bind:is=\"currentProductSelectorTab\" @OnProductSelected=\"OnProductSelected\" @OnProductsSelected=\"OnProductsSelected\"></component>\r\n          </div>\r\n\r\n        </div>\r\n\r\n        <!--Products-->\r\n        <div class=\"row\" style=\"margin-top:70px;\">\r\n          <div class=\"col-12 text-left\" style=\"font-size:16px\">\r\n            <b v-if=\"this.tipo==1\">Productos seleccionados a transferir</b>\r\n              <b v-if=\"this.tipo==2\">Productos seleccionados a devolver</b>\r\n          </div>\r\n          <div class=\"col-12\" style=\"margin-top:15px;\">\r\n            <table class=\"table table-hover header_fijo\">\r\n              <thead>\r\n                <tr>\r\n                  <th>Tipo de Producto</th>\r\n                  <th>Marca</th>\r\n                  <th>IMEI/Serie</th>\r\n                  <th>Acciones</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                <tr v-for=\"(product, index) in products\" :key=\"index\">\r\n                  <td>{{product.productType}}</td>\r\n                  <td>{{product.factory}}</td>\r\n                  <td>{{product.id}}</td>\r\n                  <td>\r\n                    <span>\r\n                      <i\r\n                        class=\"icon icon-md universalicon-trash-2 colorText-red cursor\"\r\n                        @click=\"removeProduct(product.productTypeID, product.id)\"\r\n                      ></i>\r\n                    </span>\r\n                  </td>\r\n                </tr>\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n        </div>\r\n        <!--Process Sale-->\r\n        <div class=\"row\" style=\"margin-top:50px;\">\r\n          <div class=\"col-12\">\r\n            <hr>\r\n          </div>\r\n\r\n           <div class=\"col-12 float-left\" style=\"padding-top:21px;\">\r\n                        <config-input  id=\"notes\" label=\"Notas\"  typeinput=\"text\"  placeholder=\"Notas\" v-model.trim=\"notas\" required=\"false\" :valor=\"notas\"></config-input>\r\n                    </div>\r\n\r\n          <div class=\"col-6 col-lg-5 text-left\" >\r\n            <m-select v-if=\"this.tipo!=2\"\r\n            ref=\"customerSelect\"\r\n            :data=\"customer.customers\"\r\n            filterby=\"name\"\r\n            :title=\"titleCliente\"\r\n            @selectionChanged=\"OnCustomerSelected\"/>\r\n          </div>\r\n\r\n          <div class=\"col-6 col-lg-7 text-right align-self-end\">\r\n            <button type=\"button\" class=\"btn btn-sm btn-secondary\" @click=\"goReturn\">CANCELAR</button>\r\n            <button type=\"button\" class=\"btn btn-sm btn-primary\" @click=\"confirmSale\" :disabled=\"!confirmSaleBtnEnabled\">CONFIRMAR</button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { API } from '@/mixins/API'\r\nimport mSelect from '@/components/basico/m.select.vue'\r\nimport productSelector from '@/views/Administrador/Transactions/Sales/productSelector.vue'\r\nimport EventBus from '@/EventBus.js'\r\n\r\nexport default {\r\n  name: 'NewTransDev',\r\n  mixins: [API],\r\n  components: {\r\n    productSelector,\r\n    mSelect\r\n  },\r\n\r\n  created () {\r\n    this.$store.state.loader = true\r\n    this.tipo = this.$route.params.tipo\r\n    if (this.$store.state.clientType == 2) {\r\n      this.catTypeTransfer()\r\n    }\r\n  },\r\n  async mounted () {\r\n    this.$store.state.seccionMenu = 'almacen'\r\n    await EventBus.$emit('NAVBAR_MenuSimple', 'almacen')\r\n\r\n    $('#containerPrincipal').css({\r\n      'margin-left': this.$store.state.widthMenu\r\n    })\r\n    $('#containerPrincipal').css({ 'margin-top': this.$store.state.topMenu })\r\n\r\n    if (this.$store.state.clientType == 2) {\r\n      this.titleCliente = 'Seleccione cliente'\r\n    }\r\n    if (this.$store.state.clientType == 3) {\r\n      this.titleCliente = 'Seleccione distribuidor'\r\n    }\r\n\r\n    if (this.$store.state.clientType != 1) {\r\n      this.getCustomers()\r\n    }\r\n    this.$store.state.loader = false\r\n  },\r\n  data () {\r\n    return {\r\n      currentProductSelectorTab: productSelector,\r\n      products: [],\r\n      customer: {\r\n        customers: [],\r\n        selected: ''\r\n      },\r\n      confirmSaleBtnEnabled: true,\r\n      titleCliente: null,\r\n      notas: null,\r\n      listCatypeTranf: null,\r\n      typeTranf: 1,\r\n      tipo: null\r\n    }\r\n  },\r\n  methods: {\r\n    async catTypeTransfer () {\r\n      this.$store.state.loader = true\r\n      var request = await this.getRequest('catalogs/transfers/types')\r\n      this.listCatypeTranf = request.data.types\r\n      this.$store.state.loader = false\r\n    },\r\n    async getCustomers () {\r\n      this.$store.state.loader = true\r\n      var request = await this.getRequest('accounts')\r\n      this.customer.customers = request.data.customers\r\n      this.$store.state.loader = false\r\n    },\r\n    tipoTranf () {\r\n      if (this.typeTranf == '') {\r\n        notify('', 'Selecciona tipo de tranferencia', 'top', 'right', 'danger')\r\n        return false\r\n      }\r\n      this.tipo = this.typeTranf\r\n    },\r\n    showProductSelector () {\r\n      this.currentProductSelectorTab = productSelector\r\n    },\r\n    showKitSelector () {\r\n      this.currentProductSelectorTab = null\r\n    },\r\n    OnProductSelected (product) {\r\n      console.debug('ProductSelected', product)\r\n      this.addProduct(product)\r\n    },\r\n    OnProductsSelected (products) {\r\n      products.forEach(product => {\r\n        this.addProduct(product)\r\n      })\r\n    },\r\n    OnCustomerSelected (customer) {\r\n      this.customer.selected = customer\r\n    },\r\n    addProduct (product) {\r\n      var index = this.products.findIndex((i) => {\r\n        return i.id == product.id && i.productTypeID == product.productTypeID\r\n      })\r\n\r\n      if (index == -1) {\r\n        this.products.push(product)\r\n      } else {\r\n        notify('', 'El producto ya se encuentra agregado', 'top', 'right', 'danger')\r\n      }\r\n    },\r\n    removeProduct (productTypeID, productID) {\r\n      var index = this.products.findIndex((i) => {\r\n        return i.id == productID && i.productTypeID == productTypeID\r\n      })\r\n\r\n      if (index > -1) { this.products.splice(index, 1) }\r\n    },\r\n    confirmSale () {\r\n      // TODO: SI contiene kits verificar que estan completos\r\n      if (this.validateTransaction()) {\r\n        // transf\r\n        this.processTransferencia()\r\n      }\r\n    },\r\n    goReturn () {\r\n      this.$router.push(`/transactions/store`)\r\n    },\r\n    validateTransaction () {\r\n      var validTransaction = true\r\n\r\n      if (!this.products.length) {\r\n        validTransaction = false\r\n        notify('Error, ', 'Debe seleccionar por lo menos 1 producto', 'top', 'right', 'danger')\r\n      }\r\n      if (this.tipo == 1) {\r\n        if (!this.$refs.customerSelect.selectedItem || this.$refs.customerSelect.selectedItem == -1) {\r\n          validTransaction = false\r\n          notify('Error, ', 'Debe seleccionar el cliente', 'top', 'right', 'danger')\r\n        }\r\n      }\r\n\r\n      if (this.typeTranf == '') {\r\n        notify('Errors', 'Selecciona tipo de tranferencia', 'top', 'right', 'danger')\r\n        validTransaction = false\r\n      }\r\n\r\n      return validTransaction\r\n    },\r\n    async processTransferencia () {\r\n      this.$store.state.loader = true\r\n      this.confirmSaleBtnEnabled = false\r\n\r\n      // Prepare Products Param\r\n      var products = []\r\n      this.products.forEach(product => {\r\n        var p = {\r\n          id: product.productID,\r\n          type: product.productTypeID\r\n\r\n        }\r\n        products.push(p)\r\n      })\r\n\r\n      // Prepare Params\r\n      var params = {\r\n        transfer: {\r\n          notes: this.notas\r\n        },\r\n        products: products\r\n      }\r\n\r\n      if (this.tipo == 1) {\r\n        params.transfer.clientID = this.customer.selected.id\r\n      }\r\n\r\n      // Process Transaction\r\n\r\n      var request = await this.postRequest('transfers', params)\r\n      console.debug('DATOS', params)\r\n      this.$store.state.loader = false\r\n\r\n      if (request.success) {\r\n        if (this.tipo == 1) {\r\n          notify('', 'Transferencia realizada con exito', 'top', 'right', 'success')\r\n        }\r\n        if (this.tipo == 2) {\r\n          notify('', 'Devoluci√≥n realizada con exito', 'top', 'right', 'success')\r\n        }\r\n        await setTimeout(() => {\r\n          this.goReturn()\r\n        }, 3000)\r\n      } else {\r\n        if (this.tipo == 1) {\r\n          notify('', 'Error al realizar la transferencia', 'top', 'right', 'danger')\r\n        }\r\n        if (this.tipo == 2) {\r\n          notify('', 'Error al realizar la devoluci√≥n', 'top', 'right', 'danger')\r\n        }\r\n        this.confirmSaleBtnEnabled = true\r\n      }\r\n    }\r\n\r\n  }\r\n\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.nav-item .active{\r\n  background-color: #04a9f5 !important;\r\n  color:white !important;\r\n}\r\n</style>\r\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./newTransacctions.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./newTransacctions.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./newTransacctions.vue?vue&type=template&id=09d30c09&scoped=true&\"\nimport script from \"./newTransacctions.vue?vue&type=script&lang=js&\"\nexport * from \"./newTransacctions.vue?vue&type=script&lang=js&\"\nimport style0 from \"./newTransacctions.vue?vue&type=style&index=0&id=09d30c09&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"09d30c09\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./newTransacctions.vue?vue&type=style&index=0&id=09d30c09&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./newTransacctions.vue?vue&type=style&index=0&id=09d30c09&scoped=true&lang=css&\""],"sourceRoot":""}