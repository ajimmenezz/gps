(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f31900e8"],{"28c6":function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"container-fluid",staticStyle:{"margin-top":"15px","margin-bottom":"5px"}},[e.loader.show?i("loader-small",{attrs:{message:e.loader.message}}):e._e(),i("div",{staticClass:"row"},[e._m(0),e._m(1),i("div",{staticClass:"col-9"},[i("config-input",{attrs:{id:"deviceSearcher",label:"null",required:"false",typeinput:"text",placeholder:"Buscar",paddingConf:"6px 12px"},on:{input:e.filterLista}})],1),i("div",{staticClass:"col-3 cssToolTipp",staticStyle:{"padding-left":"0px"}},[i("button",{staticClass:"btn btn-icon btn-primary",staticStyle:{height:"35px","padding-top":"8px"},attrs:{type:"button"},on:{click:function(t){return e.showNewGeofence()}}},[i("i",{staticClass:"feather icon-plus"})]),i("p",{staticStyle:{top:"35px !important",right:"10% !important"}},[e._v("Nueva geocerca")])]),i("hr",{staticStyle:{margin:"0px","margin-bottom":"10px",width:"100%"}})]),i("div",{staticClass:"row",staticStyle:{"max-height":"250px","overflow-y":"auto"}},[i("div",{staticClass:"col-12"},[i("ul",{staticClass:"list-group list-group-flush"},e._l(e.GeofenceList,(function(t){return i("li",{key:t.id,staticClass:"list-group-item"},[i("div",{staticClass:"row"},[i("div",{staticClass:"col-2 custom-control custom-checkbox"},[t.selected?i("input",{staticClass:"custom-control-input cursor-pointer",attrs:{type:"checkbox",id:"Check-"+t.id,checked:""},on:{change:function(i){return e.onGeofenceChecked(i,t.id)}}}):i("input",{staticClass:"custom-control-input cursor-pointer",attrs:{type:"checkbox",id:"Check-"+t.id},on:{change:function(i){return e.onGeofenceChecked(i,t.id)}}}),i("label",{staticClass:"custom-control-label",attrs:{for:"Check-"+t.id}}),i("span",{staticStyle:{position:"absolute"}},[i("i",{staticClass:"icon-small icon color-light-gray cssToolTipp",class:e.GetGeofenceIconClass(t.figureType),attrs:{"data-toggle":"tooltip","data-placement":"bottom","data-delay":"500",title:"Geocerca tipo "+t.figureTypeName}})])]),i("div",{staticClass:"col-5 cursor-pointer text-left",staticStyle:{padding:"0px 0px 0px 15px"},on:{click:function(i){return e.onGeofenceChecked(!0,t.id,2)}}},[e._v("\n              "+e._s(t.name)+"\n            ")]),i("div",{staticClass:"col-5 text-right",staticStyle:{padding:"0px","padding-left":"5px"}},[i("span",{on:{click:function(i){return e.editarGeofence(t.id)}}},[e._m(2,!0)]),i("span",{on:{click:function(i){return e.eliminarGeofence(t.id,t.name)}}},[e._m(3,!0)])])])])})),0)])]),i("div",{staticClass:"row"},[i("hr",{staticStyle:{margin:"0px","margin-top":"10px"}}),i("div",{staticClass:"col-12 float-left"},[i("span",{staticClass:"badge badge-pill badge-info"},[e._v(e._s(e.GeofenceList.length))]),i("span",[e._v("Total de geocercas")])])]),e.draggable.show?i("draggable",{attrs:{name:"test",top:e.draggable.top,left:e.draggable.left,width:e.draggable.width,height:e.draggable.height,zindex:e.draggable.index}},[i("div",{on:{click:e.onDraggableClose}},[i("draggable-header",{staticClass:"cursor"},[i("h5",{staticStyle:{"margin-top":"5px"}},[e._v(e._s(e.titleContentForm))]),i("hr",{staticStyle:{margin:"0px"}})])],1),i("draggable-content",[i("gestion-geofence",{attrs:{geofenceID:e.fgeofenceID,accion:e.faccion,dataDrawing:e.fdataGeocerca},on:{onClose:function(t){return e.onDraggableClose()},DrawingGeocerca:e.DrawingGeocerca,setRadiusCircle:e.setRadiusCircleGeo,showAllDrawing:e.showAllDrawingGeo}})],1)],1):e._e()],1)},s=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"col-8 text-left"},[i("h5",[e._v("Lista de geocercas")])])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"col-4"},[i("i",{staticClass:"icon icon-small universalicon-help cursor test",attrs:{"data-toggle":"tooltip","data-placement":"bottom","data-delay":'{"show":500, "hide":1000}',"data-html":"true","data-template":'<div class="tooltip fluid" role="tooltip"><div class="arrow"></div><div class="tooltip-inner"></div></div>',title:'<div class="alert-info text-left" style="padding:5px 10px;">\n          El icono indica el tipo de geocerca:\n          <br />\n           <i class="icon-small icon color-light-gray universalicon-geofence"">&nbsp;</i> Geocerca Circular\n          <br />\n          <i class="icon-small icon color-light-gray universalicon-polygon"">&nbsp;</i> Geocerca Poligonal\n          <br />\n        </div>'}},[e._v("Â ")])])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("i",{staticClass:"cursor icon-small icon universalicon-pencil cssToolTipp"},[i("p",{staticStyle:{top:"23px !important",right:"10% !important"}},[e._v("Editar geocerca")])])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("i",{staticClass:"cursor icon-small icon universalicon-trash-2 colorText-red cssToolTipp"},[i("p",{staticStyle:{top:"23px !important",right:"10% !important"}},[e._v("Eliminar geocerca")])])}],o=(i("7514"),i("768b")),n=(i("ffc1"),i("ac6a"),i("96cf"),i("3b8d")),r=i("a1b0"),c=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"card-body card-body-conf"},[e.loader.show?i("loader-small",{attrs:{message:e.loader.message}}):e._e(),i("div",{staticClass:"row "},[i("div",{staticClass:"col-12"},["editar"===e.getDataDrawing.accion?i("div",{staticClass:"col-12 float-right",staticStyle:{padding:"0px"}},[i("span",[i("span",{on:{click:function(t){return e.configuracion()}}},[e._m(0)])])]):e._e()]),"nueva"===e.tipoAccion?i("div",{staticClass:"col-12 float-left"},[i("label",{staticStyle:{"padding-top":"5px"}},[e._v("Selecciona tipo de geocerca: ")]),i("span",{on:{click:function(t){return e.tipo("radial")}}},[e._m(1)]),i("span",{on:{click:function(t){return e.tipo("poligonal")}}},[e._m(2)]),i("br")]):e._e(),i("div",{staticClass:"col-12 float-left"},[i("config-text-typography",{attrs:{texto:"Nombre de geocerca: "}}),i("config-input",{attrs:{id:"newGeofence",label:"null",typeinput:"text",placeholder:"Nombre",required:"true",valor:e.newGeofence},model:{value:e.newGeofence,callback:function(t){e.newGeofence="string"===typeof t?t.trim():t},expression:"newGeofence"}})],1),"radial"===e.showTipoGeocerca?i("div",{staticClass:"col-12"},[i("div",{staticClass:"row float-left"},[i("div",{staticClass:"col-9",staticStyle:{"padding-right":"0px"}},[i("config-text-typography",{attrs:{texto:"Radio de geocerca: "}}),i("config-input",{attrs:{id:"radioGeofencee",label:"null",typeinput:"number",placeholder:"Radio",required:"true",miNumber:"0",valor:e.radioGeofence},on:{input:e.getRadioGeofence}})],1),i("div",{staticClass:"col-3",staticStyle:{padding:"0px","padding-top":"35px","padding-left":"5px"}},[i("config-text-typography",{attrs:{texto:"Metros"}})],1)])]):e._e(),"nueva"===e.tipoAccion?i("div",{staticClass:"row",staticStyle:{"text-align":"justify",background:"#eeeeeed6",padding:"1px","margin-bottom":"10px"}},["radial"===e.showTipoGeocerca?i("span",{staticClass:"col-12"},[e._v("Haz click en el mapa y empieza a dibujar la geocerca circular")]):i("span",{staticClass:"col-12"},[e._v("Haz varios click en el mapa y empieza a dibujar la geocerca poligonal")])]):e._e(),i("div",{staticClass:"col-12",attrs:{id:"alertasGeocercas"}}),i("div",{staticClass:"col-6 "},[i("button",{staticClass:"btn  btn-secondary mb-2",on:{click:function(t){return e.cancelFormGeofence()}}},[e._v("CANCELAR")])]),i("div",{staticClass:"col-6"},[i("button",{staticClass:"btn btn-primary mb-2",on:{click:function(t){return e.saveGeofence()}}},[e._v("GUARDAR")])])])],1)},l=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("i",{staticClass:"icon-small icon universalicon-settings cursor cssToolTipp",attrs:{id:"conf"}},[i("p",{staticStyle:{top:"23px !important",right:"-70% !important"}},[e._v("Configurar geocerca")])])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("i",{staticClass:"cursor icon-small icon universalicon-target  float-right cssToolTipp",attrs:{id:"radial"}},[i("p",{staticStyle:{top:"23px !important",right:"-70% !important"}},[e._v("Circular")])])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("i",{staticClass:"icon-small icon universalicon-polygon  float-right cursor cssToolTipp",attrs:{id:"poligonal"}},[i("p",{staticStyle:{top:"23px !important",right:"-70% !important"}},[e._v("Poligonal")])])}],d=(i("7f7f"),i("08e6")),u=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"modal fade ",attrs:{id:"modalDeleteConf",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalCenterTitle","aria-hidden":"true"}},[i("div",{staticClass:"modal-dialog  modal-lg",attrs:{role:"document"}},[i("div",{staticClass:"modal-content"},[i("div",{staticClass:"modal-header  row float-left",staticStyle:{margin:"1px",padding:"5px"}},[i("div",{staticClass:"col-11"},[i("h5",{staticClass:"modal-title",attrs:{id:"exampleModalCenterTitle"}},[i("b",[e._v(e._s(e.geofence.name))])]),e._v("\n                Configurar Geocerca\n              ")]),e._m(0)]),i("div",{staticClass:"modal-body "},[i("div",{staticClass:"row"},[e._m(1),e._m(2),e._m(3),e._m(4),i("div",{staticClass:"col-12"},[i("div",{staticClass:"row"},[i("div",{staticClass:"col-12 col-sm-4 custom-control custom-radio cssToolTipp"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.comportamiento,expression:"comportamiento"}],staticClass:"custom-control-input",attrs:{type:"radio",id:"1",name:"customRadio",value:"1"},domProps:{checked:e._q(e.comportamiento,"1")},on:{change:function(t){e.comportamiento="1"}}}),i("label",{staticClass:"custom-control-label",attrs:{for:"1"}},[e._v("Entrada")]),i("p",{staticStyle:{top:"25px !important",right:"30% !important"}},[e._v("Notificar cuando una unidad entre a la geocerca")])]),i("div",{staticClass:"col-12 col-sm-4 custom-control custom-radio cssToolTipp"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.comportamiento,expression:"comportamiento"}],staticClass:"custom-control-input",attrs:{type:"radio",id:"2",name:"customRadio",value:"2"},domProps:{checked:e._q(e.comportamiento,"2")},on:{change:function(t){e.comportamiento="2"}}}),i("label",{staticClass:"custom-control-label",attrs:{for:"2"}},[e._v("Salida")]),i("p",{staticStyle:{top:"25px !important",right:"30% !important"}},[e._v("Notificar cuando una unidad salga de la geocerca")])]),i("div",{staticClass:"col-12 col-sm-4 custom-control custom-radio cssToolTipp"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.comportamiento,expression:"comportamiento"}],staticClass:"custom-control-input",attrs:{type:"radio",id:"3",name:"customRadio",value:"3"},domProps:{checked:e._q(e.comportamiento,"3")},on:{change:function(t){e.comportamiento="3"}}}),i("label",{staticClass:"custom-control-label",attrs:{for:"3"}},[e._v("Entradas/Salidas")]),i("p",{staticStyle:{top:"25px !important",right:"30% !important"}},[e._v("Notificar entradas/salidas de una unidad a la geocerca")])])])]),i("hr",{staticStyle:{width:"100%"}}),i("div",{staticClass:"col-12",staticStyle:{"margin-top":"20px"}},[i("div",{staticClass:"row"},[i("div",{staticClass:"col-12 ",staticStyle:{"margin-bottom":"30px"}},[i("div",{staticClass:"row"},[e._m(5),e._m(6),i("div",{staticClass:"row "},[i("div",{staticClass:"col-12"},[i("button",{staticClass:"btn btn-primary   m-b-10",staticStyle:{padding:"4px 11px","font-size":"14px"},attrs:{type:"button"},on:{click:e.agregarTodos}},[e._v("Seleccionar todos")]),i("button",{staticClass:"btn btn-primary   m-b-10",staticStyle:{padding:"4px 11px","font-size":"14px"},attrs:{type:"button"},on:{click:e.quitarTodos}},[e._v("Deseleccionar todos")])]),i("div",{staticClass:"col-12",staticStyle:{"text-align":"-webkit-center"}},[i("select",{staticClass:"searchable",attrs:{id:"custom-headers",multiple:"multiple"}},e._l(e.listDevices,(function(t){return i("option",{key:t.id,attrs:{id:"option"+t.id},domProps:{value:t.id,selected:t.selectGeofence}},[e._v(e._s(t.alias))])})),0)])])])]),i("hr",{staticStyle:{width:"100%"}}),i("div",{staticClass:"col-12 "},[i("div",{staticClass:"row"},[e._m(7),i("div",{staticClass:"col-12"},[i("div",{staticClass:"row float-left"},[i("div",{staticClass:"col-9"},[i("config-input",{attrs:{id:"email",label:"Correo electrÃ³nico",typeinput:"email",placeholder:"Correo electrÃ³nico",required:"true",valor:e.email},model:{value:e.email,callback:function(t){e.email="string"===typeof t?t.trim():t},expression:"email"}})],1),i("div",{staticClass:"col-2",staticStyle:{"padding-left":"0px"}},[i("button",{staticClass:"btn  btn-primary",staticStyle:{"padding-top":"8px","margin-top":"32px"},attrs:{type:"button"},on:{click:function(t){return e.agregarDest()}}},[e._v("Agregar")])]),i("div",{staticClass:"col-12"},[i("div",{staticClass:"row float-left",staticStyle:{width:"100%"}},[e._m(8),e.getListEmail.length>0?i("div",{staticClass:"col-12",staticStyle:{overflow:"auto","max-height":"128px",height:"128px"}},e._l(e.getListEmail,(function(t){return i("div",{key:t.id,staticClass:"row"},[i("div",{staticClass:"col-10"},[e._v(e._s(t.email))]),i("div",{staticClass:"col-2"},[i("span",{on:{click:function(i){return e.eliminarDest(t.id)}}},[i("i",{staticClass:"cursor icon-small icon universalicon-trash-2 colorText-red"})])])])})),0):e._e(),0==e.getListEmail.length?i("div",{staticClass:"col-12",staticStyle:{overflow:"auto","max-height":"130px"}},[e._v("Sin destinatarios")]):e._e()])])])])])])])]),i("div",{staticClass:"col-12",attrs:{id:"alertConfig"}}),i("div",{staticClass:"col-12",attrs:{id:"alertConfigEvent"}}),i("div",{staticClass:"col-12",attrs:{id:"alertConfigEmail"}}),i("div",{staticClass:"col-12",attrs:{id:"alertConfigDevice"}})])]),i("div",{staticClass:"modal-footer"},[i("button",{staticClass:"btn btn-secondary",attrs:{id:"confirm",type:"button"},on:{click:function(t){return e.cancel()}}},[e._v("CANCELAR")]),"editar"===this.$store.state.modal.datosDymanic.accion?i("button",{staticClass:"btn btn-primary",attrs:{id:"cancel",type:"button"},on:{click:function(t){return e.guardarEdit()}}},[e._v("GUARDAR")]):e._e(),"nueva"===this.$store.state.modal.datosDymanic.accion?i("button",{staticClass:"btn btn-primary",attrs:{id:"cancel",type:"button"},on:{click:function(t){return e.guardarNueva()}}},[e._v("GUARDAR")]):e._e()])])])])},h=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"col-1"},[i("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[i("span",{attrs:{"aria-hidden":"true"}},[e._v("Ã")])])])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"col-12"},[i("p",{staticClass:"text-muted",staticStyle:{"text-align":"justify","font-size":"12px","margin-top":"7px"}},[e._v("A continuaciÃ³n podrÃ¡s configurar los eventos de notificaciÃ³n que tendra la geocerca, asi como los dispositivos que notificarÃ¡n y a que correos deseas que se les notifique")])])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"col-12",staticStyle:{"margin-top":"10px"},attrs:{id:"alertAdminImeiNotas"}},[i("div",{staticClass:"alert alert-info alert-dismissible fade show",staticStyle:{"text-align":"initial"},attrs:{role:"alert"}},[i("strong",{staticStyle:{"font-weight":"800"}},[e._v("Nota! ")]),e._v("\n                      La informaciÃ³n que estas a punto de actualizar de geocerca puede demorar 5 min. en que se refleje en la plataforma, por favor ten paciencia, gracias. "),i("br")])])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"col-12"},[i("h5",{staticClass:"float-left"},[e._v("Eventos de notificaciÃ³n de geocerca")])])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"col-12"},[i("p",{staticClass:"text-muted",staticStyle:{"text-align":"justify","font-size":"12px","margin-top":"1px"}},[e._v("Eventos de notificaciÃ³n que tendrÃ¡ la geocerca")])])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"col-12"},[i("h5",{staticClass:"float-left"},[e._v("Asignar dispositivos a geocerca")])])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"col-12"},[i("p",{staticClass:"text-muted",staticStyle:{"text-align":"justify","font-size":"12px","margin-top":"1px"}},[e._v("Dispositivos que notificarÃ¡n en la geocerca")])])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"col-12"},[i("h5",{staticClass:"float-left"},[e._v("Correos a notificar")])])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"col-12"},[i("h5",{staticClass:"float-left"},[e._v("Lista de correos a los que se les notificara")])])}],p=(i("8615"),i("c0d6")),f=i("511d"),g={name:"ModalEliminarGeocerca",mixins:[d["a"],f["a"]],data:function(){return{dispositivos:[],listDispositivos:[],dispositivosGeofence:[],comportamiento:3,email:"",listEmail:[],id:0,idGeofence:null,accion:this.$store.state.modal.datosDymanic.accion,storeNew:p["a"],geofence:{name:""}}},created:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("editar"!==this.$store.state.modal.datosDymanic.accion){e.next=6;break}return this.geofence.name=this.$store.state.modal.datosDymanic.dataGeofence.name,this.idGeofence=this.$store.state.modal.datosDymanic.dataGeofence.id,this.comportamiento=parseInt(this.$store.state.modal.datosDymanic.dataGeofence.behavior),e.next=6,this.getcorreos();case 6:if("nueva"!==this.$store.state.modal.datosDymanic.accion){e.next=11;break}return this.accion=this.$store.state.modal.datosDymanic.accion,this.idGeofence=this.$store.state.modal.datosDymanic.idGeofence,e.next=11,this.getdispositivosNew();case 11:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),mounted:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.$store.state.loader=!1,$("#modalDeleteConf").modal("show"),this.$store.state.modal.datosDymanic.accion,"editar"!==this.$store.state.modal.datosDymanic.accion){e.next=6;break}return e.next=6,this.getdispositivos();case 6:return e.next=8,$(".searchable").multiSelect({selectableHeader:"<div class='custom-header'>Dispositivos disponibles</div><input type='text' class='form-control' autocomplete='off' placeholder='Disponibles'>",selectionHeader:"<div class='custom-header'>Dispositivos asignados</div><input type='text' class='form-control' autocomplete='off' placeholder='Asignados'>",afterInit:function(e){var t=this,i=t.$selectableUl.prev(),a=t.$selectionUl.prev(),s="#"+t.$container.attr("id")+" .ms-elem-selectable:not(.ms-selected)",o="#"+t.$container.attr("id")+" .ms-elem-selection.ms-selected";t.qs1=i.quicksearch(s).on("keydown",(function(e){if(40===e.which)return t.$selectableUl.focus(),!1})),t.qs2=a.quicksearch(o).on("keydown",(function(e){if(40==e.which)return t.$selectionUl.focus(),!1}))},afterSelect:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){var i,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:i=parseInt(t),console.debug("ID",i),a=0,a=this.listDispositivos.find((function(e){return e.id==i})),console.debug("DISP",a),void 0==a&&(console.debug("DISP0"),this.listDispositivos.push({id:i,device:"device"}));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}().bind(this),afterDeselect:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:parseInt(t),this.listDispositivos.filter((function(e,a){if(e.id==t)return i=a,!0})),this.listDispositivos.splice(i,1);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}().bind(this)});case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),destroyed:function(){},methods:{agregarTodos:function(){var e=this;return console.debug("ENTRA TODOS"),this.dispositivos.forEach((function(t){var i=e.listDispositivos.find((function(e){return e.id==t.id}));console.debug("DISP",i),void 0==i&&e.listDispositivos.push({id:t.id,device:"device"})})),$(".searchable").multiSelect("select_all"),!1},quitarTodos:function(){return console.debug("quitar TODOS"),$(".searchable").multiSelect("deselect_all"),this.listDispositivos=[],!1},cancel:function(){this.$store.commit("CLEAR_MODAL_DINAMIC"),$("#modalDeleteConf").modal("hide")},agregarDest:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){var t,i,a=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(null!=this.email&&""!=this.email){e.next=4;break}return $("#alertConfigEmail").html("<div class='alert alert-danger alert-dismissible fade show' role='alert' style='text-align: initial;'><strong>Por favor, </strong>Ingresa correo electrÃ³nico</div>"),setTimeout((function(){$("#alertConfigEmail").html("")}),5e3),e.abrupt("return",!1);case 4:if(""==this.email){e.next=20;break}if(t=this.validar_email(this.email),t){e.next=10;break}return $("#alertConfigEmail").html("<div class='alert alert-danger alert-dismissible fade show' role='alert' style='text-align: initial;'><strong>Error!, </strong>El correo no es valido</div>"),setTimeout((function(){$("#alertConfigEmail").html("")}),5e3),e.abrupt("return",!1);case 10:if(i=null,i=this.listEmail.find((function(e){return e.email===a.email})),console.debug(i,"FILTER",this.email),void 0==i||i.email!==this.email){e.next=18;break}return $("#alertConfigEmail").html("<div class='alert alert-danger alert-dismissible fade show' role='alert' style='text-align: initial;'><strong>Error!, </strong>El correo ya existe</div>"),setTimeout((function(){$("#alertConfigEmail").html("")}),5e3),this.email="",e.abrupt("return",!1);case 18:this.listEmail.push({id:this.id,email:this.email}),this.id++;case 20:this.email="";case 21:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),eliminarDest:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.listEmail.filter((function(e,a){if(e.id==t)return i=a,!0})),this.listEmail.splice(i,1);case 2:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),guardarEdit:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){var t,i,a,s,o,n,r,c,l,d,u,h,p=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.$store.state.loader=!0,t=this.$store.state.modal.datosDymanic.dataGeofence.id,!(this.comportamiento.length>0)){e.next=7;break}return e.next=5,this.putRequest("geofences/"+this.idGeofence+"/behavior/"+this.comportamiento);case 5:i=e.sent,!0===i.success||$("#alertConfigEvent").html("<div class='alert alert-danger alert-dismissible fade show' role='alert' style='text-align: initial;'><strong>Error! </strong>No se ha asignado el comportamiento a la geocerca<button type='button' class='close' data-dismiss='alert' aria-label='Close' style='padding-top: 0px;'><span aria-hidden='true'>&times;</span></button></div>");case 7:return e.next=9,this.getRequest("geofences/"+t+"/subscribers/emails");case 9:if(i=e.sent,!0!==i.success){e.next=31;break}a=i.data.emailSubscribers,o=0;case 13:if(!(o<a.length)){e.next=21;break}return s=JSON.parse(JSON.stringify(a[o])),e.next=17,this.deleteRequest("geofences/"+t+"/subscribers/emails/"+s.id);case 17:e.sent;case 18:o++,e.next=13;break;case 21:if(n=this.listEmail,!(n.length>0)){e.next=31;break}r=0;case 24:if(!(r<n.length)){e.next=31;break}return c=n[r],e.next=28,this.registerEmailGeofence(this.idGeofence,c.email);case 28:r++,e.next=24;break;case 31:return e.next=33,this.getRequest("geofences/"+t+"/devices");case 33:if(i=e.sent,!0!==i.success){e.next=55;break}l=i.data.devices,o=0;case 37:if(!(o<l.length)){e.next=45;break}return s=l[o],e.next=41,this.deleteRequest("geofences/"+t+"/devices/"+s.deviceID);case 41:e.sent;case 42:o++,e.next=37;break;case 45:if(d=this.listDispositivos,!(d.length>0)){e.next=55;break}u=0;case 48:if(!(u<d.length)){e.next=55;break}return h=d[u],e.next=52,this.registerDevicesGeofence(this.idGeofence,h.id);case 52:u++,e.next=48;break;case 55:this.$store.state.loader=!1,$("#alertConfig").html("<div class='alert alert-success alert-dismissible fade show' role='alert' style='text-align: initial;'><strong>Excelente! </strong>Se ha configurado la geocerca<button type='button' class='close' data-dismiss='alert' aria-label='Close' style='padding-top: 0px;'><span aria-hidden='true'>&times;</span></button></div>"),setTimeout((function(){$("#alertConfig").html(""),p.$store.commit("CLEAR_MODAL_DINAMIC"),$("#modalDeleteConf").modal("hide")}),3e3);case 58:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),guardarNueva:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){var t,i,a,s,o,n,r,c=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.$store.state.loader=!0,!(this.comportamiento.length>0)){e.next=6;break}return e.next=4,this.putRequest("geofences/"+this.idGeofence+"/behavior/"+this.comportamiento);case 4:t=e.sent,!0===t.success||$("#alertConfigEvent").html("<div class='alert alert-danger alert-dismissible fade show' role='alert' style='text-align: initial;'><strong>Error! </strong>No se ha asignado el comportamiento a la geocerca<button type='button' class='close' data-dismiss='alert' aria-label='Close' style='padding-top: 0px;'><span aria-hidden='true'>&times;</span></button></div>");case 6:if(i=this.listEmail,!(i.length>0)){e.next=16;break}a=0;case 9:if(!(a<i.length)){e.next=16;break}return s=i[a],e.next=13,this.registerEmailGeofence(this.idGeofence,s.email);case 13:a++,e.next=9;break;case 16:if(o=this.listDispositivos,!(o.length>0)){e.next=26;break}n=0;case 19:if(!(n<o.length)){e.next=26;break}return r=o[n],e.next=23,this.registerDevicesGeofence(this.idGeofence,r.id);case 23:n++,e.next=19;break;case 26:this.$store.state.loader=!1,$("#alertConfig").html("<div class='alert alert-success alert-dismissible fade show' role='alert' style='text-align: initial;'><strong>Excelente! </strong>Se ha configurado la geocerca<button type='button' class='close' data-dismiss='alert' aria-label='Close' style='padding-top: 0px;'><span aria-hidden='true'>&times;</span></button></div>"),setTimeout((function(){$("#alertConfig").html(""),c.$store.commit("CLEAR_MODAL_DINAMIC"),$("#modalDeleteConf").modal("hide")}),3e3);case 29:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),registerEmailGeofence:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t,i){var a,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a={email:i},e.next=3,this.postRequest("geofences/"+t+"/subscribers/emails",a);case 3:if(s=e.sent,1!=s.success){e.next=8;break}return e.abrupt("return",!0);case 8:return e.abrupt("return",!1);case 9:case"end":return e.stop()}}),e,this)})));function t(t,i){return e.apply(this,arguments)}return t}(),registerDevicesGeofence:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t,i){var a,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.postRequest("geofences/"+t+"/devices/"+i);case 2:return s=e.sent,a=1==s.success,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e,this)})));function t(t,i){return e.apply(this,arguments)}return t}(),getcorreos:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){var t,i,a,s,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.listEmail=[],t=this.$store.state.modal.datosDymanic.dataGeofence.id,e.next=4,this.getRequest("geofences/"+t+"/subscribers/emails");case 4:if(i=e.sent,!0===i.success)for(a=i.data.emailSubscribers,o=0;o<a.length;o++)s=JSON.parse(JSON.stringify(a[o])),this.listEmail.push({id:s.id,email:s.correo});case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getdispositivosNew:function(){this.dispositivos=[],this.dispositivos=Object.values(this.$store.state.devices.devices),this.dispositivos.forEach((function(e){e.selectGeofence=!1}))},getdispositivos:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){var t,i,a,s,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.dispositivosGeofence=[],this.dispositivos=[],this.dispositivos=Object.values(this.$store.state.devices.devices),t=this.$store.state.modal.datosDymanic.dataGeofence.id,e.next=6,this.getRequest("geofences/"+t+"/devices");case 6:if(i=e.sent,!0===i.success)for(a=i.data.devices,o=0;o<a.length;o++)s=a[o],this.dispositivosGeofence.push({deviceID:s.deviceID,deviceAlias:s.deviceAlias}),this.listDispositivos.push({id:s.deviceID,device:"device"});case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},computed:{getListEmail:function(){return this.listEmail},listDevices:function(){var e=this;return this.dispositivos.forEach((function(e){e.selectGeofence=!1})),this.dispositivos.forEach((function(t){e.dispositivosGeofence.forEach((function(e){t.id==e.deviceID&&(t.selectGeofence=!0)}))})),this.dispositivos}}},m=g,v=i("2877"),b=Object(v["a"])(m,u,h,!1,null,null,null),G=b.exports,C={name:"FormularioGeocerca",mixins:[d["a"]],data:function(){return{newGeofence:"",radioGeofence:1,tipoGeocerca:"radial",dataGeofence:{},geocercaIDRegister:null,loader:{show:!1}}},components:{loaderSmall:function(){return i.e("chunk-5fddced4").then(i.bind(null,"33d4"))}},props:["geofenceID","accion","dataDrawing"],created:function(){this.newGeofence="",this.radioGeofence=1,this.tipoGeocerca="radial",this.geocercaIDRegister=null,this.loader.show=!0},mounted:function(){"editar"!==this.accion&&this.tipo("radial"),"editar"===this.accion&&$("#"+this.tipoGeocerca).addClass("active"),this.loader.show=!1},destroyed:function(){this.cancelFormGeofence(),this.showAllDrawingGeo()},methods:{limparAll:function(){this.newGeofence="",this.radioGeofence=1,this.tipoGeocerca="",this.geocercaIDRegister=null},showAllDrawingGeo:function(){this.$emit("showAllDrawing",!1)},limpiarDatos:function(){return this.radioGeofence=1,this.tipoGeocerca="radial",1},getRadioGeofence:function(e){var t,i=e;""!=i&&null!=i||(i=1),this.radioGeofence=i,"editar"===this.accion&&(t={tipo:this.accion,radio:this.radioGeofence,id:this.dataGeofence.id}),"nueva"===this.accion&&(t={tipo:this.tipoGeocerca,radio:this.radioGeofence,id:null}),this.$emit("setRadiusCircle",t)},tipo:function(e){console.debug("ENTRA_TIPO",e),$("#radial").removeClass("active"),$("#poligonal").removeClass("active");var t={};this.tipoGeocerca=e,this.dataDrawing.tipo=e,"radial"===this.tipoGeocerca&&({},{radio:this.radioGeofence,tipo:this.tipoGeocerca},t.tipo=this.tipoGeocerca,t.radio=this.radioGeofence,this.tipoGeocerca="radial"),"poligonal"===this.tipoGeocerca&&({},{tipo:this.tipoGeocerca},t={},t.tipo=this.tipoGeocerca,this.tipoGeocerca="poligonal"),$("#"+this.tipoGeocerca).addClass("active"),this.$emit("DrawingGeocerca",t)},saveGeofence:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){var t,i,a,s,o,n,r=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(console.debug("DATOS",this.dataDrawing,this.newGeofence,this.tipoGeocerca,this.dataDrawing.size),1==this.dataDrawing.size&&void 0!=this.dataDrawing.size){e.next=6;break}return console.debug("sin dibujo"),$("#alertasGeocercas").html("<div class='alert alert-danger alert-dismissible fade show' role='alert' style='text-align: initial;'><strong>Error! </strong>Por favor dibuja en el mapa</div>"),setTimeout((function(){$("#alertasGeocercas").html("")}),3e3),e.abrupt("return",!1);case 6:if(""!=this.newGeofence&&null!=this.newGeofence){e.next=11;break}return console.debug("sin name"),$("#alertasGeocercas").html("<div class='alert alert-danger alert-dismissible fade show' role='alert' style='text-align: initial;'><strong>Error! </strong>Por favor ingresa nombre</div>"),setTimeout((function(){$("#alertasGeocercas").html("")}),3e3),e.abrupt("return",!1);case 11:if(this.$store.state.loader=!0,"radial"!==this.tipoGeocerca){e.next=17;break}if(!(this.radioGeofence<5)){e.next=17;break}return $("#alertasGeocercas").html("<div class='alert alert-danger alert-dismissible fade show' role='alert' style='text-align: initial;'><strong>Error! </strong>El radio de la geocerca no puede ser menor a 5 metros.</div>"),setTimeout((function(){$("#alertasGeocercas").html("")}),3e3),e.abrupt("return",!1);case 17:if(t={},a=[],"nueva"!==this.accion){e.next=28;break}return i={geofenceType:1,behavior:3,name:this.newGeofence,radio:this.radioGeofence},"radial"===this.tipoGeocerca&&(i.figureType=1,i.coords=[{lat:this.dataDrawing.lat,lng:this.dataDrawing.lng}]),"poligonal"===this.tipoGeocerca&&(i.figureType=2,i.coords=this.dataDrawing.vertices),t["geofence"]=i,e.next=26,this.postRequest("geofences",t);case 26:o=e.sent,!0===o.success?(this.geocercaIDRegister=o.data.geofenceID,$("#alertasGeocercas").html("<div class='alert alert-success alert-dismissible fade show' role='alert' style='text-align: initial;'><strong>Excelente! </strong>Se ha guardado la geocerca<button type='button' class='close' data-dismiss='alert' aria-label='Close' style='padding-top: 0px;'><span aria-hidden='true'>&times;</span></button></div>"),setTimeout((function(){$("#alertasGeocercas").html(""),r.cancelFormGeofence(),r.configuracion()}),2e3),this.$store.state.loader=!1):(this.$store.state.loader=!1,$("#alertasGeocercas").html("<div class='alert alert-danger alert-dismissible fade show' role='alert' style='text-align: initial;'><strong>Error! </strong>No se ha creado la geocerca<button type='button' class='close' data-dismiss='alert' aria-label='Close' style='padding-top: 0px;'><span aria-hidden='true'>&times;</span></button></div>"));case 28:if("editar"!==this.accion){e.next=37;break}for(i={behavior:this.dataGeofence.behavior,name:this.newGeofence,radio:this.radioGeofence},n=0;n<this.dataDrawing.coords.length;n++)s=JSON.parse(JSON.stringify(this.dataDrawing.coords[n])),a.push({lat:parseFloat(s.lat),lng:parseFloat(s.lng)});return i.coords=a,t["geofence"]=i,e.next=35,this.putRequest("geofences/"+this.dataDrawing.id,t);case 35:o=e.sent,!0===o.success?($("#alertasGeocercas").html("<div class='alert alert-success alert-dismissible fade show' role='alert' style='text-align: initial;'><strong>Excelente! </strong>Se ha guardado la geocerca<button type='button' class='close' data-dismiss='alert' aria-label='Close' style='padding-top: 0px;'><span aria-hidden='true'>&times;</span></button></div>"),setTimeout((function(){$("#alertasGeocercas").html(""),r.cancelFormGeofence()}),3e3),this.$store.state.loader=!1):(this.$store.state.loader=!1,$("#alertasGeocercas").html("<div class='alert alert-danger alert-dismissible fade show' role='alert' style='text-align: initial;'><strong>Error! </strong>No se ha creado la geocerca<button type='button' class='close' data-dismiss='alert' aria-label='Close' style='padding-top: 0px;'><span aria-hidden='true'>&times;</span></button></div>"));case 37:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),cancelFormGeofence:function(){$("#radial").removeClass("active"),$("#poligonal").removeClass("active"),this.$emit("onClose")},configuracion:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.$store.state.loader=!0,this.$store.commit("CLEAR_MODAL_DINAMIC"),t={component:G,datos:{accion:this.accion,idGeofence:this.geocercaIDRegister,dataGeofence:this.dataGeofence}},e.next=5,this.$store.commit("ADD_COMPONENT_DINAMIC",t);case 5:return e.next=7,this.$store.commit("ADD_COMPONENT_DINAMIC_STATE",!0);case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},computed:{showTipoGeocerca:function(){return this.tipoGeocerca},tipoAccion:function(){return this.accion},getDataDrawing:function(){return $("#radial").removeClass("active"),$("#poligonal").removeClass("active"),1===this.dataDrawing.size&&("editar"===this.dataDrawing.accion?(this.dataGeofence=this.dataDrawing,this.newGeofence=this.dataDrawing.name,1==this.dataDrawing.figureType&&(this.tipoGeocerca="radial",this.radioGeofence=this.dataDrawing.radio),2==this.dataDrawing.figureType&&(this.tipoGeocerca="poligonal")):(this.tipoGeocerca=this.dataDrawing.tipo,"radial"===this.tipoGeocerca?this.radioGeofence=this.dataDrawing.radio:(this.dataGeofence=this.dataDrawing,this.tipoGeocerca=this.dataDrawing.tipo)),this.tipoGeocerca=this.dataDrawing.tipo),this.tipoGeocerca=this.dataDrawing.tipo,$("#"+this.dataDrawing.tipo).addClass("active"),this.dataDrawing}}},w=C,x=(i("71e3"),Object(v["a"])(w,c,l,!1,null,null,null)),y=x.exports,D=i("ff25"),_=i("43b1"),k=i("d3e3"),E={name:"panelGeocercas",mixins:[d["a"],f["a"],_["a"]],components:{draggable:r["a"],draggableHeader:r["d"],draggableContent:r["c"],gestionGeofence:y,GeofenceDelete:D["a"],loaderSmall:function(){return i.e("chunk-5fddced4").then(i.bind(null,"33d4"))}},inject:["getMap","getDraggableProperties"],data:function(){return{draggable:{name:"test",top:0,left:0,width:300,height:300,index:100,show:!1},position:null,listGeocercas:[],geofenceFiltered:[],listGeocercasOrigin:null,primeraVez:!0,accion:"",dataGeocerca:{},geofenceID:null,titleContentForm:"",loader:{show:!1},filtro:""}},created:function(){this.loader.show=!0},mounted:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.map=this.getMap(),this.map.$on("completeDrawing",this.completeDrawing),this.map.$on("completeDrawingPlygon",this.completeDrawingPlygon),this.map.$on("editDrawingCircle",this.editDrawingCircle),this.getlistGeofence(),this.suscribeToGeofencesEvents(),e.next=8,this.unSelectedGeofences();case 8:this.loader.show=!1,this.RegisterTooltip();case 10:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),beforeDestroy:function(){this.accion="",this.dataGeocerca={},this.geofenceID=null,this.unsuscribreFromGeofencesEvents(),this.showAllDrawingGeo(!1)},methods:{RegisterTooltip:function(){jQuery(document).ready((function(){jQuery('[data-toggle="tooltip"]').tooltip()}))},GetGeofenceIconClass:function(e){switch(e){case"1":return"universalicon-geofence";case"2":return"universalicon-polygon"}},limpiarVariables:function(){this.accion="",this.dataGeocerca={},this.geofenceID=null,this.titleContentForm=""},filterLista:function(e){var t="lista";this.listGeocercas=this.filterList(this.listGeocercasOrigin,"name",e,t),this.RegisterTooltip()},suscribeToGeofencesEvents:function(){var e=this;k["a"].$on("MapModule_editDataDrawing",(function(t){e.editDataDrawing(t)})),k["a"].$on("MapModule_editDataDrawingPolygon",(function(t){e.editDataDrawingPolygon(t)})),k["a"].$on("Modal_GET_LIST_GEOFENCES",(function(t){e.getlistGeofence()}))},unsuscribreFromGeofencesEvents:function(){k["a"].$off("MapModule_editDataDrawing"),k["a"].$off("MapModule_editDataDrawingPolygon"),k["a"].$off("Modal_GET_LIST_GEOFENCES")},getFigureTypeName:function(e){switch(e){case"1":return"Circular";case"2":return"Poligonal"}},getlistGeofence:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){var t,i,a=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t={geofenceType:1},e.next=3,this.getRequest("geofences",t);case 3:i=e.sent,!0===i.success?(this.listGeocercas=i.data.geofences,this.listGeocercasOrigin=i.data.geofences,Object.entries(this.listGeocercas).forEach((function(e){var t=Object(o["a"])(e,2),i=(t[0],t[1]);i.selected=!1,i.figureTypeName=a.getFigureTypeName(i.figureType)}))):console.log("fail"),this.RegisterTooltip();case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),showNewGeofence:function(){this.showAllDrawingGeo(!1),this.dataGeocerca={},this.accion="nueva",this.dataGeocerca.accion=this.accion,this.titleContentForm="Nueva Geocerca";var e=this.getDraggableProperties();this.draggable.top=e.top+110,this.draggable.left=-(e.width+10),this.draggable.show=!0},DrawingGeocerca:function(e){console.debug("LISTGEO_ this.createDrawing(payload)",e),this.createDrawing(e),"radial"===e.tipo&&(this.titleContentForm="Nueva geocerca circular"),"poligonal"===e.tipo&&(this.titleContentForm="Nueva geocerca poligonal")},setRadiusCircleGeo:function(e){this.setRadiusCircle(e)},unSelectedGeofences:function(){for(var e=0;e<this.listGeocercas.length;e++){$("#Check-"+this.listGeocercas[e].id).prop("checked",!1),this.listGeocercas[e].selected=!1;var t={id:this.listGeocercas[e].id,visible:!1};this.setVisible(t)}return!0},onGeofenceChecked:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t,i){var a,s,o,n,r,c=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a=c.length>2&&void 0!==c[2]?c[2]:1,1==a&&(s=t.target.checked),2==a&&(s=t),this.unSelectedGeofences(),o=this.listGeocercas.find((function(e){return e.id==i})),o.selected=s,1!=s){e.next=13;break}return $("#Check-"+o.id).prop("checked",!0),e.next=10,this.getRequest("geofences/"+o.id);case 10:r=e.sent,!0===r.success?n=r.data.geofence:console.log("fail"),this.consultarGeofences(n);case 13:0==s&&$("#Check-"+o.id).prop("checked",!1);case 14:case"end":return e.stop()}}),e,this)})));function t(t,i){return e.apply(this,arguments)}return t}(),consultarGeofences:function(e){this.showAllDrawingGeo(!1),e.accion="consultarEsp",1==e.figureType&&this.createCircle(e),2==e.figureType&&this.createPolygon(e)},showAllDrawingGeo:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.showAllDrawing(e,t)},editarGeofence:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){var i,a,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:for(this.unSelectedGeofences(),i=0;i<this.listGeocercas.length;i++)this.listGeocercas[i].id==t&&($("#Check-"+t).prop("checked",!0),this.listGeocercas[i].selected=!0);return e.next=4,this.getRequest("geofences/"+t);case 4:s=e.sent,!0===s.success?a=s.data.geofence:console.log("fail"),this.editGeofence(a);case 7:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),editGeofence:function(e){this.dataGeocerca={},this.titleContentForm="Editar Geocerca",this.accion="editar",this.dataGeocerca.accion=this.accion;var t=this.getDraggableProperties();this.draggable.top=t.top+110,this.draggable.left=-(t.width+10),this.draggable.show=!0,this.dataGeocerca=e,this.dataGeocerca.size=1,this.dataGeocerca.accion=this.accion,1==e.figureType&&(this.createCircle(e),this.titleContentForm="Editar geocerca circular"),2==e.figureType&&(this.createPolygon(e),this.dataGeocerca.tipo="poligonal",this.titleContentForm="Editar geocerca poligonal"),this.lockDraggable(!0),this.editSymbol(e.id,!0)},editDataDrawing:function(e){console.debug("LIST",e);var t=this.dataGeocerca;this.dataGeocerca={},"nueva"===this.accion&&(this.dataGeocerca=e),"editar"===this.accion&&(this.dataGeocerca=t,this.dataGeocerca.coords[0].lat=e.lat,this.dataGeocerca.coords[0].lng=e.lng,this.dataGeocerca.radio=e.radio),this.dataGeocerca.seccion=this.seccion,this.dataGeocerca.size=1,this.dataGeocerca.tipo=e.tipo},editDataDrawingPolygon:function(e){console.debug("llegada de evenbus complete",e);var t=this.dataGeocerca;this.dataGeocerca={};var i={};"nueva"===this.accion&&(this.dataGeocerca.vertices=e.vertices,this.dataGeocerca.tipo=e.tipo),"editar"===this.accion&&(i=t,this.accion="editar",i.coords=e.vertices,this.dataGeocerca=i),this.dataGeocerca.size=1,this.dataGeocerca.tipo=e.tipo},onDraggableClose:function(){this.getlistGeofence(),this.draggable.show=!1,this.lockDraggable(!1),this.clearComponentsForm()},lockDraggable:function(e){this.$emit("lockDraggable",e)},eliminarGeofence:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t,i){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.$store.commit("CLEAR_MODAL_DINAMIC"),a={component:D["a"],datos:{tipo:"geofence",GeofenceID:t,name:i}},e.next=4,this.$store.commit("ADD_COMPONENT_DINAMIC",a);case 4:return e.next=6,this.$store.commit("ADD_COMPONENT_DINAMIC_STATE",!0);case 6:case"end":return e.stop()}}),e,this)})));function t(t,i){return e.apply(this,arguments)}return t}(),clearComponentsForm:function(){var e;"editar"===this.accion&&(e=this.dataGeocerca.id),"nueva"===this.accion&&(e=null),this.accion="",this.dataGeocerca={},this.closeDrawing(e)}},computed:{GeofenceList:function(){return this.listGeocercas},fgeofenceID:function(){return this.geofenceID},faccion:function(){return this.accion},fdataGeocerca:function(){return this.dataGeocerca}}},R=E,S=Object(v["a"])(R,a,s,!1,null,null,null);t["default"]=S.exports},"57df":function(e,t,i){},"71e3":function(e,t,i){"use strict";var a=i("57df"),s=i.n(a);s.a}}]);
//# sourceMappingURL=chunk-f31900e8.f8539c2f.js.map