(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-23554bba"],{"0c5b":function(e,t,s){"use strict";var c=s("dc7f"),o=s.n(c);o.a},8150:function(e,t,s){"use strict";var c=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"row"},[s("div",{staticClass:"col-6 col-lg-3"},[s("m-select",{ref:"productTypeSelect",attrs:{data:e.productType.catalog,filterby:"type",title:"Seleccione tipo de producto"},on:{selectionChanged:e.onProductTypeSelected}})],1),s("div",{staticClass:"w-100"}),s("div",{staticClass:"col-6 col-lg-3"},[s("m-select",{attrs:{data:e.factory.catalog,filterby:"name",title:"Seleccione Marca"},on:{selectionChanged:e.onFactorySelected}})],1),e.model.visible?s("div",{staticClass:"col-6 col-lg-3"},[s("m-select",{attrs:{data:e.model.catalog,filterby:"name",title:"Seleccione Modelo"},on:{selectionChanged:e.onModelSelected}})],1):e._e(),s("div",{staticClass:"col-6 col-lg-3"},[s("m-autocomplete",{attrs:{data:e.product.store,filterby:"id",title:"Seleccione producto"},on:{selectionChanged:e.onProductSelected}})],1),s("div",{staticClass:"col-6  col-lg-3 align-self-end text-left"},[s("button",{staticClass:"btn",class:[e.addProductBtnClass],on:{click:function(t){return e.addProduct()}}},[e._v("Agregar")])])])},o=[],i=(s("96cf"),s("3b8d")),r=s("08e6"),n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"form-group text-left",staticStyle:{"margin-bottom":"10px"}},[s("label",[e._v(e._s(e.title))]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.query,expression:"query"}],ref:"input",staticClass:"form-control",attrs:{type:"text",placeholder:"Seleccione"},domProps:{value:e.query},on:{keydown:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"up",38,t.key,["Up","ArrowUp"])?null:e.up(t)},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"down",40,t.key,["Down","ArrowDown"])?null:e.down(t)},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.close()}],click:function(t){e.show(!0),e.autoClearSelection()},blur:function(t){return e.close()},input:function(t){t.target.composing||(e.query=t.target.value)}}}),s("div",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"visible"}],ref:"optionsList",staticClass:"popover options"},[s("ul",{on:{mouseleave:function(t){return e.close()}}},e._l(e.matches,(function(t,c){return s("li",{key:c,domProps:{textContent:e._s(t[e.filterby])},on:{click:function(t){return e.itemClicked(c)}}})})),0)])])},l=[],a=(s("6762"),s("2fdb"),{name:"MAutocomplete",props:{data:{type:Array,required:!0},filterby:{type:String,required:!0},title:{default:"Seleccione",type:String},resetOnClick:{type:Boolean,default:!1}},data:function(){return{itemHeight:39,selectedItem:null,selectedIndex:-1,query:"",visible:!1}},methods:{autoClearSelection:function(){this.resetOnClick&&this.clearSelection()},clearSelection:function(){this.selectedIndex=-1,this.query="",this.selectedItem=null,this.$emit("selectionChanged",this.selectedItem)},close:function(){var e=this;setTimeout((function(){e.visible&&(console.debug("close and searchItem"),e.searchItem())}),250)},show:function(e){var t=this;setTimeout((function(){t.visible=e}),50)},itemClicked:function(e){console.debug("ItemClick",e),this.selectedItem=this.matches[e],this.query=this.selectedItem[this.filterby],this.show(!1),this.$emit("selectionChanged",this.selectedItem)},searchItem:function(){try{console.debug("searchItem"),1==this.matches.length?(this.selectedItem=this.matches[0],this.query=this.selectedItem[this.filterby]):(this.selectedItem=null,this.query="")}catch(e){this.selectedItem=null,this.query=""}this.show(!1),this.$refs.input.blur(),this.$emit("selectionChanged",this.selectedItem)},up:function(){0!=this.selectedIndex&&(this.selectedIndex-=1,this.scrollToItem())},down:function(){this.selectedIndex>=this.matches.length-1||(this.selectedIndex+=1,this.scrollToItem())},scrollToItem:function(){this.$refs.optionsList.scrollTop=this.selectedIndex*this.itemHeight}},computed:{matches:function(){var e=this;try{return""===this.query?this.data:this.data.filter((function(t){return t[e.filterby].toLowerCase().includes(e.query.toLowerCase())}))}catch(t){return this.data}}},watch:{data:function(){this.clearSelection()}}}),d=a,u=(s("0c5b"),s("2877")),h=Object(u["a"])(d,n,l,!1,null,"089e06fa",null),p=h.exports,m=s("b381"),f={name:"ProductSelector",mixins:[r["a"]],components:{mAutocomplete:p,mSelect:m["a"]},data:function(){return{productType:{catalog:[],selected:""},factory:{catalog:[],selected:""},model:{catalog:[],selected:"",visible:!0},product:{store:[],selected:""}}},mounted:function(){this.getProductTypes()},methods:{clearProducts:function(){this.product.store=[],this.product.selected=""},clearModel:function(){this.model.catalog=[],this.model.selected="",2==this.productType.selected.id?this.model.visible=!1:this.model.visible=!0,this.clearProducts()},clearFactory:function(){this.factory.catalog=[],this.factory.selected="",this.clearModel()},getProductTypes:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.$store.state.loader=!0,e.next=3,this.getRequest("catalogs/products/types");case 3:t=e.sent,this.productType.catalog=t.data.types,this.$store.state.loader=!1;case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getFactories:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){var s,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.$store.state.loader=!0,s={productType:t},e.next=4,this.getRequest("catalogs/products/factories",s);case 4:c=e.sent,this.factory.catalog=c.data.factories,this.$store.state.loader=!1;case 7:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),getModels:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){var s,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.$store.state.loader=!0,s={productType:this.productType.selected.id},e.next=4,this.getRequest("catalogs/products/factories/".concat(t,"/models"),s);case 4:c=e.sent,this.model.catalog=c.data.models,this.$store.state.loader=!1;case 7:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),getProducts:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.$store.state.loader=!0,t={productType:this.productType.selected.id,factory:this.factory.selected.id,onTransfers:!1,limit:0},2!==this.productType.selected.id&&(t.model=this.model.selected.id),e.next=5,this.getRequest("store",t);case 5:s=e.sent,this.product.store=s.data.products,this.$store.state.loader=!1;case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),onProductTypeSelected:function(e){this.productType.selected=e,this.clearFactory(),this.getFactories(e.id)},onFactorySelected:function(e){this.clearModel(),this.factory.selected=e,2==this.productType.selected.id?this.getProducts():this.getModels(e.id)},onModelSelected:function(e){this.clearProducts(),this.model.selected=e,this.getProducts()},onProductSelected:function(e){this.product.selected=e},addProduct:function(){this.product.selected&&(console.debug("OnProductSelected",this.product.selected),this.$emit("OnProductSelected",this.product.selected),this.$refs.productTypeSelect.selectedItem="",this.clearFactory())}},computed:{addProductBtnClass:function(){return this.product.selected?"btn-primary":"btn-secondary"}}},y=f,g=Object(u["a"])(y,c,o,!1,null,null,null);t["a"]=g.exports},b381:function(e,t,s){"use strict";var c=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"text-left",staticStyle:{"margin-bottom":"10px"}},[s("label",[e._v(e._s(e.title))]),s("select",{directives:[{name:"model",rawName:"v-model",value:e.selectedItem,expression:"selectedItem"}],staticClass:"form-control",attrs:{name:e.nameSelect,refs:"select"},on:{change:[function(t){var s=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.selectedItem=t.target.multiple?s:s[0]},e.onChange]}},[s("option",{attrs:{disabled:"",value:""}},[e._v("Seleccione")]),e._l(e.data,(function(t,c){return s("option",{key:c,domProps:{value:t}},[e._v(e._s(t[e.filterby]))])}))],2)])},o=[],i={name:"MSelect",props:{data:{type:Array,required:!0},filterby:{type:String,required:!0},title:{default:"Seleccione",type:String},nameSelect:{type:String,required:!1}},data:function(){return{selectedItem:""}},created:function(){},methods:{onChange:function(){this.$emit("selectionChanged",this.selectedItem)}},watch:{data:function(){this.selectedItem=""}}},r=i,n=s("2877"),l=Object(n["a"])(r,c,o,!1,null,null,null);t["a"]=l.exports},dc7f:function(e,t,s){}}]);
//# sourceMappingURL=chunk-23554bba.e47660cb.js.map