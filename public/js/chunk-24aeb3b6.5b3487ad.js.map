{"version":3,"sources":["webpack:///./src/views/Reportes/reporteGeofence.vue?74a6","webpack:///src/views/Reportes/reporteGeofence.vue","webpack:///./src/views/Reportes/reporteGeofence.vue?f54a","webpack:///./src/views/Reportes/reporteGeofence.vue?199e","webpack:///./src/views/Reportes/reporteGeofence.vue?8364"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_m","attrs","_v","directives","name","rawName","value","expression","on","$event","$$selectedVal","Array","prototype","filter","call","target","options","o","selected","map","val","_value","device","multiple","_l","key","id","domProps","_s","alias","geocerca","geo","comport","staticStyle","cancel","createReport","ShowLoader","_e","showResultado","reports","length","first","prev","pageNo","pages","next","last","csvFields","csvLabels","csvFileName","report","index","_f","timestamp","deviceAlias","behaviorString","geofenceTypeString","geofenceName","lat","lng","address","staticRenderFns","mixins","API","components","JsonCsv","data","resultado","listDevice","listGeofences","fechaString","deviceImeiString","reportsTable","pageSize","pageCount","fechaInicio","fechaFinal","created","$store","state","loader","Object","values","devices","getlistGeofence","methods","$router","push","init","count","Math","ceil","virtualService","page","console","debug","queryFromVirtualDB","result","condition","slice","startRow","endRow","params","computed","component"],"mappings":"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","file":"js/chunk-24aeb3b6.5b3487ad.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\" row \"},[_vm._m(0),_c('div',{staticClass:\" col-12\"},[_c('div',{staticClass:\"card\"},[_vm._m(1),_c('div',{staticClass:\"card-body float-left\"},[_c('div',{staticClass:\"row\"},[_vm._m(2),_c('hr'),_c('div',{staticClass:\"col-12 col-md-4\"},[_c('div',{staticClass:\"form-group\"},[_c('label',{attrs:{\"for\":\"exampleFormControlSelect1\"}},[_vm._v(\"Dispositivo\")]),_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.device),expression:\"device\"}],staticClass:\"form-control\",attrs:{\"id\":\"exampleFormControlSelect1\"},on:{\"change\":function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.device=$event.target.multiple ? $$selectedVal : $$selectedVal[0]}}},[_c('option',{attrs:{\"value\":\"0\"}},[_vm._v(\"Selecciona dispositivo\")]),_vm._l((_vm.listDevice),function(device){return _c('option',{key:device.id,domProps:{\"value\":device.id}},[_vm._v(_vm._s(device.alias))])})],2)])]),_c('div',{staticClass:\"col-6 col-md-4\"},[_c('div',{staticClass:\"form-group\"},[_c('label',{attrs:{\"for\":\"exampleFormControlSelect1\"}},[_vm._v(\"Geeocerca\")]),_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.geocerca),expression:\"geocerca\"}],staticClass:\"form-control\",attrs:{\"id\":\"exampleFormControlSelect1\"},on:{\"change\":function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.geocerca=$event.target.multiple ? $$selectedVal : $$selectedVal[0]}}},[_c('option',{attrs:{\"value\":\"0\",\"disabled\":\"\"}},[_vm._v(\"Selecciona\")]),_c('option',{attrs:{\"value\":\"0\"}},[_vm._v(\"Todas las geocercas\")]),_vm._l((_vm.listGeofences),function(geo){return _c('option',{key:geo.id,domProps:{\"value\":geo.id}},[_vm._v(_vm._s(geo.name))])})],2)])]),_c('div',{staticClass:\"col-6 col-md-4\"},[_c('div',{staticClass:\"form-group\"},[_c('label',{attrs:{\"for\":\"exampleFormControlSelect1\"}},[_vm._v(\"Comportamiento\")]),_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.comport),expression:\"comport\"}],staticClass:\"form-control\",attrs:{\"id\":\"exampleFormControlSelect1\"},on:{\"change\":function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.comport=$event.target.multiple ? $$selectedVal : $$selectedVal[0]}}},[_c('option',{attrs:{\"value\":\"0\",\"disabled\":\"\"}},[_vm._v(\"Selecciona\")]),_c('option',{attrs:{\"value\":\"1\"}},[_vm._v(\"Entradas\")]),_c('option',{attrs:{\"value\":\"2\"}},[_vm._v(\"Salidas\")]),_c('option',{attrs:{\"value\":\"3\"}},[_vm._v(\"Entradas/Salidas\")])])])]),_c('div',{staticClass:\"col-12 col-md-6\"},[_c('config-text-typography',{attrs:{\"texto\":\"Fecha de inicio\"}}),_c('input',{staticClass:\"form-control\",attrs:{\"type\":\"text\",\"id\":\"date-start1\",\"placeholder\":\"Fecha de inicio\"}})],1),_c('div',{staticClass:\"col-12 col-md-6\"},[_c('config-text-typography',{attrs:{\"texto\":\"Fecha final\"}}),_c('input',{staticClass:\"form-control\",attrs:{\"type\":\"text\",\"id\":\"date-end1\",\"placeholder\":\"Fecha final\"}})],1)]),_c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"col-6 float-left\",staticStyle:{\"margin-top\":\"30px\"}},[_c('button',{staticClass:\"btn btn-secondary \",on:{\"click\":function($event){return _vm.cancel()}}},[_vm._v(\"CANCELAR\")])]),_c('div',{staticClass:\"col-6 float-right\",staticStyle:{\"margin-top\":\"30px\"}},[_c('button',{staticClass:\"btn btn-primary \",on:{\"click\":function($event){return _vm.createReport()}}},[_vm._v(\"GENERAR\")])])]),(_vm.ShowLoader!=null && !_vm.ShowLoader)?_c('div',{attrs:{\"id\":\"loader\"}}):_vm._e(),_vm._m(3),(_vm.showResultado && this.reports.length>0)?_c('div',{staticClass:\"row\",staticStyle:{\"margin-top\":\"20px\"}},[_vm._m(4),_c('hr'),_c('div',{staticClass:\"col-12 text-left\",staticStyle:{\"margin-bottom\":\"10px\"}},[_c('button',{staticClass:\"btn btn-primary btn-sm\",attrs:{\"type\":\"button\"},on:{\"click\":function($event){return _vm.first()}}},[_vm._v(\"Primero\")]),_c('button',{staticClass:\"btn btn-primary btn-sm\",on:{\"click\":function($event){return _vm.prev()}}},[_vm._v(\"Anterior\")]),_c('span',{staticStyle:{\"padding-top\":\"1em\",\"margin-left\":\"15px\",\"margin-right\":\"15px\"}},[_c('b',[_vm._v(\"Pagina \"+_vm._s(_vm.pageNo)+\" de \"+_vm._s(_vm.pages))])]),_c('button',{staticClass:\"btn btn-primary btn-sm\",on:{\"click\":function($event){return _vm.next()}}},[_vm._v(\"Siguiente\")]),_c('button',{staticClass:\"btn btn-primary btn-sm\",on:{\"click\":function($event){return _vm.last()}}},[_vm._v(\"Ultimo\")]),_c('json-csv',{staticClass:\"float-right\",attrs:{\"data\":_vm.reports,\"fields\":_vm.csvFields,\"labels\":_vm.csvLabels,\"name\":_vm.csvFileName}},[_c('span',{staticClass:\"cssToolTip cursor\"},[_c('i',{staticClass:\"icon universalicon-file-csv\",staticStyle:{\"font-size\":\"30px\"}}),_c('span',{staticStyle:{\"top\":\"13px!important\",\"left\":\"-180%!important\"}},[_vm._v(\"Exportar csv\")])])])],1),_c('div',{staticClass:\"table-responsive scrollTable\"},[_c('table',{staticClass:\"table table-hover header_fijo\"},[_vm._m(5),_c('tbody',_vm._l((_vm.reportsTable),function(report,index){return _c('tr',{key:index},[_c('td',[_vm._v(_vm._s(_vm._f(\"moment\")(report.timestamp* 1000,\"DD-MMM-YYYY HH:mm:ss\")))]),_c('td',[_vm._v(_vm._s(report.deviceAlias))]),_c('td',[_vm._v(_vm._s(report.behaviorString))]),_c('td',[_vm._v(_vm._s(report.geofenceTypeString))]),_c('td',[_vm._v(_vm._s(report.geofenceName))]),_c('td',[_vm._v(_vm._s(report.lat)+\",\"+_vm._s(report.lng))]),_c('td',[_vm._v(_vm._s(report.address))])])}),0)])]),_c('div',{staticClass:\"col-12 text-left\",staticStyle:{\"margin-top\":\"15px\"}},[_c('button',{staticClass:\"btn btn-primary btn-sm\",attrs:{\"type\":\"button\"},on:{\"click\":function($event){return _vm.first()}}},[_vm._v(\"Primero\")]),_c('button',{staticClass:\"btn btn-primary btn-sm\",on:{\"click\":function($event){return _vm.prev()}}},[_vm._v(\"Anterior\")]),_c('span',{staticStyle:{\"padding-top\":\"1em\",\"margin-left\":\"15px\",\"margin-right\":\"15px\"}},[_c('b',[_vm._v(\"Pagina \"+_vm._s(_vm.pageNo)+\" de \"+_vm._s(_vm.pages))])]),_c('button',{staticClass:\"btn btn-primary btn-sm\",on:{\"click\":function($event){return _vm.next()}}},[_vm._v(\"Siguiente\")]),_c('button',{staticClass:\"btn btn-primary btn-sm\",on:{\"click\":function($event){return _vm.last()}}},[_vm._v(\"Ultimo\")])])]):_vm._e(),(_vm.showResultado && this.reports.length<=0)?_c('div',{staticClass:\"row\",staticStyle:{\"margin-top\":\"20px\"}},[_c('div',{staticClass:\"col-12\"},[_vm._v(\"No se obtuvieron resultados\")])]):_vm._e()])])])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"col-12\"},[_c('h5',{staticClass:\"float-left\",staticStyle:{\"font-size\":\"20px\",\"padding-bottom\":\"10px\"}},[_c('b',[_vm._v(\"Reportes - Reporte geocercas\")])])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"card-header row\"},[_c('div',{staticClass:\"col-6\"},[_c('h5',{staticClass:\" float-left\"},[_vm._v(\"Reporte geocercas\")])])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"col-12 \"},[_c('h5',[_vm._v(\"Generar reporte\")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"row\",staticStyle:{\"margin-top\":\"20px\"}},[_c('div',{staticClass:\"col-12\",attrs:{\"id\":\"alertReport\"}})])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"col-8 \"},[_c('h5',[_vm._v(\"Reporte\")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('thead',[_c('tr',[_c('th',[_vm._v(\"Fecha\")]),_c('th',[_vm._v(\"Dispositivo\")]),_c('th',[_vm._v(\"Evento\")]),_c('th',[_vm._v(\"Tipo geocerca\")]),_c('th',[_vm._v(\"Geocerca\")]),_c('th',[_vm._v(\"Ubicacion\")]),_c('th',[_vm._v(\"Direccion\")])])])}]\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\" row \">\r\n      <div class=\"col-12\"> <h5 class=\"float-left\" style=\"font-size: 20px; padding-bottom: 10px;\"><b>Reportes - Reporte geocercas</b></h5></div>\r\n      <div class=\" col-12\">\r\n\r\n        <div class=\"card\">\r\n            <div class=\"card-header row\">\r\n              <div class=\"col-6\">\r\n                <h5 class=\" float-left\">Reporte geocercas</h5>\r\n              </div>\r\n\r\n            </div>\r\n            <div class=\"card-body float-left\">\r\n\r\n                  <div class=\"row\">\r\n                      <div class=\"col-12 \"><h5 >Generar reporte</h5></div>\r\n                      <hr>\r\n                       <div class=\"col-12 col-md-4\">\r\n                          <div class=\"form-group\">\r\n                            <label for=\"exampleFormControlSelect1\">Dispositivo</label>\r\n                            <select class=\"form-control\" id=\"exampleFormControlSelect1\" v-model=\"device\">\r\n                              <option value=\"0\">Selecciona dispositivo</option>\r\n                              <option v-for=\"device in listDevice\"  :key=\"device.id\"  :value=\"device.id\" >{{device.alias}}</option>\r\n                            </select>\r\n                        </div>\r\n                      </div>\r\n\r\n                      <div class=\"col-6 col-md-4\">\r\n                          <div class=\"form-group\">\r\n                            <label for=\"exampleFormControlSelect1\">Geeocerca</label>\r\n                            <select class=\"form-control\" id=\"exampleFormControlSelect1\" v-model=\"geocerca\">\r\n                                <option value=\"0\" disabled>Selecciona</option>\r\n                                <option value=\"0\">Todas las geocercas</option>\r\n                                <option v-for=\"geo in listGeofences\"  :key=\"geo.id\"  :value=\"geo.id\" >{{geo.name}}</option>\r\n                            </select>\r\n                        </div>\r\n                      </div>\r\n\r\n                      <div class=\"col-6 col-md-4\">\r\n                        <div class=\"form-group\">\r\n                            <label for=\"exampleFormControlSelect1\">Comportamiento</label>\r\n                            <select class=\"form-control\" id=\"exampleFormControlSelect1\" v-model=\"comport\">\r\n                                <option value=\"0\" disabled>Selecciona</option>\r\n                                <option value=\"1\">Entradas</option>\r\n                                <option value=\"2\">Salidas</option>\r\n                                <option value=\"3\">Entradas/Salidas</option>\r\n                            </select>\r\n                        </div>\r\n                      </div>\r\n\r\n                      <div class=\"col-12 col-md-6\">\r\n                         <config-text-typography  texto=\"Fecha de inicio\"></config-text-typography>\r\n                        <input type=\"text\" id=\"date-start1\" class=\"form-control\" placeholder=\"Fecha de inicio\">\r\n                      </div>\r\n                      <div class=\"col-12 col-md-6\">\r\n                         <config-text-typography  texto=\"Fecha final\"></config-text-typography>\r\n                        <input type=\"text\" id=\"date-end1\" class=\"form-control\" placeholder=\"Fecha final\">\r\n                      </div>\r\n\r\n                  </div>\r\n\r\n                     <div class=\"row\">\r\n                      <div class=\"col-6 float-left\" style=\"margin-top: 30px;\">\r\n                          <button class=\"btn btn-secondary \" @click=\"cancel()\">CANCELAR</button>\r\n                      </div>\r\n                      <div class=\"col-6 float-right\" style=\"margin-top: 30px;\">\r\n                        <button class=\"btn btn-primary \" @click=\"createReport()\">GENERAR</button> <!-- createReport -->\r\n\r\n                      </div>\r\n                    </div>\r\n\r\n                    <!-- <div class=\"row\" v-if=\"showResultado\">\r\n                      <div class=\"col-12 float-right\">\r\n\r\n                         // Ejemplo de generar reporte\r\n                          //json-csv es el componente que sirve para descargar el excel\r\n                          //puedes poner cualquier contenido dentro una imagen, un font-icon un div- etc\r\n\r\n                        <json-csv\r\n                        :data=\"reports\"\r\n                        :fields=\"csvFields\"\r\n                        :labels=\"csvLabels\"\r\n                        :name=\"csvFileName\"\r\n                         >\r\n\r\n                          <span class=\"cssToolTip\"><i class='icon universalicon-file-csv' style=\"font-size:30px;\"></i><span>Exportar csv</span></span>\r\n\r\n                      </json-csv>\r\n                      </div>\r\n                    </div> -->\r\n\r\n                    <div id=\"loader\" v-if=\"ShowLoader!=null && !ShowLoader\"></div>\r\n                      <div class=\"row\" style=\" margin-top: 20px;\">\r\n                        <div class=\"col-12\" id=\"alertReport\"></div>\r\n                      </div>\r\n\r\n                    <div class=\"row\" v-if=\"showResultado && this.reports.length>0\" style=\"margin-top: 20px;\">\r\n                      <div class=\"col-8 \"><h5 >Reporte</h5></div>\r\n                      <hr>\r\n\r\n                      <div class=\"col-12 text-left\" style=\"margin-bottom: 10px;\">\r\n                         <button type=\"button\"  class=\"btn btn-primary btn-sm\" @click=\"first()\">Primero</button>\r\n                        <button @click=\"prev()\" class=\"btn btn-primary btn-sm\">Anterior</button>\r\n                        <span style=\"padding-top:1em; margin-left:15px; margin-right:15px;\"><b>Pagina {{pageNo}} de {{pages}}</b></span>\r\n                        <button @click=\"next()\" class=\"btn btn-primary btn-sm\">Siguiente</button>\r\n                        <button @click=\"last()\" class=\"btn btn-primary btn-sm\">Ultimo</button>\r\n\r\n                        <json-csv\r\n                            :data=\"reports\"\r\n                            :fields=\"csvFields\"\r\n                            :labels=\"csvLabels\"\r\n                            :name=\"csvFileName\"\r\n                            class=\"float-right\"\r\n                            >\r\n\r\n                              <span class=\"cssToolTip cursor\"><i class='icon universalicon-file-csv' style=\"font-size:30px;\"></i><span style=\"top: 13px!important; left: -180%!important;\">Exportar csv</span></span>\r\n\r\n                          </json-csv>\r\n\r\n                      </div>\r\n\r\n                        <div class=\"table-responsive scrollTable\">\r\n                            <table class=\"table table-hover header_fijo\">\r\n                                <thead>\r\n                                    <tr>\r\n                                        <th>Fecha</th>\r\n                                        <th>Dispositivo</th>\r\n                                        <th>Evento</th>\r\n                                        <th>Tipo geocerca</th>\r\n                                        <th>Geocerca</th>\r\n                                        <th>Ubicacion</th>\r\n                                        <th>Direccion</th>\r\n                                    </tr>\r\n                                </thead>\r\n                                <tbody>\r\n                                    <tr v-for=\"(report,index) in reportsTable\" :key=\"index\">\r\n                                        <td>{{report.timestamp* 1000 | moment(\"DD-MMM-YYYY HH:mm:ss\") }}</td>\r\n                                        <td>{{report.deviceAlias}}</td>\r\n                                        <td>{{report.behaviorString}}</td>\r\n                                        <td>{{report.geofenceTypeString}}</td>\r\n                                        <td>{{report.geofenceName}}</td>\r\n                                        <td>{{report.lat}},{{report.lng}}</td>\r\n                                        <td>{{report.address}}</td>\r\n                                    </tr>\r\n\r\n                                </tbody>\r\n                                <!-- <tfoot>\r\n                                    <tr>\r\n                                        <th>Name</th>\r\n                                        <th>Position</th>\r\n                                        <th>Office</th>\r\n                                        <th>Age</th>\r\n                                        <th>Start date</th>\r\n                                        <th>Salary</th>\r\n                                    </tr>\r\n                                </tfoot> -->\r\n                            </table>\r\n                        </div>\r\n\r\n                        <div class=\"col-12 text-left\" style=\"margin-top:15px;\">\r\n                         <button type=\"button\"  class=\"btn btn-primary btn-sm\" @click=\"first()\">Primero</button>\r\n                        <button @click=\"prev()\" class=\"btn btn-primary btn-sm\">Anterior</button>\r\n                        <span style=\"padding-top:1em; margin-left:15px; margin-right:15px;\"><b>Pagina {{pageNo}} de {{pages}}</b></span>\r\n                        <button @click=\"next()\" class=\"btn btn-primary btn-sm\">Siguiente</button>\r\n                        <button @click=\"last()\" class=\"btn btn-primary btn-sm\">Ultimo</button>\r\n                      </div>\r\n\r\n                    </div>\r\n                    <div class=\"row\" v-if=\"showResultado && this.reports.length<=0\" style=\"margin-top: 20px;\">\r\n                      <div class=\"col-12\">No se obtuvieron resultados</div>\r\n                    </div>\r\n\r\n            </div>\r\n\r\n        </div>\r\n\r\n      </div>\r\n\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport JsonCsv from 'vue-json-csv'\r\nimport { API } from '@/mixins/API'\r\nimport EventBus from '@/EventBus'\r\nimport { Functions } from '@/mixins/Functions'\r\n/**\r\n * @group Reportes\r\n * Genera reportes de geocercas\r\n */\r\nexport default {\r\n  name: 'reporteGeocercas',\r\n  mixins: [API, Functions],\r\n  components: {\r\n    JsonCsv\r\n  },\r\n  data () {\r\n    return {\r\n      comport: 0,\r\n      geocerca: 0,\r\n      device: 0,\r\n      resultado: false,\r\n      listDevice: [],\r\n      listGeofences: [],\r\n      ShowLoader: null,\r\n\r\n      reports: [],\r\n      csvFields: ['fechaString', 'deviceImeiString', 'deviceAlias', 'behaviorString', 'geofenceTypeString', 'geofenceName', 'lat', 'lng', 'address'],\r\n      csvLabels: {\r\n        fechaString: 'FECHA',\r\n        deviceImeiString: 'IMEI',\r\n        deviceAlias: 'DISPOSITIVO',\r\n        behaviorString: 'EVENTO',\r\n        geofenceTypeString: 'TIPO GEOCERCA',\r\n        geofenceName: 'NOMBRE GEOCERCA',\r\n        lat: 'LATITUD',\r\n        lng: 'LONGITUD',\r\n        address: 'DIRECCION'\r\n      },\r\n      csvFileName: '',\r\n\r\n      reportsTable: [],\r\n      pageNo: 1,\r\n      pageSize: 100,\r\n      pageCount: 0,\r\n      pages: 0,\r\n      fechaInicio: '',\r\n      fechaFinal: ''\r\n\r\n    }\r\n  },\r\n  created () {\r\n    this.$store.state.loader = false\r\n    this.listDevice = Object.values(this.$store.state.devices.devices)\r\n    this.getlistGeofence()\r\n  },\r\n  async mounted () {\r\n    this.$store.state.seccionMenu = 'reportes'\r\n    await EventBus.$emit('NAVBAR_MenuSimple', 'reportes')\r\n    $('#containerPrincipal').css({ 'margin-left': this.$store.state.widthMenu })\r\n    $('#containerPrincipal').css({ 'margin-top': this.$store.state.topMenu })\r\n\r\n    /* FECHA Y HORA */\r\n    var f = new Date()\r\n    var dia1 = f.getDate()\r\n    var mes1 = f.getMonth()\r\n    var anioActual = f.getFullYear()\r\n    // var nuevaFECHA = f.setMonth(mes1 - 1)\r\n\r\n    // var date = this.$moment(new Date())\r\n    // var fromDate = date.format('MMMM DD, YYYY ')\r\n    // var fechaIni = fromDate + ' 00:00:00'\r\n\r\n    // nuevos\r\n    $('#date-end1').bootstrapMaterialDatePicker({\r\n      weekStart: 0,\r\n      lang: 'es',\r\n      format: 'MMMM DD, YYYY HH:mm:ss',\r\n      // maxDate: new Date(),\r\n      //  minDate: f\r\n      shortTime: true,\r\n      year: true, // Permitir seleccionar año\r\n      date: true, // Permitir seleccionar fecha/mes\r\n      time: false, // Permite seleccionar la hora\r\n      maxDate: this.$moment(new Date()).endOf('day'),\r\n      minDate: this.$moment(new Date()).startOf('day')\r\n      // currentDate: this.$moment(new Date()) // Selecciona fecha por default,\r\n\r\n    })\r\n    $('#date-start1').bootstrapMaterialDatePicker({\r\n\r\n      weekStart: 0,\r\n      lang: 'es',\r\n      // format: 'LLL',\r\n      format: 'MMMM DD, YYYY HH:mm:ss',\r\n      currentDate: this.$moment(new Date()).startOf('day'), // Selecciona fecha por default,\r\n      maxDate: this.$moment(new Date()).endOf('day'),\r\n      shortTime: true, // Permite mostrar la hora como AM/PM en vez de formato 24 HRS\r\n      // minDate: f\r\n      year: true, // Permitir seleccionar año\r\n      date: true, // Permitir seleccionar fecha/mes\r\n      time: false // Permite seleccionar la hora\r\n\r\n    }).on('change', function (e, date) {\r\n      var fechaSelect = new Date(date)\r\n      this.fechaInicio = date\r\n      var anio1 = fechaSelect.getFullYear()\r\n      var dia2 = fechaSelect.getDate()\r\n      console.debug('fech sin formato', fechaSelect)\r\n      var mesLimit = fechaSelect.getMonth()\r\n\r\n      var nuevaFechaLimit = fechaSelect.setMonth(mesLimit + 3)\r\n      // fechaSelect.setHours(23)\r\n      // fechaSelect.setMinutes(59)\r\n      // fechaSelect.setSeconds(59)\r\n\r\n      var mesLimit2 = fechaSelect.getMonth()\r\n      var anio2 = fechaSelect.getFullYear()\r\n      console.debug(f, 'actual', mesLimit, anio1)\r\n      console.debug(fechaSelect, 'fecha mas3', mesLimit2, anio2, 'nueva fecha', nuevaFechaLimit)\r\n      if (anio2 > anioActual) {\r\n        console.debug('año diferente', dia1, dia2)\r\n        fechaSelect = new Date()\r\n        // if (mesLimit2 > 0) {\r\n        //   if (dia2 > dia1) {\r\n        //     console.debug('dia mayor')\r\n        //     fechaSelect = new Date()\r\n        //   }\r\n        // }\r\n      } else {\r\n        if (anio2 == anioActual) {\r\n          console.debug('mismo año')\r\n          if (mesLimit2 > mesLimit) {\r\n            fechaSelect = new Date()\r\n            //     console.debug('entra menos de 3 meses del actual')\r\n            //     fechaSelect = new Date()\r\n            //   }\r\n          }\r\n          if (mesLimit2 == mes1) {\r\n            if (dia2 > dia1) {\r\n              console.debug('dia mayor, mismo mes')\r\n              fechaSelect = new Date()\r\n            }\r\n          }\r\n          // if (anioActual == anio1) {\r\n          //   if (mesLimit2 >= mesLimit) {\r\n          //     console.debug('entra menos de 3 meses del actual')\r\n          //     fechaSelect = new Date()\r\n          //   }\r\n          // }\r\n        }\r\n      }\r\n      console.debug('fecha FINAL', fechaSelect)\r\n      // $('#date-start1').bootstrapMaterialDatePicker('setMinDate', date)\r\n      $('#date-end1').bootstrapMaterialDatePicker('setMinDate', date)\r\n      // 3 meses\r\n      $('#date-end1').bootstrapMaterialDatePicker('setMaxDate', fechaSelect)\r\n    }).on('change', function (e, date) {\r\n      this.fechaFinal = date\r\n      console.debug('FECHA_FIANL', this.fechaFinal)\r\n    })\r\n    this.$store.state.loader = false\r\n  },\r\n  methods: {\r\n    /**\r\n   * @vuese\r\n   * Obtiene la lista de geocercas creadas\r\n   */\r\n    async getlistGeofence () {\r\n      const datos = {\r\n        'geofenceType': 1\r\n      }\r\n\r\n      var request = await this.getRequest('geofences', datos)\r\n      // return request.data.devices\r\n      if (request.success === true) {\r\n        this.listGeofences = request.data.geofences\r\n      } else {\r\n        console.log('fail')\r\n      }\r\n    },\r\n    /**\r\n   * @vuese\r\n   * Para regresar a la pagina principal\r\n   */\r\n    cancel () {\r\n      this.$router.push('/reports')\r\n    },\r\n    /**\r\n   * @vuese\r\n   * procesa, analiza y manda los filtros para generar el reporte\r\n   */\r\n    async createReport () {\r\n      if (this.device == 0 || this.device == '0') {\r\n        $('#alertReport').html(\"<div class='alert alert-danger alert-dismissible fade show' role='alert' style='text-align: initial;'><strong>Error! </strong>Debe seleccionar un dispositivo<button type='button' class='close' data-dismiss='alert' aria-label='Close' style='padding-top: 0px;'><span aria-hidden='true'>&times;</span></button></div>\")\r\n        setTimeout(() => {\r\n          $('#alertReport').html('')\r\n        }, 3000)\r\n        return 0\r\n      }\r\n\r\n      // Filtros para el reporte\r\n      var filters = {\r\n        deviceID: parseInt(this.device)\r\n      }\r\n      // ingresa comportamiento\r\n      if (this.comport != 0 && this.comport != 3) {\r\n        filters.behavior = this.comport\r\n      }\r\n\r\n      // ingresa geocerca\r\n      if (this.geocerca != 0 && this.geocerca != '0') {\r\n        filters.geofenceID = this.geocerca\r\n      }\r\n\r\n      // this.comport\r\n      // this.geocerca\r\n\r\n      var fecIni2 = $('#date-start1').val()\r\n      var fecFin2 = $('#date-end1').val()\r\n\r\n      var fecIni = this.fechaEsp(fecIni2)\r\n      var fecFin = this.fechaEsp(fecFin2)\r\n\r\n      console.debug(fecIni, 'DATOS_FECHA', fecFin)\r\n      var timesIni\r\n      var timeFin\r\n\r\n      if (fecIni == '' && fecFin == '') {\r\n        // filtro no se manda y consulta los de hoy\r\n        // timesIni = new Date() / 1000\r\n\r\n        // timeFin = new Date() / 1000\r\n      } else {\r\n        if (fecIni != '' && fecFin != '') {\r\n          timesIni = Date.parse(fecIni) / 1000\r\n\r\n          timeFin = Date.parse(fecFin) / 1000\r\n\r\n          filters.fromTimestamp = timesIni\r\n          filters.tillTimestamp = timeFin\r\n        } else {\r\n          // debe llenar las 2 fechas\r\n          $('#alertReport').html(\"<div class='alert alert-danger alert-dismissible fade show' role='alert' style='text-align: initial;'><strong>Error! </strong>Debe ingresar las 2 fechas<button type='button' class='close' data-dismiss='alert' aria-label='Close' style='padding-top: 0px;'><span aria-hidden='true'>&times;</span></button></div>\")\r\n          setTimeout(() => {\r\n            $('#alertReport').html('')\r\n          }, 3000)\r\n          return 0\r\n        }\r\n      }\r\n\r\n      this.listDevice.forEach(disp => {\r\n        if (disp.id == this.device) {\r\n          this.deviceImei = disp.imei\r\n          this.deviceAlias = disp.alias\r\n        }\r\n      })\r\n\r\n      this.ShowLoader = true // (mostrar un loader de cargando)\r\n      this.$store.state.loader = true\r\n      // Configuramos la descarga por primera vez\r\n      this.reports = []\r\n\r\n      // Variables demo, para construir el nobre del archivo csv\r\n      var name = 'ReporteGeocercas'\r\n      var from = parseInt(this.deviceImei)\r\n      var to = '190807'\r\n\r\n      // Nombre que tendra el archivo csv\r\n      this.csvFileName = `${name}.csv`\r\n\r\n      console.debug('FILTRO', filters)\r\n\r\n      // Obtener reportes\r\n      this.getReports(filters)\r\n    },\r\n    /**\r\n   * @vuese\r\n   * genera el reporte con los filtros\r\n   * @arg `filters` es un arreglo con los filtros a generar el reporte\r\n   */\r\n    async getReports (filters) {\r\n      // Decargar datos\r\n      var response = await this.getRequest('reports/geofences', filters)\r\n\r\n      /**\r\n       * La fecha en los datos descargados vienen en timestsamp\r\n       * iterar cada resultado y agregarle una propiedad fechaString (convertir timestamp to date con moment)\r\n       * ademas agregamos una ' en el imei para que el archivo csv no convierta el imei a numero y se pierdan digitos\r\n       */\r\n      response.data.reports.forEach(row => {\r\n        try {\r\n          var day = this.$moment.unix(parseInt(row.timestamp))\r\n          row.deviceImeiString = \"'\" + row.deviceImei\r\n          row.fechaString = day.format('DD-MMM-YYYY HH:mm:ss')\r\n\r\n          if (row.geofenceTypeString == 'GEOFENCE') {\r\n            row.geofenceTypeString = 'GEOCERCA'\r\n          } else if (row.geofenceTypeString == 'POINT_OF_INTEREST') {\r\n            row.geofenceTypeString = 'PUNTO DE INTERES'\r\n          }\r\n\r\n          if (row.behaviorString == 'IN') {\r\n            row.behaviorString = 'ENTRANDO'\r\n          } else if (row.behaviorString == 'OUT') {\r\n            row.behaviorString = 'SALIENDO'\r\n          }\r\n        } catch (err) {\r\n          console.warn('Error parsing timestamp')\r\n          row.fechaString = day.format('No disponible')\r\n        }\r\n      })\r\n\r\n      // CONCATENAMOS los resultados al arreglo final\r\n      // NO hacemos un push porque esto no funcionaria\r\n      this.reports = this.reports.concat(response.data.reports)\r\n\r\n      // SI pagination next contiene token volvemos a llamar getReports para descargar mas datos\r\n      // De lo contrario terminamos\r\n      if (response.pagination.next) {\r\n        console.debug('Next')\r\n        filters = { paginationToken: response.pagination.next }\r\n        this.getReports(filters)\r\n      } else {\r\n        console.debug('FINISH')\r\n        // Buen lugar para por ejemplo showLoader = false\r\n        this.init()\r\n        this.ShowLoader = false // (mostrar un loader de cargando)\r\n        this.$store.state.loader = false\r\n        this.resultado = true\r\n      }\r\n    },\r\n    /**\r\n   * @vuese\r\n   * funcion iniciar la paginacion\r\n   */\r\n    init: function () {\r\n      this.pages = this.count({})\r\n      this.pages = Math.ceil((this.pages / this.pageSize))\r\n\r\n      this.virtualService({\r\n        pageNo: this.pageNo,\r\n        pageSize: this.pageSize\r\n      })\r\n    },\r\n    /**\r\n   * @vuese\r\n   * funcion de paginacion\r\n   */\r\n    page: function (pageNo) {\r\n      this.virtualService({\r\n        pageNo: pageNo,\r\n        pageSize: this.pageSize\r\n      })\r\n    },\r\n    /**\r\n   * @vuese\r\n   * funcion de primero en paginacion\r\n   */\r\n    first: function () {\r\n      this.pageNo = 1\r\n      this.virtualService({\r\n        pageNo: this.pageNo,\r\n        pageSize: this.pageSize\r\n      })\r\n    },\r\n    /**\r\n   * @vuese\r\n   * funcion de ultimo en paginacion\r\n   */\r\n    last: function () {\r\n      this.pageNo = this.pageCount\r\n      this.virtualService({\r\n        pageNo: this.pageNo,\r\n        pageSize: this.pageSize\r\n      })\r\n    },\r\n    /**\r\n   * @vuese\r\n   * funcion de anterior en paginacion\r\n   */\r\n    prev: function () {\r\n      if (this.pageNo > 1) {\r\n        this.pageNo -= 1\r\n        this.virtualService({\r\n          pageNo: this.pageNo,\r\n          pageSize: this.pageSize\r\n        })\r\n      }\r\n    },\r\n    /**\r\n   * @vuese\r\n   * funcion de siguiente en paginacion\r\n   */\r\n    next: function () {\r\n      console.debug(`${this.pageNo} < ${this.pageCount}`)\r\n\r\n      if (this.pageNo < this.pageCount) {\r\n        this.pageNo += 1\r\n        this.virtualService({\r\n          pageNo: this.pageNo,\r\n          pageSize: this.pageSize\r\n        })\r\n      }\r\n    },\r\n    /**\r\n   * @vuese\r\n   * Obtiene el numero de reportes\r\n   */\r\n    count: function (condition) {\r\n      return this.reports.length\r\n    },\r\n    /**\r\n   * @vuese\r\n   * funciones de paginacion `queryFromVirtualDB`\r\n   */\r\n    queryFromVirtualDB: function (condition, startRow, endRow) {\r\n      var result = []\r\n      condition = {}\r\n      var count = this.count(condition)\r\n\r\n      console.debug(`GET REPORTS FROM ${startRow} AT ${endRow}`, condition)\r\n      result = this.reports.slice(startRow, endRow)\r\n      // for (var i = startRow - 1; i < endRow; i++) {\r\n      //   if (i < count) {\r\n      //     result.push(this.reports[i])\r\n      //   }\r\n      // }\r\n      return result\r\n    },\r\n    /**\r\n   * @vuese\r\n   * funciones de paginacion `virtualService`\r\n   */\r\n    virtualService: function (params) {\r\n      var result = []\r\n      var condition = {}\r\n      var pageNo = params.pageNo\r\n      var pageSize = params.pageSize\r\n      var pageCount = Math.ceil(this.count(condition) / pageSize)\r\n\r\n      if (pageNo == 0) pageNo = 1\r\n      if (pageNo < 0) pageNo = pageCount\r\n      else if (pageNo > pageCount) pageNo = pageCount\r\n      var startRow = (pageNo - 1) * pageSize + 1\r\n\t\t  var endRow = startRow + pageSize - 1\r\n      var data = this.queryFromVirtualDB(condition, startRow, endRow)\r\n\r\n      // set result\r\n      this.reportsTable = data\r\n      this.pageNo = pageNo\r\n      this.pageCount = pageCount\r\n    }\r\n  },\r\n  computed: {\r\n    /**\r\n   * @vuese\r\n   * devuelve si se obtuvieron resultado o no\r\n   */\r\n    showResultado () {\r\n      return this.resultado\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style>\r\n.mpConf{\r\n  margin: 10px;\r\n  padding-top: 10px;\r\n}\r\n\r\n.scrollTable{\r\n  position: relative;\r\n    overflow: auto;\r\n    height: 480px;\r\n    width: 100%;\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./reporteGeofence.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./reporteGeofence.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./reporteGeofence.vue?vue&type=template&id=5e2fbc82&\"\nimport script from \"./reporteGeofence.vue?vue&type=script&lang=js&\"\nexport * from \"./reporteGeofence.vue?vue&type=script&lang=js&\"\nimport style0 from \"./reporteGeofence.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./reporteGeofence.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./reporteGeofence.vue?vue&type=style&index=0&lang=css&\""],"sourceRoot":""}