(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5a8bc690"],{1969:function(e,t,r){"use strict";var a=r("cdba"),i=r.n(a);i.a},cdba:function(e,t,r){},f051:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:" row "},[e._m(0),r("div",{staticClass:" col-12"},[r("div",{staticClass:"card"},[e._m(1),r("div",{staticClass:"card-body float-left"},[r("div",{staticStyle:{"z-index":"1 !important"},attrs:{id:"smartwizard"}},[e._m(2),r("div",[r("div",{staticClass:"mpConf",attrs:{id:"step-1"}},[r("div",{staticClass:"row"},[e._m(3),e._m(4),r("hr"),r("div",{staticClass:"col-6"},[r("config-input",{attrs:{id:"alias",label:"Alias con que se identificará a la unidad",typeinput:"text",placeholder:"Alias",required:"true",valor:e.alias,toLowerUperCase:"uppercase"},model:{value:e.alias,callback:function(t){e.alias="string"===typeof t?t.trim():t},expression:"alias"}})],1),r("div",{staticClass:"col-6"},[r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"exampleFormControlSelect1"}},[e._v("Flotilla a la que pertenece la unidad")]),r("select",{directives:[{name:"model",rawName:"v-model",value:e.flotilla,expression:"flotilla"}],staticClass:"form-control",attrs:{id:"exampleFormControlSelect1"},on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.flotilla=t.target.multiple?r:r[0]}}},e._l(e.listFleet,(function(t){return r("option",{key:t.id,domProps:{value:t.id}},[e._v(e._s(t.name))])})),0)])]),r("div",{staticClass:"col-12 col-sm-5"},[r("div",{staticClass:"form-group float-left"},[r("label",{attrs:{for:"exampleFormControlSelect2"}},[e._v("Tipo marcador que representará a la unidad en el mapa")]),r("select",{directives:[{name:"model",rawName:"v-model",value:e.marcador,expression:"marcador"}],staticClass:"form-control",attrs:{id:"exampleFormControlSelect2"},on:{change:[function(t){var r=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.marcador=t.target.multiple?r:r[0]},function(t){return e.changeMarker()}]}},e._l(e.listMarker,(function(t){return r("option",{key:t.id,domProps:{value:t.id}},[e._v("\n                                   "+e._s(t.name)+"\n\n                                    ")])})),0)])]),r("div",{staticClass:"col-1 float-left",staticStyle:{padding:"0px"},attrs:{id:"imgMarker"}}),r("div",{staticClass:"col-6"},[r("config-input",{attrs:{id:"placas",label:"Placas del vehiculo",typeinput:"text",placeholder:"Placas",required:"true",valor:e.placas,toLowerUperCase:"uppercase"},model:{value:e.placas,callback:function(t){e.placas="string"===typeof t?t.trim():t},expression:"placas"}})],1),r("div",{staticClass:"col-6"},[r("config-input",{attrs:{id:"marca",label:"Marca del vehiculo",typeinput:"text",placeholder:"Marca",required:"true",valor:e.marcaV},model:{value:e.marcaV,callback:function(t){e.marcaV="string"===typeof t?t.trim():t},expression:"marcaV"}})],1),r("div",{staticClass:"col-6"},[r("config-input",{attrs:{id:"mod",label:"Modelo del vehiculo",typeinput:"text",placeholder:"Modelo",required:"true",valor:e.modeloV},model:{value:e.modeloV,callback:function(t){e.modeloV="string"===typeof t?t.trim():t},expression:"modeloV"}})],1),r("div",{staticClass:"col-6"},[r("config-input",{attrs:{id:"vin",label:"VIN del vehiculo (# serie del motor)",typeinput:"text",placeholder:"VIN",required:"true",valor:e.vinV},model:{value:e.vinV,callback:function(t){e.vinV="string"===typeof t?t.trim():t},expression:"vinV"}})],1),r("div",{staticClass:"col-6"},[r("config-input",{attrs:{id:"anio",label:"Año del vehiculo",typeinput:"text",placeholder:"Año",required:"true",valor:e.anioV},model:{value:e.anioV,callback:function(t){e.anioV="string"===typeof t?t.trim():t},expression:"anioV"}})],1),r("div",{staticClass:"col-6"},[r("config-input",{attrs:{id:"color",label:"Color del vehiculo",typeinput:"text",placeholder:"Color",required:"true",valor:e.colorV},model:{value:e.colorV,callback:function(t){e.colorV="string"===typeof t?t.trim():t},expression:"colorV"}})],1),r("div",{staticClass:"col-6"},[r("config-input",{attrs:{id:"pais",label:"País del vehiculo",typeinput:"text",placeholder:"País",required:"true",valor:e.paisV},model:{value:e.paisV,callback:function(t){e.paisV="string"===typeof t?t.trim():t},expression:"paisV"}})],1),r("div",{staticClass:"col-6"},[r("config-input",{attrs:{id:"reg",label:"Región del vehiculo",typeinput:"text",placeholder:"Región",required:"true",valor:e.regionV},model:{value:e.regionV,callback:function(t){e.regionV="string"===typeof t?t.trim():t},expression:"regionV"}})],1),r("div",{staticClass:"col-6"},[r("config-input",{attrs:{id:"nos",label:"Aseguradora",typeinput:"text",placeholder:"Aseguradora",required:"true",valor:e.seguroV},model:{value:e.seguroV,callback:function(t){e.seguroV="string"===typeof t?t.trim():t},expression:"seguroV"}})],1),r("div",{staticClass:"col-6"},[r("config-input",{attrs:{id:"idS",label:"# Seguro",typeinput:"text",placeholder:"# Seguro",required:"true",valor:e.numSeguro},model:{value:e.numSeguro,callback:function(t){e.numSeguro="string"===typeof t?t.trim():t},expression:"numSeguro"}})],1)]),r("hr"),e._m(5),r("div",{staticClass:"row"},[r("div",{staticClass:"col-6"},[r("config-input",{attrs:{id:"conductor",label:"Nombre del conductor",typeinput:"text",placeholder:"Conductor",required:"true",valor:e.conductor},model:{value:e.conductor,callback:function(t){e.conductor="string"===typeof t?t.trim():t},expression:"conductor"}})],1),r("div",{staticClass:"col-6"},[r("config-input",{attrs:{id:"telC",label:"Teléfono del conductor",typeinput:"text",placeholder:"Teléfono",required:"true",valor:e.telefono},model:{value:e.telefono,callback:function(t){e.telefono="string"===typeof t?t.trim():t},expression:"telefono"}})],1)]),r("div",{staticClass:"row"},[r("div",{staticClass:"col-12 float-left",staticStyle:{"margin-top":"30px"}},[r("button",{staticClass:"btn btn-secondary",on:{click:function(t){return e.cancel()}}},[e._v("CANCELAR")])])])]),r("div",{staticClass:"mpConf",attrs:{id:"step-2"}},[e._m(6),r("div",{staticClass:"row justify-content-center"},[r("div",{staticClass:"col-8"},[r("config-input",{attrs:{id:"report1",label:"Tiempo de reporte cuando la unidad esta en movimiento (en segundos) ",typeinput:"number",placeholder:"Tiempo de reporte en movimiento",miNumber:"0",required:"true",valor:e.reportInterval},model:{value:e.reportInterval,callback:function(t){e.reportInterval="string"===typeof t?t.trim():t},expression:"reportInterval"}})],1),r("div",{staticClass:"col-8"},[r("config-input",{attrs:{id:"report2",label:"Tiempo de reporte cuando la unidad esta en detenido (en segundos)",typeinput:"number",placeholder:"Tiempo de reporte en detenido",miNumber:"0",required:"true",valor:e.reportIntervalParking},model:{value:e.reportIntervalParking,callback:function(t){e.reportIntervalParking="string"===typeof t?t.trim():t},expression:"reportIntervalParking"}})],1)]),r("div",{staticClass:"row  justify-content-center"},[r("div",{staticClass:"col-6 ",staticStyle:{"margin-top":"30px","text-align":"center"}},[r("button",{staticClass:"btn btn-secondary ",on:{click:function(t){return e.cancel()}}},[e._v("CANCELAR")]),r("button",{staticClass:"btn btn-primary ",on:{click:function(t){return e.editar()}}},[e._v("EDITAR")])])]),e._m(7)])])])])])])])},i=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"col-12"},[r("h5",{staticClass:"float-left",staticStyle:{"font-size":"20px","padding-bottom":"10px"}},[r("b",[e._v("Configurar dispositivos - Editar dispositivo")])])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"card-header row"},[r("div",{staticClass:"col-6"},[r("h5",{staticClass:" float-left"},[e._v("Editar dispositivo")])])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("ul",[r("li",[r("a",{attrs:{href:"#step-1"}},[r("h6",[e._v("Paso 1")]),r("p",{staticClass:"m-0"},[e._v("Datos")])])]),r("li",[r("a",{attrs:{href:"#step-2"}},[r("h6",[e._v("Paso 2")]),r("p",{staticClass:"m-0"},[e._v("Tiempo de reporte")])])])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"col-12"},[r("p",{staticClass:"text-muted",staticStyle:{"text-align":"justify","font-size":"12px","margin-top":"7px"}},[e._v("\n           A continuación podrás consultar y modificar los datos de la unidad, vehiculo y conductor")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"col-12 "},[r("h5",[e._v("Datos del vehiculo")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"row"},[r("div",{staticClass:"col-12 "},[r("h5",[e._v("Datos del conductor")])])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"row"},[r("div",{staticClass:"col-12"},[r("p",{staticClass:"text-muted",staticStyle:{"text-align":"justify","font-size":"12px","margin-top":"7px"}},[e._v("\n           A continuación podrás consultar y modificar el tiempo en segundos en que manda un reporte de localización una unidad en movimiento asi como el tiempo en segundos en que reportara la unidad en detenido.")])]),r("div",{staticClass:"col-12 "},[r("h5",[e._v("Tiempo reporte")])]),r("hr")])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"row",staticStyle:{"margin-top":"20px"}},[r("div",{staticClass:"col-12",attrs:{id:"alerts"}}),r("div",{staticClass:"col-12",attrs:{id:"alertsFleet"}})])}],s=(r("ac6a"),r("8615"),r("7f7f"),r("7514"),r("96cf"),r("3b8d")),n=r("08e6"),o=r("d3e3"),l={name:"FormularioEditarDispositivo",mixins:[n["a"]],data:function(){return{alias:"",flotilla:null,marcador:1,placas:null,conductor:null,telefono:"",password:"",confPassw:"",reportInterval:0,reportIntervalParking:0,accion:"",deviceID:0,listFleet:[],listMarker:[],reportIntervalStore:0,reportIntervalParkingStore:0,marcaV:"",modeloV:"",vinV:0,anioV:0,colorV:"",paisV:"",regionV:"",seguroV:"",numSeguro:""}},created:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.accion=this.$route.params.accion,this.deviceID=this.$route.params.id,this.getFleets(),this.getMarkers(),e.next=6,this.getDevice();case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),mounted:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.$store.state.submenuActive="config",this.$store.state.itemSubmenuActive="itemDevice",e.next=4,o["a"].$emit("NAVBAR_MenuOpciones","config","itemDevice");case 4:$("#containerPrincipal").css({"margin-left":this.$store.state.widthMenu}),$("#containerPrincipal").css({"margin-top":this.$store.state.topMenu}),$("#smartwizard").smartWizard({theme:"dots",transitionEffect:"fade",autoAdjustHeight:!1,useURLhash:!1,showStepURLhash:!1}),$("#smartwizard .sw-toolbar").appendTo($("#smartwizard .sw-container")),this.$store.state.loader=!1,$(".sw-btn-next").click((function(){window.scrollTo(0,0)})),$(".sw-btn-prev").click((function(){window.scrollTo(0,0)}));case 11:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),methods:{changeMarker:function(){var e=this;console.debug("MARQIER",this.marcador);var t=this.listMarker.find((function(t){return t.id==e.marcador}));$("#imgMarker").html(" <img class='img-fluid' style='width: 35px;' src='img/map/markers/"+t.name+".png'>")},getFleets:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getRequest("fleets");case 2:t=e.sent,r=t.data.fleets,this.listFleet=r,this.listFleet.push({id:null,name:"SIN ASIGNAR"});case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getMarkers:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getRequest("catalogs/markers");case 2:t=e.sent,r=t.data.markers,this.listMarker=r;case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getDevice:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t,r,a,i=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=Object.values(this.$store.state.devices.devices),e.next=3,this.getRequest("devices/".concat(this.deviceID));case 3:return r=e.sent,a=r.data.device,this.conductor=a.driver,this.telefono=a.driverPhone,this.marcador=a.markerType,this.placas=a.carplate,this.marcaV=a.vehicleBrand,this.modeloV=a.vehicleModel,this.vinV=a.vehicleVIN,this.anioV=a.vehicleYear,this.colorV=a.vehicleColor,this.paisV=a.country,this.regionV=a.region,this.seguroV=a.insurance,this.numSeguro=a.insuranceID,t.forEach((function(e){e.id==i.deviceID&&(i.alias=e.alias,i.flotilla=e.fleetID,i.reportInterval=e.reportInterval-e.addTimeInterval,i.reportIntervalParking=e.reportIntervalOnParking-e.addTimeInterval,i.reportIntervalStore=e.reportInterval-e.addTimeInterval,i.reportIntervalParkingStore=e.reportIntervalOnParking-e.addTimeInterval)})),e.next=21,this.changeMarker();case 21:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),cancel:function(){this.$router.push("/listDevice")},editar:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t,r,a,i,s,n,l,c,u,d,p=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.reportInterval=parseInt(this.reportInterval),this.reportIntervalParking=parseInt(this.reportIntervalParking),!(this.reportInterval>=this.reportIntervalParking)){e.next=6;break}return $("#alerts").html("<div class='alert alert-danger alert-dismissible fade show' role='alert' style='text-align: initial;'><strong>Error! </strong>El tiempo de reporte en detenido debe ser mayor al tiempo de reporte en movimiento</div>"),setTimeout((function(){$("#alerts").html("")}),5e3),e.abrupt("return",!1);case 6:return t={marker:this.marcador,alias:this.alias.toUpperCase(this.alias)},r={name:this.conductor,phone:this.telefono},a={brand:this.marcaV,model:this.modeloV,year:this.anioV,vin:this.vinV,colour:this.colorV,carPlate:this.placas.toUpperCase(this.placas),country:this.paisV,region:this.regionV,insurance:this.seguroV,insuranceID:this.numSeguro},i={},i["device"]=t,i["driver"]=r,i["vehicle"]=a,this.$store.state.loader=!0,e.next=16,this.putRequest("devices/"+this.deviceID,i);case 16:if(s=e.sent,!0!==s.success){e.next=34;break}return n=Object.values(this.$store.state.devices.devices),this.listMarker.forEach((function(e){parseInt(e.id)==parseInt(p.marcador)&&(u=e.name)})),d={imei:l,markerName:u},o["a"].$emit("SET_MARKER_ICON",d),n.forEach((function(e){e.id==p.deviceID&&(e.alias=p.alias,e.fleetID=p.flotilla,c=e.fleetID,e.reportInterval=p.reportInterval+e.addTimeInterval,e.reportIntervalOnParking=p.reportIntervalParking+e.addTimeInterval,l=e.imei,e.marker.id=p.marcador,e.marker.name=u)})),i={fleetID:this.flotilla},e.next=26,this.putRequest("devices/"+this.deviceID+"/fleets",i);case 26:s=e.sent,!0===s.success?!0:($("#alertsFleet").html("<div class='alert alert-danger alert-dismissible fade show' role='alert' style='text-align: initial;'><strong>Error! </strong>No se ha actualizado la flotilla</div>"),n.forEach((function(e){e.id==p.deviceID&&(e.fleetID=c)})),setTimeout((function(){$("#alertsFleet").html("")}),3e3)),this.reportInterval==this.reportIntervalStore&&this.reportIntervalParking==this.reportIntervalParkingStore||(this.$store.state.ws.connected?this.WS_INTEVAL_REPORT(this.reportInterval,this.reportIntervalParking,l):$("#alerts").html("<div class='alert alert-danger alert-dismissible fade show' role='alert' style='text-align: initial;'><strong>Error! </strong>El servidor esta fuera de línea, por lo que no se puede cambiar el tiempo de reporte del dispositivo<button type='button' class='close' data-dismiss='alert' aria-label='Close' style='padding-top: 0px;'><span aria-hidden='true'>&times;</span></button></div>")),this.$store.state.loader=!1,$("#alerts").html("<div class='alert alert-success alert-dismissible fade show' role='alert' style='text-align: initial;'><strong>Excelente! </strong>Se ha actualizado el dispositivo<button type='button' class='close' data-dismiss='alert' aria-label='Close' style='padding-top: 0px;'><span aria-hidden='true'>&times;</span></button></div>"),setTimeout((function(){$("#alerts").html(""),p.cancel()}),3e3),e.next=36;break;case 34:this.$store.state.loader=!1,$("#alerts").html("<div class='alert alert-danger alert-dismissible fade show' role='alert' style='text-align: initial;'><strong>Error! </strong>No se ha actualizado el dispositivo<button type='button' class='close' data-dismiss='alert' aria-label='Close' style='padding-top: 0px;'><span aria-hidden='true'>&times;</span></button></div>");case 36:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),WS_INTEVAL_REPORT:function(e,t,r){var a={imei:r,onDrivingInterval:e,onParkingInterval:t};this.$store.dispatch("ws/SET_REPORT_INTERVAL",a)}},computed:{getMarker:function(){return this.marcador}}},c=l,u=(r("1969"),r("2877")),d=Object(u["a"])(c,a,i,!1,null,null,null);t["default"]=d.exports}}]);
//# sourceMappingURL=chunk-5a8bc690.29d6a601.js.map