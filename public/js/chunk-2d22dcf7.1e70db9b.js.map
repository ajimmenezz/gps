{"version":3,"sources":["webpack:///./src/views/MapModule/MapFloatMenu/panelDevices/listDevices.vue?f4c6","webpack:///src/views/MapModule/MapFloatMenu/panelDevices/listDevices.vue","webpack:///./src/views/MapModule/MapFloatMenu/panelDevices/listDevices.vue?884d","webpack:///./src/views/MapModule/MapFloatMenu/panelDevices/listDevices.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","staticStyle","_m","directives","name","rawName","value","deviceList","expression","attrs","domProps","on","$event","target","composing","$set","FilterDeviceList","LocateAllDevices","_v","helper","ResetDeviceListFilter","_l","fleet","key","id","selected","OnFleetSelectionChanged","checked","ToggleCollapseFleet","_s","LocateFleet","devices","length","device","imei","OnDeviceSelectionChanged","class","locationStatus","alias","LocateDevices","actionButtons","SetEngine","_e","totalSelected","ShowDeviceRoutePanel","FilterDeviceListByReportState","$store","getters","staticRenderFns","data","map","showResetDeviceListButton","searchTerm","list","filteredList","filterByReportStatus","setEngine","permission","inject","mounted","InitializeDeviceList","DeviceReportStateControl","RegisterTooltip","UpdateTotalDevicesSelected","SuscribeDeviceEvents","beforeDestroy","UnsuscribeDeviceEvents","methods","getMap","console","debug","EventBus","payload","jQuery","document","ready","tooltip","Object","values","state","forEach","push","filter","fleetID","arrImei","ws","connected","message","notify","fleets","item","collapsed","allDeviceSelected","UpdateDeviceLocationStatus","interval","setInterval","maxGreenState","maxYellowState","timestampNow","Math","floor","Date","now","diffTime","report","timestamp","ClearDeviceSelection","find","HasFleetAllDevicesSelected","every","trim","auxFleet","assign","located","showDeviceInfo","closeDeviceInfo","onDevicesSelected","DeviceRouteComponent","properties","deviceID","buscador","loadDynamicComponent","divFleetID","divCollapseIconID","isCollapsed","$","hasClass","collapse","removeClass","addClass","component"],"mappings":"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","file":"js/chunk-2d22dcf7.1e70db9b.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"container-fluid\",staticStyle:{\"margin-top\":\"15px\",\"margin-bottom\":\"5px\"}},[_vm._m(0),_c('div',{staticClass:\"row\",staticStyle:{\"margin-top\":\"5px\"}},[_c('div',{staticClass:\"col-10\"},[_c('div',{staticClass:\"form-group\",staticStyle:{\"margin-bottom\":\"0.5rem\"}},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.deviceList.searchTerm),expression:\"deviceList.searchTerm\"}],staticClass:\"form-control classdisabled toupperCase\",staticStyle:{\"padding\":\"6px 12px\"},attrs:{\"type\":\"text\",\"placeholder\":\"Buscar por unidad o flotilla\"},domProps:{\"value\":(_vm.deviceList.searchTerm)},on:{\"input\":[function($event){if($event.target.composing){ return; }_vm.$set(_vm.deviceList, \"searchTerm\", $event.target.value)},function($event){return _vm.FilterDeviceList()}]}})])]),_c('div',{staticClass:\"col-2 col-fluid text-left\"},[_c('i',{staticClass:\"icon-md universalicon-target-fixed cursor-pointer\",attrs:{\"data-toggle\":\"tooltip\",\"data-placement\":\"bottom\",\"data-delay\":\"500\",\"title\":\"Localizar todas las unidades\"},on:{\"click\":function($event){return _vm.LocateAllDevices()}}},[_vm._v(\" \")])]),_c('transition',{attrs:{\"name\":\"fade\"}},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.helper.showResetDeviceListButton),expression:\"helper.showResetDeviceListButton\"}],staticClass:\"col-12\"},[_c('span',{staticClass:\"badge badge-pill badge-info cursor-pointer\",on:{\"click\":function($event){return _vm.ResetDeviceListFilter()}}},[_vm._v(\"\\n        Mostrar todas las unidades\\n      \")])])]),_vm._m(1)],1),_c('div',{staticClass:\"row\",staticStyle:{\"overflow-y\":\"auto\",\"max-height\":\"200px\"}},[_c('div',{staticClass:\"col-12\"},_vm._l((_vm.deviceList.filteredList),function(fleet){return _c('div',{key:fleet.id,staticClass:\"row\"},[_c('div',{staticClass:\"col-9 text-left custom-control custom-checkbox\",staticStyle:{\"margin-left\":\"10px\",\"word-break\":\"break-all\"}},[_c('input',{staticClass:\"custom-control-input cursor-pointer\",attrs:{\"id\":(\"fleetCheckbox-\" + (fleet.id)),\"type\":\"checkbox\"},domProps:{\"checked\":fleet.selected},on:{\"input\":function($event){return _vm.OnFleetSelectionChanged(fleet.id, $event.target.checked)}}}),_c('label',{staticClass:\"custom-control-label cursor-pointer\",attrs:{\"for\":(\"fleetCheckbox-\" + (fleet.id))}}),_c('span',{staticClass:\"cursor-pointer\",on:{\"click\":function($event){return _vm.ToggleCollapseFleet(fleet.id)}}},[_c('small',{staticStyle:{\"margin-left\":\"10px\"}},[_vm._v(_vm._s(fleet.name))]),_c('i',{staticClass:\"icon-small universalicon-arrow-collapse\",staticStyle:{\"position\":\"absolute\",\"bottom\":\"-2px\",\"margin-left\":\"6px\"},attrs:{\"id\":(\"fleet-\" + (fleet.id) + \"-collapse-icon\")}},[_vm._v(\" \")])])]),_c('div',{staticClass:\"col-2\"},[_c('i',{directives:[{name:\"show\",rawName:\"v-show\",value:(fleet.selected),expression:\"fleet.selected\"}],staticClass:\"icon icon-small universalicon-target-fixed cursor-pointer\",attrs:{\"data-toggle\":\"tooltip\",\"data-placement\":\"bottom\",\"data-delay\":\"500\",\"title\":\"Localizar unidades de la flotilla\"},on:{\"click\":function($event){return _vm.LocateFleet(fleet.id)}}})]),_c('div',{staticClass:\"col-12 collapse show\",attrs:{\"id\":(\"fleet-\" + (fleet.id))}},[(fleet.devices.length > 0)?_c('ul',{staticClass:\"list-group list-group-flush\"},_vm._l((fleet.devices),function(device){return _c('li',{key:device.imei,staticClass:\"list-group-item\"},[_c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"col-1 col-fluid\"},[_c('div',{staticClass:\"custom-control custom-checkbox\",staticStyle:{\"display\":\"inline-block\"}},[_c('input',{staticClass:\"custom-control-input cursor-pointer\",attrs:{\"id\":(\"deviceCheckbox-\" + (device.id)),\"type\":\"checkbox\",\"data-type\":\"device\"},domProps:{\"checked\":device.selected},on:{\"input\":function($event){return _vm.OnDeviceSelectionChanged(device.id, $event.target.checked, fleet.id)}}}),_c('label',{staticClass:\"custom-control-label cursor-pointer\",attrs:{\"for\":(\"deviceCheckbox-\" + (device.id))}})])]),_c('div',{staticClass:\"col-8 text-left col-fluid\"},[_c('div',{staticStyle:{\"display\":\"inline-block\",\"margin-left\":\"5px\",\"margin-right\":\"15px\"}},[_c('span',{staticClass:\"dot\",class:[ device.locationStatus == 1 ? 'bg-success' : '', device.locationStatus == 2 ? 'bg-warning' : '', device.locationStatus == 3 ? 'bg-danger' : '' ],staticStyle:{\"position\":\"absolute\",\"top\":\"6px\"}},[_vm._v(\" \")])]),_vm._v(\"\\n                  \"+_vm._s(device.alias)+\"\\n                \")]),_c('div',{staticClass:\"col-3 col-fluid text-right\"},[_c('i',{staticClass:\"icon icon-small universalicon-target-fixed cursor-pointer\",attrs:{\"data-toggle\":\"tooltip\",\"data-placement\":\"bottom\",\"data-delay\":\"500\",\"title\":\"Localizar unidad\"},on:{\"click\":function($event){return _vm.LocateDevices([device.imei])}}},[_vm._v(\" \")]),(_vm.deviceList.actionButtons.setEngine)?_c('i',{staticClass:\"icon icon-small universalicon-shutdown cursor-pointer\",attrs:{\"data-toggle\":\"tooltip\",\"data-placement\":\"bottom\",\"data-delay\":\"500\",\"title\":\"Realizar paro o encendido de motor\"},on:{\"click\":function($event){return _vm.SetEngine(device.id)}}},[_vm._v(\" \")]):_vm._e()])])])}),0):_c('div',{staticClass:\"float-center\"},[_c('small',[_vm._v(\"Sin Dispositivos\")])])])])}),0)]),_c('div',{staticClass:\"row\"},[_vm._m(2),_c('div',{staticClass:\"col-4\"},[_c('span',{staticClass:\"badge badge-pill\",class:[this.deviceList.totalSelected === 1 ? 'badge-info':'badge-secondary',\n      this.deviceList.totalSelected === 1 ? 'cursor-pointer':'cursor-not-allowed'],on:{\"click\":function($event){return _vm.ShowDeviceRoutePanel()}}},[_c('i',{staticClass:\"icon universalicon-polyline\"}),_vm._v(\" Recorrido\\n      \")])]),_c('div',{staticClass:\"col-8 text-right\"},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(this.deviceList.totalSelected > 0),expression:\"this.deviceList.totalSelected > 0\"}]},[_c('span',{staticClass:\"badge badge-pill badge-info\"},[_vm._v(_vm._s(this.deviceList.totalSelected))]),_vm._v(\" Seleccionados\\n      \")]),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(this.deviceList.totalSelected < 1),expression:\"this.deviceList.totalSelected < 1\"}]},[_c('span',{staticClass:\"badge badge-pill badge-success cursor-pointer\",attrs:{\"data-toggle\":\"tooltip\",\"data-placement\":\"top\",\"data-delay\":\"500\",\"title\":\"Unidades ubicadas\"},on:{\"click\":function($event){return _vm.FilterDeviceListByReportState(true)}}},[_vm._v(_vm._s(this.$store.getters['devices/TOTAL_LOCATE']))]),_c('span',{staticClass:\"badge badge-pill badge-danger cursor-pointer\",staticStyle:{\"margin-left\":\"15px\"},attrs:{\"data-toggle\":\"tooltip\",\"data-placement\":\"top\",\"data-delay\":\"500\",\"title\":\"Unidades sin ubicar\"},on:{\"click\":function($event){return _vm.FilterDeviceListByReportState(false)}}},[_vm._v(_vm._s(this.$store.getters['devices/TOTAL_DISLOCATE']))])])])])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"col-8 text-left\"},[_c('h5',[_vm._v(\"Dispositivos\")])]),_c('div',{staticClass:\"col-4 text-right\"},[_c('i',{staticClass:\"icon icon-small universalicon-help cursor test\",attrs:{\"data-toggle\":\"tooltip\",\"data-placement\":\"bottom\",\"data-delay\":\"{\\\"show\\\":500, \\\"hide\\\":1000}\",\"data-html\":\"true\",\"data-template\":\"<div class=\\\"tooltip fluid\\\" role=\\\"tooltip\\\"><div class=\\\"arrow\\\"></div><div class=\\\"tooltip-inner\\\"></div></div>\",\"title\":\"<div class=\\\"alert-info text-left\\\" style=\\\"padding:5px 10px;\\\">\\n          El semaforo indica el tiempo del ultimo reporte de la unidad:\\n          <br />\\n          <span class=\\\"badge badge-pill badge-success\\\">&nbsp;</span> Menos 12 horas\\n          <br />\\n          <span class=\\\"badge badge-pill badge-warning\\\">&nbsp;</span> Menos 24 horas\\n          <br />\\n          <span class=\\\"badge badge-pill badge-danger\\\">&nbsp;</span> Mas de 24 horas\\n        </div>\"}},[_vm._v(\" \")])])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"col-12\"},[_c('hr')])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"col-12\"},[_c('hr')])}]\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"container-fluid\" style=\"margin-top:15px; margin-bottom:5px;\">\r\n    <!--Header-->\r\n    <div class=\"row\">\r\n      <div class=\"col-8 text-left\">\r\n        <h5>Dispositivos</h5>\r\n      </div>\r\n      <div class=\"col-4 text-right\">\r\n        <i\r\n          class=\"icon icon-small universalicon-help cursor test\"\r\n          data-toggle=\"tooltip\"\r\n          data-placement=\"bottom\"\r\n          data-delay='{\"show\":500, \"hide\":1000}'\r\n          data-html=\"true\"\r\n          data-template='<div class=\"tooltip fluid\" role=\"tooltip\"><div class=\"arrow\"></div><div class=\"tooltip-inner\"></div></div>'\r\n          title='<div class=\"alert-info text-left\" style=\"padding:5px 10px;\">\r\n            El semaforo indica el tiempo del ultimo reporte de la unidad:\r\n            <br />\r\n            <span class=\"badge badge-pill badge-success\">&nbsp;</span> Menos 12 horas\r\n            <br />\r\n            <span class=\"badge badge-pill badge-warning\">&nbsp;</span> Menos 24 horas\r\n            <br />\r\n            <span class=\"badge badge-pill badge-danger\">&nbsp;</span> Mas de 24 horas\r\n          </div>'\r\n        >&nbsp;</i>\r\n      </div>\r\n    </div>\r\n\r\n    <!--Search Panel-->\r\n    <div class=\"row\" style=\"margin-top: 5px;\">\r\n      <div class=\"col-10\">\r\n        <div class=\"form-group\" style=\"margin-bottom:0.5rem\">\r\n          <input\r\n            type=\"text\"\r\n            class=\"form-control classdisabled toupperCase\"\r\n            style=\"padding:6px 12px\"\r\n            placeholder=\"Buscar por unidad o flotilla\"\r\n            @input=\"FilterDeviceList()\"\r\n            v-model=\"deviceList.searchTerm\"\r\n          />\r\n        </div>\r\n      </div>\r\n      <div class=\"col-2 col-fluid text-left\">\r\n        <i\r\n          class=\"icon-md universalicon-target-fixed cursor-pointer\"\r\n          @click=\"LocateAllDevices()\"\r\n          data-toggle=\"tooltip\"\r\n          data-placement=\"bottom\"\r\n          data-delay=\"500\"\r\n          title=\"Localizar todas las unidades\"\r\n        >&nbsp;</i>\r\n      </div>\r\n      <transition name=\"fade\">\r\n      <div class=\"col-12\" v-show=\"helper.showResetDeviceListButton\">\r\n         <span class=\"badge badge-pill badge-info cursor-pointer\"\r\n         @click=\"ResetDeviceListFilter()\">\r\n          Mostrar todas las unidades\r\n        </span>\r\n      </div>\r\n      </transition>\r\n      <div class=\"col-12\">\r\n        <hr />\r\n      </div>\r\n    </div>\r\n\r\n    <!--Device list-->\r\n    <div class=\"row\" style=\"overflow-y:auto; max-height:200px;\">\r\n      <div class=\"col-12\">\r\n        <div class=\"row\" v-for=\"fleet in deviceList.filteredList\" :key=\"fleet.id\">\r\n          <div\r\n            class=\"col-9 text-left custom-control custom-checkbox\"\r\n            style=\"margin-left:10px; word-break: break-all;\"\r\n          >\r\n            <input\r\n              :id=\"`fleetCheckbox-${fleet.id}`\"\r\n              type=\"checkbox\"\r\n              class=\"custom-control-input cursor-pointer\"\r\n              :checked=\"fleet.selected\"\r\n              @input=\"OnFleetSelectionChanged(fleet.id, $event.target.checked)\"\r\n            />\r\n            <label class=\"custom-control-label cursor-pointer\" :for=\"`fleetCheckbox-${fleet.id}`\"></label>\r\n            <span\r\n              class=\"cursor-pointer\"\r\n              @click=\"ToggleCollapseFleet(fleet.id)\"\r\n            >\r\n              <small style=\"margin-left:10px;\">{{fleet.name}}</small>\r\n              <i\r\n                :id=\"`fleet-${fleet.id}-collapse-icon`\"\r\n                class=\"icon-small universalicon-arrow-collapse\"\r\n                style=\"position: absolute; bottom: -2px; margin-left: 6px;\"\r\n              >&nbsp;</i>\r\n            </span>\r\n          </div>\r\n          <div class=\"col-2\">\r\n            <i\r\n              class=\"icon icon-small universalicon-target-fixed cursor-pointer\"\r\n              @click=\"LocateFleet(fleet.id)\"\r\n              data-toggle=\"tooltip\"\r\n              data-placement=\"bottom\"\r\n              data-delay=\"500\"\r\n              title=\"Localizar unidades de la flotilla\"\r\n              v-show=\"fleet.selected\"\r\n            ></i>\r\n          </div>\r\n\r\n          <div :id=\"`fleet-${fleet.id}`\" class=\"col-12 collapse show\">\r\n            <ul class=\"list-group list-group-flush\" v-if=\"fleet.devices.length > 0\">\r\n              <li class=\"list-group-item\" v-for=\"device in fleet.devices\" :key=\"device.imei\">\r\n                <div class=\"row\">\r\n                  <div class=\"col-1 col-fluid\">\r\n                    <div class=\"custom-control custom-checkbox\" style=\"display:inline-block\">\r\n                      <input\r\n                        :id=\"`deviceCheckbox-${device.id}`\"\r\n                        type=\"checkbox\"\r\n                        data-type=\"device\"\r\n                        class=\"custom-control-input cursor-pointer\"\r\n                        :checked=\"device.selected\"\r\n                        @input=\"OnDeviceSelectionChanged(device.id, $event.target.checked, fleet.id)\"\r\n                      />\r\n                      <label\r\n                        class=\"custom-control-label cursor-pointer\"\r\n                        :for=\"`deviceCheckbox-${device.id}`\"\r\n                      ></label>\r\n                    </div>\r\n                  </div>\r\n                  <div class=\"col-8 text-left col-fluid\">\r\n                    <div style=\"display:inline-block; margin-left:5px; margin-right:15px;\">\r\n                      <span\r\n                        class=\"dot\"\r\n                        style=\"position: absolute; top: 6px;\"\r\n                        :class=\"[ device.locationStatus == 1 ? 'bg-success' : '', device.locationStatus == 2 ? 'bg-warning' : '', device.locationStatus == 3 ? 'bg-danger' : '' ]\"\r\n                      >&nbsp;</span>\r\n                    </div>\r\n                    {{device.alias}}\r\n                  </div>\r\n\r\n                  <div class=\"col-3 col-fluid text-right\">\r\n                    <i\r\n                      class=\"icon icon-small universalicon-target-fixed cursor-pointer\"\r\n                      @click=\"LocateDevices([device.imei])\"\r\n                      data-toggle=\"tooltip\"\r\n                      data-placement=\"bottom\"\r\n                      data-delay=\"500\"\r\n                      title=\"Localizar unidad\"\r\n                    >&nbsp;</i>\r\n                    <i\r\n                      v-if=\"deviceList.actionButtons.setEngine\"\r\n                      class=\"icon icon-small universalicon-shutdown cursor-pointer\"\r\n                      @click=\"SetEngine(device.id)\"\r\n                      data-toggle=\"tooltip\"\r\n                      data-placement=\"bottom\"\r\n                      data-delay=\"500\"\r\n                      title=\"Realizar paro o encendido de motor\"\r\n                    >&nbsp;</i>\r\n\r\n                    <!--NOTE: If add more than 2 icons you'll need put into a context-menu -->\r\n                  </div>\r\n                </div>\r\n              </li>\r\n            </ul>\r\n            <div class=\"float-center\" v-else>\r\n              <small>Sin Dispositivos</small>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!--footer-->\r\n    <div class=\"row\">\r\n      <div class=\"col-12\">\r\n        <hr />\r\n      </div>\r\n      <div class=\"col-4\">\r\n        <span\r\n          class=\"badge badge-pill\"\r\n          :class=\"[this.deviceList.totalSelected === 1 ? 'badge-info':'badge-secondary',\r\n        this.deviceList.totalSelected === 1 ? 'cursor-pointer':'cursor-not-allowed']\"\r\n          @click=\"ShowDeviceRoutePanel()\"\r\n        >\r\n          <i class=\"icon universalicon-polyline\"></i> Recorrido\r\n        </span>\r\n      </div>\r\n      <div class=\"col-8 text-right\">\r\n        <div v-show=\"this.deviceList.totalSelected > 0\">\r\n          <span class=\"badge badge-pill badge-info\">{{this.deviceList.totalSelected}}</span> Seleccionados\r\n        </div>\r\n        <div v-show=\"this.deviceList.totalSelected < 1\">\r\n          <span\r\n            class=\"badge badge-pill badge-success cursor-pointer\"\r\n            @click=\"FilterDeviceListByReportState(true)\"\r\n            data-toggle=\"tooltip\"\r\n            data-placement=\"top\"\r\n            data-delay=\"500\"\r\n            title=\"Unidades ubicadas\"\r\n          >{{this.$store.getters['devices/TOTAL_LOCATE']}}</span>\r\n\r\n          <span\r\n            class=\"badge badge-pill badge-danger cursor-pointer\"\r\n            @click=\"FilterDeviceListByReportState(false)\"\r\n            style=\"margin-left:15px;\"\r\n            data-toggle=\"tooltip\"\r\n            data-placement=\"top\"\r\n            data-delay=\"500\"\r\n            title=\"Unidades sin ubicar\"\r\n          >{{this.$store.getters['devices/TOTAL_DISLOCATE']}}</span>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport EventBus from '@/EventBus'\r\nexport default {\r\n  name: 'DevicePanel',\r\n  data () {\r\n    return {\r\n      map: null,\r\n      helper: {\r\n        showResetDeviceListButton: false\r\n      },\r\n      deviceList: {\r\n        searchTerm: null,\r\n        list: [],\r\n        filteredList: [],\r\n        totalSelected: 0,\r\n        filterByReportStatus: null,\r\n        actionButtons: {\r\n          setEngine: this.$store.getters.permission(4)\r\n        }\r\n      }\r\n    }\r\n  },\r\n  inject: [\r\n    'getMap',\r\n    'showDeviceInfo',\r\n    'closeDeviceInfo',\r\n    'loadDynamicComponent',\r\n    'onDevicesSelected'\r\n  ],\r\n  mounted () {\r\n    /** TODO:\r\n     * Hacer boton de paro motor condicional (mostrar para algunos users)\r\n     * Centrar mapa en seleccion\r\n     *  */\r\n    this.InitializeDeviceList()\r\n    this.DeviceReportStateControl()\r\n    this.RegisterTooltip()\r\n    this.UpdateTotalDevicesSelected()\r\n    this.SuscribeDeviceEvents()\r\n  },\r\n  beforeDestroy () {\r\n    this.UnsuscribeDeviceEvents()\r\n  },\r\n  methods: {\r\n    SuscribeDeviceEvents () {\r\n      this.map = this.getMap()\r\n      console.debug('SuscribeToMapEvents', this.map)\r\n\r\n      EventBus.$on('MapModule_OpenInfowindowsDevices', (id) => {\r\n        this.ClearDeviceSelection()\r\n        var device = this.deviceList.list\r\n          .flatMap((fleet) => fleet.devices)\r\n          .find((device) => device.imei === id)\r\n        this.OnDeviceSelectionChanged(device.id, true, device.fleetID)\r\n      })\r\n\r\n      EventBus.$on('MapModule_CloseInfowindowsDevices', (id) => {\r\n        var device = this.deviceList.list\r\n          .flatMap((fleet) => fleet.devices)\r\n          .find((device) => device.imei === id)\r\n        this.OnDeviceSelectionChanged(device.id, false, device.fleetID)\r\n      })\r\n\r\n      EventBus.$on('Ws_LOCATE_SELECT', (payload) => {\r\n        console.debug('DeviceListPanel', 'WSLocateSelect', payload)\r\n      })\r\n      EventBus.$on('deviceList_locationsStatusDevices', (id) => {\r\n        console.debug('DeviceListPanel', 'DeviceListLocationStatusDevices', id)\r\n      })\r\n      EventBus.$on('openInfowindowsDevicesROUTER', (id) => {\r\n        console.debug('DeviceListPanel', 'openInfoWindowsDevicesROUTER', id)\r\n      })\r\n\r\n      EventBus.$on('EventGetbuscador', (data) => {\r\n        console.debug('DeviceListPanel', 'EventGetBuscador', data)\r\n        this.deviceList.searchTerm = data\r\n        this.FilterDeviceList()\r\n      })\r\n    },\r\n    UnsuscribeDeviceEvents () {\r\n      EventBus.$off('MapModule_CloseInfowindowsDevices')\r\n      EventBus.$off('MapModule_OpenInfowindowsDevices')\r\n      EventBus.$off('Ws_LOCATE_SELECT')\r\n      EventBus.$off('deviceList_locationsStatusDevices')\r\n      EventBus.$off('openInfowindowsDevicesROUTER')\r\n    },\r\n    RegisterTooltip () {\r\n      jQuery(document).ready(function () {\r\n        jQuery('[data-toggle=\"tooltip\"]').tooltip()\r\n      })\r\n    },\r\n    LocateAllDevices () {\r\n      var imei = []\r\n      Object.values(this.$store.state.devices.devices).forEach((device) => {\r\n        imei.push(device.imei)\r\n      })\r\n\r\n      this.LocateDevices(imei)\r\n    },\r\n    LocateFleet (fleetID) {\r\n      var imei = []\r\n      Object.values(this.$store.state.devices.devices).filter((device) => {\r\n        if (device.fleetID === fleetID) {\r\n          imei.push(device.imei)\r\n        }\r\n      })\r\n\r\n      this.LocateDevices(imei)\r\n    },\r\n    LocateDevices (arrImei) {\r\n      console.debug('LocateDevices', arrImei)\r\n      if (this.$store.state.ws.connected) {\r\n        arrImei.forEach((imei) => {\r\n          var payload = {\r\n            imei: imei\r\n          }\r\n          this.$store.dispatch('ws/LOCATE', payload)\r\n        })\r\n\r\n        var message = `<b>Localizar unidades</b><br>\r\n        El comando se ha enviado a las unidades`\r\n\r\n        if (arrImei.length === 1) {\r\n          message = `<b>Localizar unidad</b><br>\r\n        El comando se ha enviado a la unidad`\r\n        }\r\n\r\n        notify(\r\n          '',\r\n          message,\r\n          'top',\r\n          'right',\r\n          'dark',\r\n          340,\r\n          this.$store.state.menu.topMenu\r\n        )\r\n      } else {\r\n        notify(\r\n          '<b>Servidor fuera de linea</b><br>',\r\n          'No podemos realizar la peticion en este momento, porfavor intente mas tarde',\r\n          'top',\r\n          'right',\r\n          'danger',\r\n          340,\r\n          this.$store.state.menu.topMenu\r\n        )\r\n      }\r\n    },\r\n    async SetEngine (deviceID) {\r\n      this.$store.commit('CLEAR_MODAL_DINAMIC')\r\n      var device = this.deviceList.list\r\n        .flatMap((fleet) => fleet.devices)\r\n        .find((device) => device.id === deviceID)\r\n\r\n      var datos = {\r\n        component: () => import('@/views/Modals/modalParoMotor'),\r\n        datos: {\r\n          deviceImei: device.imei,\r\n          stateParoMotor: false,\r\n          topMenu: 0,\r\n          leftMenu: 0\r\n        }\r\n      }\r\n\r\n      await this.$store.commit('ADD_COMPONENT_DINAMIC', datos)\r\n      await this.$store.commit('ADD_COMPONENT_DINAMIC_STATE', true)\r\n    },\r\n    InitializeDeviceList () {\r\n      this.$store.state.devices.fleets.forEach((item) => {\r\n        var devices = Object.values(this.$store.state.devices.devices).filter(\r\n          (device) => device.fleetID === item.id\r\n        )\r\n\r\n        var fleet = {\r\n          id: item.id,\r\n          name: item.name,\r\n          devices: devices,\r\n          collapsed: false,\r\n          selected: false\r\n        }\r\n\r\n        console.debug('Fleet', fleet.name, fleet.devices)\r\n        this.deviceList.filteredList.push(fleet)\r\n        this.deviceList.list.push(fleet)\r\n\r\n        var allDeviceSelected = this.HasFleetAllDevicesSelected(fleet.id)\r\n        fleet.selected = allDeviceSelected\r\n      })\r\n    },\r\n    DeviceReportStateControl () {\r\n      this.UpdateDeviceLocationStatus() // Update FirstTime\r\n\r\n      var interval = 60000 // Each Minute\r\n      setInterval(this.UpdateDeviceLocationStatus, interval)\r\n    },\r\n    UpdateDeviceLocationStatus () {\r\n      Object.values(this.$store.state.devices.devices).forEach((device) => {\r\n        var maxGreenState = 43200 // up 12 Hrs\r\n        var maxYellowState = 86400 // up 24 Hrs\r\n        var timestampNow = Math.floor(Date.now() / 1000)\r\n\r\n        var diffTime = timestampNow - device.report.timestamp\r\n        if (diffTime <= maxGreenState) {\r\n          device.locationStatus = 1\r\n        } else if (diffTime <= maxYellowState) {\r\n          device.locationStatus = 2\r\n        } else {\r\n          device.locationStatus = 3\r\n        }\r\n      })\r\n    },\r\n    ClearDeviceSelection () {\r\n      this.deviceList.list.forEach((fleet) => {\r\n        fleet.selected = false\r\n        fleet.devices.forEach((device) => {\r\n          device.selected = false\r\n        })\r\n      })\r\n    },\r\n    OnFleetSelectionChanged (fleetID, state) {\r\n      var fleet = this.deviceList.filteredList.find((fleet) => {\r\n        return fleet.id === fleetID\r\n      })\r\n      fleet.selected = state\r\n      console.debug('FleetSelectionChanged', fleet, fleetID, state)\r\n\r\n      fleet.devices.forEach((device) => {\r\n        device.selected = state\r\n        // TODO: Agregar un pequeño sleep para permitir la reactividad\r\n        console.debug('Seleccionando', device.id, state)\r\n      })\r\n      this.UpdateTotalDevicesSelected()\r\n\r\n      if (fleet.selected) {\r\n        // TODO: centrar mapa a dispositivos and close allInfoWindows\r\n      }\r\n    },\r\n    OnDeviceSelectionChanged (deviceID, state, fleetID = null) {\r\n      var device\r\n      var fleet\r\n\r\n      if (fleetID != null) {\r\n        fleet = this.deviceList.list.find((fleet) => fleet.id === fleetID)\r\n        device = fleet.devices.find((device) => device.id === deviceID)\r\n      } else {\r\n        device = this.deviceList.list\r\n          .flatMap((fleet) => fleet.devices)\r\n          .find((device) => device.id === deviceID)\r\n        fleet = this.deviceList.list.find(\r\n          (fleet) => fleet.id === device.fleetID\r\n        )\r\n      }\r\n\r\n      device.selected = state\r\n\r\n      var allDeviceSelected = this.HasFleetAllDevicesSelected(device.fleetID)\r\n      fleet.selected = allDeviceSelected\r\n\r\n      this.UpdateTotalDevicesSelected()\r\n    },\r\n    HasFleetAllDevicesSelected (fleetID) {\r\n      var fleet = this.deviceList.list.find((fleet) => fleet.id === fleetID)\r\n\r\n      if (fleet.devices.length > 0) {\r\n        return fleet.devices.every(\r\n          (device) => device.selected === true\r\n        )\r\n      } else {\r\n        return false\r\n      }\r\n    },\r\n    ResetDeviceListFilter () {\r\n      this.deviceList.searchTerm = ''\r\n      this.deviceList.filteredList = this.deviceList.list\r\n      this.helper.showResetDeviceListButton = false\r\n    },\r\n    FilterDeviceList () {\r\n      if (this.deviceList.searchTerm.trim() === '') {\r\n        this.ResetDeviceListFilter()\r\n      } else {\r\n        var list = []\r\n        this.deviceList.list.forEach((fleet) => {\r\n          if (\r\n            fleet.name\r\n              .toLowerCase()\r\n              .includes(this.deviceList.searchTerm.toLowerCase())\r\n          ) {\r\n            list.push(fleet)\r\n          } else {\r\n            var auxFleet = Object.assign({}, fleet)\r\n            auxFleet.devices = fleet.devices.filter((device) =>\r\n              device.alias\r\n                .toLowerCase()\r\n                .includes(this.deviceList.searchTerm.toLowerCase())\r\n            )\r\n\r\n            if (auxFleet.devices.length > 0) {\r\n              list.push(auxFleet)\r\n            }\r\n          }\r\n        })\r\n\r\n        this.helper.showResetDeviceListButton = true\r\n        this.deviceList.filteredList = list\r\n        this.RegisterTooltip()\r\n      }\r\n    },\r\n    FilterDeviceListByReportState (located) {\r\n      this.ResetDeviceListFilter()\r\n\r\n      var list = []\r\n      this.deviceList.list.forEach((fleet) => {\r\n        var auxFleet = Object.assign({}, fleet)\r\n        auxFleet.devices = fleet.devices.filter((device) => {\r\n          if (located) {\r\n            return (\r\n              this.$store.state.devices.devices[device.imei].locationStatus < 3\r\n            )\r\n          } else {\r\n            return (\r\n              this.$store.state.devices.devices[device.imei].locationStatus ===\r\n              3\r\n            )\r\n          }\r\n        })\r\n\r\n        if (auxFleet.devices.length > 0) {\r\n          list.push(auxFleet)\r\n        }\r\n      })\r\n\r\n      this.helper.showResetDeviceListButton = true\r\n      this.deviceList.filteredList = list\r\n      this.RegisterTooltip()\r\n    },\r\n    UpdateTotalDevicesSelected () {\r\n      var devices = []\r\n      this.deviceList.totalSelected = 0\r\n      this.deviceList.list.forEach((fleet) => {\r\n        fleet.devices.forEach((device) => {\r\n          if (device.selected) {\r\n            this.deviceList.totalSelected++\r\n            devices.push({ deviceImei: device.imei })\r\n          }\r\n        })\r\n      })\r\n\r\n      if (this.deviceList.totalSelected === 1) {\r\n        var device = this.deviceList.list\r\n          .flatMap((fleet) => fleet.devices)\r\n          .find((device) => device.selected === true)\r\n        this.showDeviceInfo(device.imei)\r\n      } else if (this.deviceList.totalSelected > 1) {\r\n        this.closeDeviceInfo()\r\n        this.onDevicesSelected(devices)\r\n      } else {\r\n        this.closeDeviceInfo()\r\n        this.onDevicesSelected([])\r\n      }\r\n    },\r\n    ShowDeviceRoutePanel () {\r\n      if (this.deviceList.totalSelected === 1) {\r\n        var device = this.deviceList.list\r\n          .flatMap((fleet) => fleet.devices)\r\n          .find((device) => device.selected === true)\r\n\r\n        console.debug('ShowDeviceRoute of', device)\r\n        var DeviceRouteComponent = () =>\r\n          import('@/views/MapModule/MapFloatMenu/panelDevices/deviceRoute')\r\n        var properties = {\r\n          deviceID: device.imei,\r\n          buscador: this.deviceList.searchTerm\r\n        }\r\n\r\n        this.loadDynamicComponent(\r\n          'deviceRoute',\r\n          DeviceRouteComponent,\r\n          properties\r\n        )\r\n      }\r\n    },\r\n    ToggleCollapseFleet (fleetID) {\r\n      var divFleetID = '#fleet-' + fleetID\r\n      var divCollapseIconID = '#fleet-' + fleetID + '-collapse-icon'\r\n      var isCollapsed = $(divFleetID).hasClass('show')\r\n\r\n      if (isCollapsed) {\r\n        $(divFleetID).collapse('hide')\r\n        $(divCollapseIconID).removeClass('universalicon-arrow-collapse')\r\n        $(divCollapseIconID).addClass('universalicon-arrow-expand')\r\n      } else {\r\n        $(divFleetID).collapse('show')\r\n        $(divCollapseIconID).addClass('universalicon-arrow-collapse')\r\n        $(divCollapseIconID).removeClass('universalicon-arrow-expand')\r\n      }\r\n    }\r\n  } // End of Methods\r\n}\r\n</script>\r\n\r\n<style>\r\n</style>\r\n","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./listDevices.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./listDevices.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./listDevices.vue?vue&type=template&id=c3f9674a&\"\nimport script from \"./listDevices.vue?vue&type=script&lang=js&\"\nexport * from \"./listDevices.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}