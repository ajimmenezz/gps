(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c8096576"],{"3c0e":function(t,e,r){"use strict";r.r(e);var s=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"row"},[t._m(0),r("div",{staticClass:" col-12 float-left"},[r("data-table",{ref:"table",attrs:{showEditButton:t.onEditVisible,showWatchButton:t.onWatchVisible,showDeleteButton:t.ondeleteVisible,showActiveButton:!1,showIndex:!0},on:{OnWatch:t.OnWatch,OnEdit:t.OnEdit,OnDelete:t.OnDelete}})],1)])},n=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"col-12"},[r("h5",{staticClass:"float-left",staticStyle:{"font-size":"20px","padding-bottom":"10px"}},[r("b",[t._v("Productos genéricos")])])])}],i=(r("ac6a"),r("96cf"),r("3b8d")),o=r("08e6"),a=r("e2a2"),c=r("ed73"),u=r("d3e3"),d=r("a9b0"),l={name:"tablaProductos",mixins:[o["a"]],data:function(){return{listProduct:null,onWatchVisible:!1,onEditVisible:!1,ondeleteVisible:!1}},components:{cModalDelete:c["a"],dataTable:d["a"]},created:function(){this.$store.state.StoreCliente=this.$store.state.modal.datosDymanic.idCliente,0==this.getClientID&&(this.ondeleteVisible=!0,this.onEditVisible=!0),0!=this.getClientID&&(this.onWatchVisible=!0),this.getProduct()},mounted:function(){this.$store.state.seccionMenu="adminGps",$("#containerPrincipal").css({"margin-left":this.$store.state.widthMenu}),$("#containerPrincipal").css({"margin-top":this.$store.state.topMenu}),this.suscribeToDeviceEvents()},beforeDestroy:function(){this.unsuscribreToDeviceEvents()},methods:{getListProduct:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(0!=this.$store.state.StoreCliente){t.next=7;break}return t.next=3,this.getRequest("products/generic");case 3:e=t.sent,!0===e.success&&(this.listProduct=e.data.products),t.next=12;break;case 7:return r={clientID:this.$store.state.StoreCliente},t.next=10,this.getRequest("products/generic",r);case 10:e=t.sent,!0===e.success&&(this.listProduct=e.data.products);case 12:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),getProduct:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(0!=this.$store.state.StoreCliente){t.next=7;break}return t.next=3,this.getRequest("products/generic");case 3:e=t.sent,!0===e.success&&(this.listProduct=e.data.products),t.next=12;break;case 7:return r={clientID:this.$store.state.StoreCliente},t.next=10,this.getRequest("products/generic",r);case 10:e=t.sent,!0===e.success&&(this.listProduct=e.data.products);case 12:return t.next=14,this.changeHeaderTable();case 14:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),changeHeaderTable:function(){this.headers=[{title:"Serial",key:"serial",default:""},{title:"Marca",key:"factoryName",default:"-",priority:1},{title:"Modelo",key:"modelName",default:"-"},{title:"Fecha de creación",key:"creationTimestamp",default:"-",priority:5}],this.listProduct.forEach((function(t){t.creationTimestamp&&(t.creationTimestamp=moment(1e3*t.creationTimestamp).format("DD-MM-YYYY"))})),console.debug(this.listProduct,"DATOS_list"),this.rows=this.listProduct,console.debug("DATOS_ROWS",this.rows),this.$refs.table.Render(this.headers,this.rows),this.Refresh()},Refresh:function(){console.debug("data_REFRESH"),this.$refs.table.Refresh()},OnWatch:function(t,e){console.debug("WATCH: ".concat(t.id," ").concat(t.serial)),this.modalFormProductEdit(t,e)},OnEdit:function(t,e){console.debug("onEdit: ".concat(t.id," ").concat(t.serial)),this.modalFormProductEdit(t,e)},OnDelete:function(t,e){console.debug("DELETE: ".concat(t.id," ").concat(t.serial," ")),console.debug("DELETE row",e,t),this.eliminar(t,e)},modalFormProductEdit:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e,r){var s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.$store.state.loader=!0,this.$store.commit("CLEAR_MODAL_DINAMIC"),s={component:a["a"],datos:{seccion:"product",accion:"editar",id:e.id,item:e,sender:r}},t.next=5,this.$store.commit("ADD_COMPONENT_DINAMIC",s);case 5:return t.next=7,this.$store.commit("ADD_COMPONENT_DINAMIC_STATE",!0);case 7:case"end":return t.stop()}}),t,this)})));function e(e,r){return t.apply(this,arguments)}return e}(),editarProducto:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e){var r,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.debug("DATOS EDIT",e.datos),t.next=3,this.putRequest("products/generic/"+e.item.id,e.datos);case 3:if(r=t.sent,!0!==r.success){t.next=12;break}this.$store.state.loader=!1,this.getListProduct(),this.$refs.table.RemoveRow(e.sender),this.$refs.table.AddRow(e.item),notify("Excelente!","Se ha editado el producto ","top","right","success",10,50),t.next=24;break;case 12:this.$store.state.loader=!1,s="",t.t0=r.error.title,t.next="SERIAL_EXISTS"===t.t0?17:"UNAUTHORIZED"===t.t0?19:21;break;case 17:return s="El serial ya existe",t.abrupt("break",23);case 19:return s="No cuenta con los permisos para realizar la accion",t.abrupt("break",23);case 21:return s="No se ha actualizado el producto",t.abrupt("break",23);case 23:notify("Error!",s,"top","right","danger",10,50);case 24:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),eliminar:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e,r){var s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.$store.commit("CLEAR_MODAL_DINAMIC"),s={component:c["a"],datos:{ID:e.id,name:e.serial,tipo:"product",item:e,sender:r}},t.next=4,this.$store.commit("ADD_COMPONENT_DINAMIC",s);case 4:return t.next=6,this.$store.commit("ADD_COMPONENT_DINAMIC_STATE",!0);case 6:case"end":return t.stop()}}),t,this)})));function e(e,r){return t.apply(this,arguments)}return e}(),eliminarProducto:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.id,t.next=3,this.deleteRequest("products/generic/"+e.id);case 3:r=t.sent,!0===r.success?(this.$store.state.loader=!1,this.$refs.table.RemoveRow(e.sender),this.getListProduct(),notify("Excelente!","Se ha eliminado el producto ","top","right","success",10,50)):(this.$store.state.loader=!1,notify("Error!","No se ha eliminado el producto ","top","right","danger",10,50));case 5:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),suscribeToDeviceEvents:function(){var t=this;u["a"].$on("editar_products",(function(e){console.debug("DATOS_EDITPRODUCT",e),t.editarProducto(e)})),u["a"].$on("eliminar_products",(function(e){console.debug("DATOS_ELIMINARPRODUCT",e),t.eliminarProducto(e)}))},unsuscribreToDeviceEvents:function(){u["a"].$off("editar_products"),u["a"].$off("eliminar_products")}},computed:{getClientID:function(){return this.$store.state.StoreCliente}}},h=l,p=(r("f6c6"),r("2877")),f=Object(p["a"])(h,s,n,!1,null,null,null);e["default"]=f.exports},aaae:function(t,e,r){},f6c6:function(t,e,r){"use strict";var s=r("aaae"),n=r.n(s);n.a}}]);
//# sourceMappingURL=chunk-c8096576.0899b359.js.map