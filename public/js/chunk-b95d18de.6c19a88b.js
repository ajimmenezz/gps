(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b95d18de"],{"5e66":function(e,t,s){},"5e8c":function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"card-body float-left row"},[s("div",{staticClass:"col-12"},[s("config-input",{attrs:{id:"email",label:"Correo electrónico *",typeinput:"email",placeholder:"Correo electrónico",required:"true",valor:e.email,toLowerUperCase:"lowercase"},model:{value:e.email,callback:function(t){e.email="string"===typeof t?t.trim():t},expression:"email"}})],1),s("div",{staticClass:"col-12"},[s("config-input",{attrs:{id:"telefono",label:"Teléfono",typeinput:"number",placeholder:"Teléfono",required:"true",valor:e.telefono},model:{value:e.telefono,callback:function(t){e.telefono="string"===typeof t?t.trim():t},expression:"telefono"}})],1),s("div",{staticClass:"col-12"},[s("config-input",{attrs:{id:"direc",label:"Dirección",typeinput:"text",placeholder:"Dirección",required:"true",valor:e.direc},model:{value:e.direc,callback:function(t){e.direc="string"===typeof t?t.trim():t},expression:"direc"}})],1),s("div",{staticClass:"col-12"},[s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"zonaH"}},[e._v("Zona horaria *")]),s("select",{directives:[{name:"model",rawName:"v-model",value:e.zonaH,expression:"zonaH"}],staticClass:"form-control",attrs:{id:"zonaH",valor:e.zonaH},on:{change:function(t){var s=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.zonaH=t.target.multiple?s:s[0]}}},[s("option",{attrs:{value:"0"}},[e._v("Selecciona")]),e._l(e.listZonasHor,(function(t){return s("option",{key:t.id,domProps:{value:t.id}},[e._v(e._s(t.name))])}))],2)])]),s("div",{staticClass:"col-12",staticStyle:{"margin-top":"40px","margin-bottom":"15px"},attrs:{id:"alertUser"}}),s("div",{staticClass:"col-12  float-right"},[e.Getdisabled?e._e():s("button",{staticClass:"btn btn-primary",attrs:{id:"editSubmit",type:"submit"},on:{click:function(t){return e.editarCampos(!0)}}},[e._v("Editar")]),e.Getdisabled?s("button",{staticClass:"btn btn-outline-primary ",attrs:{type:"button"},on:{click:function(t){return e.editarCampos(!1)}}},[e._v("Cancelar")]):e._e(),e.Getdisabled?s("button",{staticClass:"btn btn-primary ",attrs:{id:"registerSubmit",type:"submit"},on:{click:function(t){return e.editar()}}},[e._v("Guardar")]):e._e()])])},i=[],r=(s("8615"),s("ac6a"),s("7f7f"),s("96cf"),s("3b8d")),n=s("08e6"),o=s("d3e3"),l={name:"FormularioUsersDimicilioEdit",mixins:[n["a"]],data:function(){return{userName:"",user:"",password:"",email:"",telefono:0,direc:"",tipoUser:0,apaterno:"",amaterno:"",dispositivosUser:[],dispositivos_list:[],accion:"",userID:"",userData:[],permisos:[],listZonaHoraria:[],zonaH:14,getDevicesUser:[],showDevice:!1,deviceesUs:[],listPermissions:[],notas:null,dynamicComponent:{component:null,properties:null,events:{}},visible:!1,setDisabled:!0}},created:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.accion=this.$route.params.accion,this.userID=this.$route.params.id,this.zonaHoraria();case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),mounted:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.$store.state.submenuActive="config",this.$store.state.itemSubmenuActive="itemUser",e.next=4,o["a"].$emit("NAVBAR_MenuOpciones","config","itemUser");case 4:return e.next=6,this.getUser(this.userID);case 6:$("#containerPrincipal").css({"margin-left":this.$store.state.widthMenu}),$("#containerPrincipal").css({"margin-top":this.$store.state.topMenu}),$(".sw-btn-next").click((function(){window.scrollTo(0,0)})),$(".sw-btn-prev").click((function(){window.scrollTo(0,0)})),this.editarCampos(!1),this.$store.state.loader=!1;case 12:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),methods:{editarCampos:function(e){console.debug("editarCampos",e),this.setDisabled=e,1==e&&($("#email").removeAttr("disabled"),$("#telefono").removeAttr("disabled"),$("#direc").removeAttr("disabled"),$("#zonaH").removeAttr("disabled"),$("#editSubmit").html("Guardar")),0==e&&($("#email").attr("disabled","disabled"),$("#telefono").attr("disabled","disabled"),$("#direc").attr("disabled","disabled"),$("#zonaH").attr("disabled","disabled"),$("#editSubmit").html("Editar"))},editar:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t,s,a,i,r,n,o=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(""==this.email){e.next=8;break}if(t=this.validar_email(this.email),t){e.next=6;break}return $("#alertUser").html("<div class='alert alert-danger alert-dismissible fade show' role='alert' style='text-align: initial;'><strong>Error! </strong>El correo electrónico no es valido<button type='button' class='close' data-dismiss='alert' aria-label='Close' style='padding-top: 0px;'><span aria-hidden='true'>&times;</span></button></div>"),setTimeout((function(){$("#alertUser").html("")}),3e3),e.abrupt("return",!1);case 6:e.next=11;break;case 8:return $("#alertUser").html("<div class='alert alert-danger alert-dismissible fade show' role='alert' style='text-align: initial;'><strong>Error! </strong>Ingresa correo electrónico<button type='button' class='close' data-dismiss='alert' aria-label='Close' style='padding-top: 0px;'><span aria-hidden='true'>&times;</span></button></div>"),setTimeout((function(){$("#alertUser").html("")}),3e3),e.abrupt("return",!1);case 11:if(0!=this.zonaH){e.next=15;break}return $("#alertUser").html("<div class='alert alert-danger alert-dismissible fade show' role='alert' style='text-align: initial;'><strong>Error! </strong>Selecciona zona horaria<button type='button' class='close' data-dismiss='alert' aria-label='Close' style='padding-top: 0px;'><span aria-hidden='true'>&times;</span></button></div>"),setTimeout((function(){$("#alertUser").html("")}),3e3),e.abrupt("return",!1);case 15:return s=2,a={userType:s,timezone:this.zonaH,phone:this.telefono,address:this.direc},i={},i["user"]=a,t=!1,this.email!==this.userData.email?i.user.email=this.email.toLowerCase(this.email):t=!0,e.next=23,this.putRequest("users/"+this.userID,i);case 23:if(r=e.sent,!0!==r.success){e.next=29;break}$("#alertUser").html("<div class='alert alert-success alert-dismissible fade show' role='alert' style='text-align: initial;'><strong>Excelente! </strong>Se ha actualizado el usuario<button type='button' class='close' data-dismiss='alert' aria-label='Close' style='padding-top: 0px;'><span aria-hidden='true'>&times;</span></button></div>"),setTimeout((function(){$("#alertUser").html(""),o.getUser(o.userID)}),3e3),e.next=42;break;case 29:n="",e.t0=r.error.title,e.next="USER_EXISTS"===e.t0?33:"EMAIL_EXISTS"===e.t0?35:"UNAUTHORIZED"===e.t0?37:39;break;case 33:return n="El usuario ya existe",e.abrupt("break",41);case 35:return n="El correo electrónico ya existe",e.abrupt("break",41);case 37:return n="No cuenta con los permisos para realizar la accion",e.abrupt("break",41);case 39:return n="No se ha actualizado el usuario",e.abrupt("break",41);case 41:$("#alertUser").html("<div class='alert alert-danger alert-dismissible fade show' role='alert' style='text-align: initial;'><strong>Error! </strong>".concat(n,"<button type='button' class='close' data-dismiss='alert' aria-label='Close' style='padding-top: 0px;'><span aria-hidden='true'>&times;</span></button></div>"));case 42:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),validar_email:function(e){var t=/^[-\w.%+]{1,64}@(?:[A-Z0-9-]{1,63}\.){1,125}[A-Z]{2,63}$/i;return!!t.test(e)},getUser:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){var s,a,i,r=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getRequest("users/"+t);case 2:s=e.sent,!0===s.success&&(this.userData=s.data.user,this.userName=this.userData.name,this.user=this.userData.username,this.email=this.userData.email,this.telefono=this.userData.phone,this.direc=this.userData.address,this.tipoUser=this.userData.userType,this.apaterno=this.userData.paternalSurname,this.amaterno=this.userData.maternalSurname,this.zonaH=this.userData.timezoneID,this.notas=this.userData.notes,this.permisos=this.userData.permissions,a=[],this.permisos.forEach((function(e){var t=e.id;a.push(t)})),this.permisos=Object.values(a),$("#permisos").val(this.permisos),this.getDevicesUser=[],this.dispositivosUser=[],i=s.data.devices,this.deviceesUs=s.data.devices,i.forEach((function(e){var t;r.dispositivos_list.filter((function(s,a){if(s.id==e.id)return t=a,!0})),r.dispositivos_list.splice(t,1)})),i.forEach((function(e){r.dispositivos_list.push({id:parseInt(e.id),alias:e.alias,selectOptions:!0}),r.dispositivosUser.push(parseInt(e.id))}))),this.showDevice=!0;case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),zonaHoraria:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getRequest("catalogs/timezones");case 2:t=e.sent,!0===t.success&&(this.listZonaHoraria=t.data.timezones);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),cancel:function(){this.$router.push("/listaUsers")}},computed:{Getdisabled:function(){return this.setDisabled},listZonasHor:function(){return this.listZonaHoraria},getTypeUser:function(){return this.$store.state.userType,this.$store.state.clientType,this.dispositivos_list}}},c=l,u=(s("c2ec"),s("2877")),d=Object(u["a"])(c,a,i,!1,null,null,null);t["default"]=d.exports},c2ec:function(e,t,s){"use strict";var a=s("5e66"),i=s.n(a);i.a}}]);
//# sourceMappingURL=chunk-b95d18de.6c19a88b.js.map