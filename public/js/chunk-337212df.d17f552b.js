(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-337212df"],{"0b18":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row m-r-5"},[a("div",{staticClass:"col-12",staticStyle:{"margin-top":"20px"}},[a("h5",{staticClass:"float-left",staticStyle:{"padding-bottom":"10px"}},[a("b",[t._v("Editar / "+t._s(this.title))])])]),t._m(0),a("div",{staticClass:"col-12",staticStyle:{"margin-top":"15px"}},[a("ul",{staticClass:"nav nav-tabs",attrs:{id:"myTab",role:"tablist"}},[a("li",{staticClass:"nav-item cursor",on:{click:function(e){return t.showOptionTab(1)}}},[a("a",{staticClass:"nav-link active text-uppercase",attrs:{id:"legales-tab","data-toggle":"tab",role:"tab","aria-controls":"legales","aria-selected":"true"}},[t._v("Datos legales")])]),a("li",{staticClass:"nav-item cursor",on:{click:function(e){return t.showOptionTab(2)}}},[a("a",{staticClass:"nav-link text-uppercase",attrs:{id:"contactos-tab","data-toggle":"tab",role:"tab","aria-controls":"contactos","aria-selected":"false"}},[t._v("Datos de domicilio")])]),a("li",{staticClass:"nav-item cursor",on:{click:function(e){return t.showOptionTab(3)}}},[a("a",{staticClass:"nav-link text-uppercase",attrs:{id:"contactos-tab","data-toggle":"tab",role:"tab","aria-controls":"contactos","aria-selected":"false"}},[t._v("Lista de contactos")])])]),a("div",{staticClass:"card float-left",staticStyle:{"box-shadow":"none",width:"100%"}},[t.visible?a(t.dynamicComponent.component,{tag:"component"}):t._e()],1)])])},n=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-12",staticStyle:{"margin-top":"-15px"}},[a("h6",{staticClass:"float-left",staticStyle:{"padding-bottom":"10px"}},[t._v("A continuación podrás consultar y editar los datos legales")]),a("hr",{staticStyle:{"margin-top":"25px"}})])}],i=(a("7514"),a("ac6a"),a("7f7f"),a("96cf"),a("3b8d")),o=a("08e6"),r=a("511d"),l=a("d3e3"),c={name:"FormDistribuidorCliente",mixins:[o["a"],r["a"]],data:function(){return{cuenta:null,email:null,statusLegal:"",labelLegal:null,labelRFC:null,nameLegal:null,rfc:null,pais:null,region:null,codep:null,notas:"",contactos:[],contactosFine:[],tipoContac:null,nameContac:null,telefono:null,celular:null,addres:null,emailContac:null,notasContac:null,catLegalStatus:[],catTipoContact:[],id:0,seccion:this.$route.params.id,title:null,zonaH:14,listZonaHoraria:[],visabled:!0,accionT:this.$store.state.modal.datosDymanic.accion,active:null,dynamicComponent:{component:null,properties:null,events:{}},visible:!1}},created:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.$store.state.loader=!0,this.catStatusLegal(),this.catPeople(),this.zonaHoraria(),this.getInfoCliente();case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),mounted:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return 1==this.seccion&&(this.$store.state.modal.datosDymanic.accion,this.title="Distribuidor",this.$store.state.seccionMenu="Distribuidores"),2==this.seccion&&(this.title="Cliente","editar"==this.$store.state.modal.datosDymanic.accion&&(this.title="Cliente"),this.$store.state.seccionMenu="Clientes"),$("#containerPrincipal").css({"margin-left":this.$store.state.widthMenu}),$("#containerPrincipal").css({"margin-top":this.$store.state.topMenu}),this.changeStatusLegal(),this.$store.state.loader=!1,t.next=8,l["a"].$emit("NAVBAR_MenuSimple",this.$store.state.seccionMenu);case 8:this.showOptionTab(1),this.suscribeToDeviceEvents();case 10:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),destroyed:function(){this.unsuscribreToDeviceEvents()},methods:{suscribeToDeviceEvents:function(){var t=this;l["a"].$on("get_listContact",(function(e){t.getListContactos(e)}))},unsuscribreToDeviceEvents:function(){l["a"].$off("get_listContact")},showOptionTab:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e){var s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:console.debug("SHOWCONTENT",e),this.visible=!1,this.$store.state.loader=!0,this.clearComponentsDinamic(),s=parseFloat(e),console.debug(s),this.optionTab=s,t.t0=s,t.next=1===t.t0?10:2===t.t0?14:3===t.t0?18:22;break;case 10:return console.debug("case1"),this.dynamicComponentName="legales",this.dynamicComponent.component=function(){return a.e("chunk-39d2912e").then(a.bind(null,"d6f3"))},t.abrupt("break",22);case 14:return console.debug("case2"),this.dynamicComponentName="domicilio",this.dynamicComponent.component=function(){return a.e("chunk-f4f77472").then(a.bind(null,"3f1b"))},t.abrupt("break",22);case 18:return console.debug("case3"),this.dynamicComponentName="tabla",this.dynamicComponent.component=function(){return Promise.all([a.e("chunk-742b6ea0"),a.e("chunk-4c4e4415"),a.e("chunk-678a0a8a")]).then(a.bind(null,"e850"))},t.abrupt("break",22);case 22:this.visible=!0;case 23:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),clearComponentsDinamic:function(){this.dynamicComponentName=null,this.dynamicComponent.component=null,this.dynamicComponent.properties=null},getInfoCliente:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e,a,s,n=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.getRequest("accounts/".concat(this.$store.state.modal.datosDymanic.clientID));case 2:e=t.sent,console.debug(e),a=e.data.customer,this.active=a.active,this.cuenta=a.account,this.statusLegal=a.legal.statusID,this.nameLegal=a.legal.name,this.rfc=a.legal.taxID,this.pais=a.legal.country,this.region=a.legal.region,this.codep=a.legal.zipCode,this.notas=a.legal.notes,this.addres=a.legal.address,s=a.contacts,console.debug("CONTACTOS",s),s.forEach((function(t){n.contactos.push({id:t.id,idC:t.id,name:t.name,phone:t.phone,cel:t.cel,email:t.email,tipo:t.contactType}),n.contactosFine.push({id:t.id,idC:t.id,type:t.contactTypeID,name:t.name,phone:t.phone,cel:t.cel,email:t.email,notes:t.notes}),n.id++}));case 18:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),catStatusLegal:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.getRequest("catalogs/legalstatus");case 2:e=t.sent,a=e.data.legalStatus,this.catLegalStatus=a;case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),catPeople:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.getRequest("catalogs/people");case 2:e=t.sent,a=e.data.peopleTypes,this.catTipoContact=a;case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),zonaHoraria:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.getRequest("catalogs/timezones");case 2:e=t.sent,!0===e.success&&(this.listZonaHoraria=e.data.timezones);case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),changeStatusLegal:function(){$("#divRFC").css({display:"block"}),this.labelLegal="Nombre legal / razon social",this.labelRFC="RFC / ID legal"},agregarContac:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e,a,s,n,i,o,r,l=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(null!=this.tipoContac&&""!=this.tipoContac){t.next=4;break}return $("#alertasAD").html("<div class='alert alert-danger alert-dismissible fade show' role='alert' style='text-align: initial;'><strong>Por favor, </strong>Selecciona tipo de contacto</div>"),setTimeout((function(){$("#alertasAD").html("")}),5e3),t.abrupt("return",!1);case 4:if(null!=this.nameContac){t.next=8;break}return $("#alertasAD").html("<div class='alert alert-danger alert-dismissible fade show' role='alert' style='text-align: initial;'><strong>Por favor, </strong>Ingresa nombre de contacto</div>"),setTimeout((function(){$("#alertasAD").html("")}),5e3),t.abrupt("return",!1);case 8:if(null!=this.telefono&&""!=this.telefono||null!=this.celular&&""!=this.celular){t.next=12;break}return $("#alertasAD").html("<div class='alert alert-danger alert-dismissible fade show' role='alert' style='text-align: initial;'><strong>Por favor, </strong>Ingresa teléfono o celular</div>"),setTimeout((function(){$("#alertasAD").html("")}),5e3),t.abrupt("return",!1);case 12:if(null!=this.emailContac&&""!=this.emailContac){t.next=16;break}return $("#alertasAD").html("<div class='alert alert-danger alert-dismissible fade show' role='alert' style='text-align: initial;'><strong>Por favor, </strong>Ingresa correo electrónico de contacto</div>"),setTimeout((function(){$("#alertasAD").html("")}),5e3),t.abrupt("return",!1);case 16:if(null==this.emailContac){t.next=22;break}if(e=this.validar_email(this.emailContac),e){t.next=22;break}return $("#alertasAD").html("<div class='alert alert-danger alert-dismissible fade show' role='alert' style='text-align: initial;'><strong>Error!, </strong>El correo no es valido</div>"),setTimeout((function(){$("#alertasAD").html("")}),5e3),t.abrupt("return",!1);case 22:if(this.$store.state.loader=!0,a=0,s=this.catTipoContact.find((function(t){return t.id==l.tipoContac})),!(this.contactos.length<3)){t.next=47;break}if(n=!0,"editar"!=this.$store.state.modal.datosDymanic.accion){t.next=36;break}return i={contactType:this.tipoContac,name:this.nameContac.toUpperCase(this.nameContac),phone:this.telefono,cel:this.celular,email:this.emailContac.toUpperCase(this.emailContac),notes:this.notasContac},o={},o["contact"]=i,console.debug("DATOOS",o),t.next=34,this.postRequest("accounts/"+this.$store.state.modal.datosDymanic.clientID+"/contacts",o);case 34:r=t.sent,!0===r.success?(n=!0,a=r.data.contactID,this.$store.state.loader=!1):(n=!1,this.$store.state.loader=!1,$("#alertasAD").html("<div class='alert alert-danger alert-dismissible fade show' role='alert' style='text-align: initial;'><strong>Error, </strong>No se ha agregado el contacto</div>"),setTimeout((function(){$("#alertasAD").html("")}),5e3));case 36:if(0!=this.seccion){t.next=46;break}return this.$store.state.loader=!0,i={contactType:this.tipoContac,name:this.nameContac.toUpperCase(this.nameContac),phone:this.telefono,cel:this.celular,email:this.emailContac.toUpperCase(this.emailContac),notes:this.notasContac},o={},o["contact"]=i,console.debug("DATOOS",o),t.next=44,this.postRequest("accounts/contacts",o);case 44:r=t.sent,!0===r.success?(a=r.data.contactID,this.$store.state.loader=!1,n=!0):(n=!1,this.$store.state.loader=!1,$("#alertasAD").html("<div class='alert alert-danger alert-dismissible fade show' role='alert' style='text-align: initial;'><strong>Error, </strong>No se ha agregado el contacto</div>"),setTimeout((function(){$("#alertasAD").html("")}),5e3));case 46:n&&("editar"!=this.$store.state.modal.datosDymanic.accion&&(a=this.id),this.contactos.push({id:a,idC:a,name:this.nameContac,phone:this.telefono,cel:this.celular,email:this.emailContac,tipo:s.name}),this.contactosFine.push({id:a,idC:a,type:this.tipoContac,name:this.nameContac.toUpperCase(this.nameContac),phone:this.telefono,cel:this.celular,email:this.emailContac.toUpperCase(this.emailContac),notes:this.notasContac}),this.id++);case 47:if(3!=this.contactos.length){t.next=57;break}return this.$store.state.loader=!1,$("#alertasAD").html("<div class='alert alert-info alert-dismissible fade show' role='alert' style='text-align: initial;'><strong>Excelente, </strong>Limite de 3 contactos alcanzado</div>"),setTimeout((function(){$("#alertasAD").html("")}),5e3),$("#agregarContac").attr("disabled","disabled"),this.nameContac=null,this.telefono=null,this.celular=null,this.emailContac=null,t.abrupt("return",!0);case 57:this.nameContac=null,this.telefono=null,this.celular=null,this.emailContac=null,this.$store.state.loader=!1;case 62:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),eliminarcontac:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e){var a,s,n,i,o,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(s=0,this.contactos.filter((function(t,n){if(t.id==e)return a=n,s=t,!0})),console.debug("TIPO",s,this.$store.state.modal.datosDymanic.accion,this.seccion),n=!0,this.$store.state.loader=!0,"editar"!=this.$store.state.modal.datosDymanic.accion&&0!=this.seccion){t.next=17;break}return i={},o={},t.next=10,this.deleteRequest("accounts/contacts/"+s.idC,i,o);case 10:return r=t.sent,t.t0=console,t.next=14,r;case 14:t.t1=t.sent,t.t0.debug.call(t.t0,"REQUEST_DELETE",t.t1),1==r.success?(this.$store.state.loader=!1,n=!0):(n=!1,this.$store.state.loader=!1,$("#alertasAD").html("<div class='alert alert-danger alert-dismissible fade show' role='alert' style='text-align: initial;'><strong>Error, </strong>No se ha eliminado el contacto</div>"),setTimeout((function(){$("#alertasAD").html("")}),5e3));case 17:n&&(this.contactos.splice(a,1),this.contactosFine.splice(a,1)),$("#agregarContac").removeAttr("disabled"),this.$store.state.loader=!1;case 20:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),getListContactos:function(t){var e=this;this.contactosFine=[],console.debug("DATOS_FORM",t),t.forEach((function(t){var a=0;e.catTipoContact.filter((function(e,s){if(e.name===t.tipo)return s,a=e,!0})),console.debug("DOTOS_FORM_2",t.tipo,a),e.contactosFine.push({type:a.id,name:t.name,phone:t.phone,cel:t.cel,email:t.email,notes:t.notes})}))},SendForm:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e,a,s,n,i,o,r,l,c,u=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e=0,a="",0!=this.contactosFine.length){t.next=6;break}return $("#alertasAD").html("<div class='alert alert-danger alert-dismissible fade show' role='alert' style='text-align: initial;'><strong>Error! </strong>Debes agregar al menos un contacto<button type='button' class='close' data-dismiss='alert' aria-label='Close' style='padding-top: 0px;'><span aria-hidden='true'>&times;</span></button></div>"),setTimeout((function(){$("#alertasAD").html("")}),5e3),t.abrupt("return",!1);case 6:if(this.$store.state.loader=!0,"editar"!=this.$store.state.modal.datosDymanic.accion){t.next=22;break}if(console.debug("EDITAR CLIENTES_DISTRIBUIDOR"),""==this.statusLegal||null==this.statusLegal||null==this.nameLegal||""==this.nameLegal||null==this.pais||""==this.pais||null==this.region||""==this.region||null==this.codep||""==this.codep||null==this.addres||""==this.addres||null==this.rfc||""==this.rfc){t.next=20;break}return 1==this.seccion&&(e=2,a="distribuidor"),2==this.seccion&&(e=1,a="cliente"),s={},n={legal:{statusID:this.statusLegal,taxID:this.rfc.toUpperCase(this.rfc),name:this.nameLegal.toUpperCase(this.nameLegal),country:this.pais.toUpperCase(this.pais),region:this.region.toUpperCase(this.region),zipCode:this.codep.toUpperCase(this.codep),notes:this.notas,address:this.addres.toUpperCase(this.addres)}},s.customer=n,console.debug(n,"DATOS",s),t.next=18,this.putRequest("accounts/"+this.$store.state.modal.datosDymanic.clientID,s);case 18:i=t.sent,!0===i.success?(this.$store.state.loader=!1,$("#alertasAD").html("<div class='alert alert-success alert-dismissible fade show' role='alert' style='text-align: initial;'><strong>Excelente! </strong>Se ha actualizado el ".concat(a," <button type='button' class='close' data-dismiss='alert' aria-label='Close' style='padding-top: 0px;'><span aria-hidden='true'>&times;</span></button></div>")),setTimeout((function(){$("#alertasAD").html(""),u.cancel()}),3e3)):(this.$store.state.loader=!1,$("#alertasAD").html("<div class='alert alert-danger alert-dismissible fade show' role='alert' style='text-align: initial;'><strong>Error! </strong>No se ha actulizado<button type='button' class='close' data-dismiss='alert' aria-label='Close' style='padding-top: 0px;'><span aria-hidden='true'>&times;</span></button></div>"),setTimeout((function(){$("#alertasAD").html("")}),5e3));case 20:t.next=73;break;case 22:if(0!=this.seccion){t.next=36;break}if(console.debug("MI PERFIL"),""==this.statusLegal||null==this.statusLegal||null==this.nameLegal||""==this.nameLegal||null==this.pais||""==this.pais||null==this.region||""==this.region||null==this.codep||""==this.codep||null==this.addres||""==this.addres||null==this.rfc||""==this.rfc){t.next=34;break}return console.debug("MIS ENTRA"),s={},n={legal:{statusID:this.statusLegal,taxID:this.rfc.toUpperCase(this.rfc),name:this.nameLegal.toUpperCase(this.nameLegal),country:this.pais.toUpperCase(this.pais),region:this.region.toUpperCase(this.region),zipCode:this.codep.toUpperCase(this.codep),notes:this.notas,address:this.addres.toUpperCase(this.addres)}},s.customer=n,console.debug(n,"DATOS",s),t.next=32,this.putRequest("configuration/account",s);case 32:i=t.sent,!0===i.success?(this.$store.state.loader=!1,$("#alertasAD").html("<div class='alert alert-success alert-dismissible fade show' role='alert' style='text-align: initial;'><strong>Excelente! </strong>Se han actualizado tus datos<button type='button' class='close' data-dismiss='alert' aria-label='Close' style='padding-top: 0px;'><span aria-hidden='true'>&times;</span></button></div>"),setTimeout((function(){$("#alertasAD").html(""),u.cancel()}),3e3)):(this.$store.state.loader=!1,$("#alertasAD").html("<div class='alert alert-danger alert-dismissible fade show' role='alert' style='text-align: initial;'><strong>Error! </strong>No se han actulizado tus datos<button type='button' class='close' data-dismiss='alert' aria-label='Close' style='padding-top: 0px;'><span aria-hidden='true'>&times;</span></button></div>"),setTimeout((function(){$("#alertasAD").html("")}),5e3));case 34:t.next=73;break;case 36:if(console.debug("REGISTRO"),null==this.cuenta||""==this.cuenta||null==this.email||""==this.email||""==this.zonaH||null==this.zonaH||""==this.statusLegal||null==this.statusLegal||null==this.nameLegal||""==this.nameLegal||null==this.pais||""==this.pais||null==this.region||""==this.region||null==this.codep||""==this.codep||null==this.addres||""==this.addres||null==this.rfc||""==this.rfc){t.next=73;break}return 1==this.seccion&&(e=2,a="distribuidor"),2==this.seccion&&(e=1,a="cliente"),s={},o={type:e,name:this.cuenta.toLowerCase(this.cuenta),email:this.email.toLowerCase(this.email),timezone:this.zonaH},r={statusID:this.statusLegal,name:this.nameLegal.toUpperCase(this.nameLegal),country:this.pais.toUpperCase(this.pais),region:this.region.toUpperCase(this.region),zipCode:this.codep.toUpperCase(this.codep),notes:this.notas,address:this.addres.toUpperCase(this.addres),id:this.rfc.toUpperCase(this.rfc)},l=[],this.contactosFine.forEach((function(t){l.push({type:t.type,name:t.name.toUpperCase(t.name),phone:t.phone,cel:t.cel,email:t.email.toLowerCase(t.email),notes:t.notes})})),s["account"]=o,s["legal"]=r,s["contacts"]=l,console.debug("DATOS",s),t.next=51,this.postRequest("accounts",s);case 51:if(i=t.sent,!0!==i.success){t.next=58;break}this.$store.state.loader=!1,$("#alertasAD").html("<div class='alert alert-success alert-dismissible fade show' role='alert' style='text-align: initial;'><strong>Excelente! </strong>Se ha creado el ".concat(a," <button type='button' class='close' data-dismiss='alert' aria-label='Close' style='padding-top: 0px;'><span aria-hidden='true'>&times;</span></button></div>")),setTimeout((function(){$("#alertasAD").html(""),u.cancel()}),3e3),t.next=73;break;case 58:this.$store.state.loader=!1,c="",t.t0=i.error.title,t.next="USER_EXISTS"===t.t0?63:"EMAIL_EXISTS"===t.t0?65:"UNAUTHORIZED"===t.t0?67:69;break;case 63:return c="El usuario ya existe",t.abrupt("break",71);case 65:return c="El correo electrónico ya existe",t.abrupt("break",71);case 67:return c="No cuenta con los permisos para realizar la accion",t.abrupt("break",71);case 69:return c="No se ha podido crear el "+a,t.abrupt("break",71);case 71:$("#alertasAD").html("<div class='alert alert-danger alert-dismissible fade show' role='alert' style='text-align: initial;'><strong>Error! </strong>".concat(c," <button type='button' class='close' data-dismiss='alert' aria-label='Close' style='padding-top: 0px;'><span aria-hidden='true'>&times;</span></button></div>")),setTimeout((function(){$("#alertasAD").html("")}),5e3);case 73:this.$store.state.loader=!1;case 74:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),cancel:function(){1==this.seccion&&this.$router.push("/ListTableDistrobuitor"),2==this.seccion&&this.$router.push("/ListaCliente")}}},u=c,h=(a("c541"),a("2877")),d=Object(h["a"])(u,s,n,!1,null,"68297d4c",null);e["default"]=d.exports},c541:function(t,e,a){"use strict";var s=a("f5b1"),n=a.n(s);n.a},f5b1:function(t,e,a){}}]);
//# sourceMappingURL=chunk-337212df.d17f552b.js.map