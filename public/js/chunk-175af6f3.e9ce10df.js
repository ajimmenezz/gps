(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-175af6f3"],{"64a5":function(e,t,s){},"6f2c":function(e,t,s){"use strict";s.d(t,"a",(function(){return r}));var a=s("bc3a"),n=s.n(a),r=(s("08e6"),{data:function(){return{}},methods:{isValidateToken:function(e){var t={token:e.token};return new Promise((function(s,a){n.a.get(e.url+"tokens/validate",{params:t}).then((function(e){s(e.data)})).catch((function(e){s(e)}))}))},login:function(e){var t={user:e.user,password:e.password};return new Promise((function(s,a){n.a.get(e.url+"login",{params:t}).then((function(e){s(e.data)})).catch((function(e){s(e)}))}))},recover:function(e){var t={email:e.email};return new Promise((function(s,a){n.a.get(e.url+"login/recover",{params:t}).then((function(e){console.log("api"),console.log(e),s(e.data)})).catch((function(e){s(e)}))}))},changePassword:function(e){n.a.defaults.headers.common["Authorization"]="Bearer "+e.token;var t={password:e.password};return new Promise((function(s,a){n.a.put(e.url+"login/password",t).then((function(e){s(e.data)})).catch((function(e){s(e)}))}))}}})},7101:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{staticClass:"auth-wrapper aut-bg-img-side cotainer-fiuid align-items-stretch"},[s("div",{staticClass:"row align-items-center w-100 align-items-stretch bg-white"},[s("div",{staticClass:"d-none d-lg-flex col-lg-8  align-items-center d-flex justify-content-center login-img-bg",style:{"background-image":"url(img/fondo_login.jpg)"}},[e._m(0)]),s("div",{staticClass:"col-lg-4 align-items-stret h-100 align-items-center d-flex justify-content-center"},[s("div",{staticClass:" auth-content text-center"},[s("div",{staticClass:"mb-4"},[s("img",{staticClass:"img-fluid",staticStyle:{height:"100px"},attrs:{src:e.logoGet+"logo.png"}}),s("div",{staticClass:"col-12 version"},[e._v("Rev. "+e._s(this.$store.getters.appVersion)+" ")])]),s("h3",{staticClass:"mb-4"},[e._v("Iniciar sesión")]),s("form",{on:{submit:function(e){e.preventDefault()}}},[s("div",{staticClass:"col-12"},[s("config-input",{attrs:{id:"usr",label:"null",typeinput:"text",placeholder:"Usuario",required:"true",toLowerUperCase:"lowercase"},model:{value:e.user,callback:function(t){e.user="string"===typeof t?t.trim():t},expression:"user"}})],1),s("div",{staticClass:"col-12"},[s("config-input",{attrs:{id:"pwd",label:"null",typeinput:"password",placeholder:"Contraseña",required:"true"},model:{value:e.passw,callback:function(t){e.passw="string"===typeof t?t.trim():t},expression:"passw"}}),e.logged?e._e():s("div",{attrs:{id:"alertas"}})],1),s("button",{staticClass:"btn btn-primary shadow-2 mb-4",on:{click:function(t){return e.Sendlogin()}}},[e._v("INGRESAR")])]),s("router-link",{attrs:{to:"/login/recover"}},[s("p",{staticClass:"mb-2 text-muted"},[e._v("¿Olvidaste tu contraseña?")])])],1)])])])])},n=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"col-md-8"},[s("h1",{staticClass:"text-white mb-5"},[e._v(" ")]),s("p",{staticClass:"text-white"})])}],r=(s("96cf"),s("3b8d")),o=s("6f2c"),i=s("08e6"),c=s("511d"),l=s("da30"),u={name:"Login",mixins:[l["a"],o["a"],i["a"],c["a"]],data:function(){return{user:"",passw:"",paramNameUser:"gps_infinity",Getlogo:localStorage.getItem("imgLogo")}},created:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.$store.state.loader=!0,this.paramNameUser="gps_infinity",console.debug("PARAMS_NAME_USER",this.paramNameUser),e.next=5,this.getlogoUser(this.paramNameUser);case 5:t=e.sent,this.Getlogo=localStorage.getItem("imgLogo"),this.$store.state.modaloader.Getlogo=this.Getlogo,console.debug("PARAMS_NAME_USER_STATE",t),this.$store.state.loader=!1;case 10:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),mounted:function(){},methods:{Sendlogin:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t,s=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.$store.state.loader=!0,""!=this.user&&""!=this.passw&&(t={user:this.user.toLowerCase(this.user),password:this.passw,url:this.$store.state.apiUrl},this.login(t).then(function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){var a,n,r,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(console.debug("LOGIN",t),!0!==t.success){e.next=46;break}return s.sessionSet("token",t.data.session.token),s.sessionSet("timezone",t.data.session.timezone),s.sessionSet("loginFist",t.data.session.isFirstTimeLogin),sessionStorage.setItem("TC",t.data.session.clientType),sessionStorage.setItem("UT",t.data.session.userType),e.next=9,s.getlogoUser_login(s.user);case 9:return a=e.sent,s.Getlogo=localStorage.getItem("imgLogo"),s.$store.state.modaloader.Getlogo=s.Getlogo,console.debug("PARAMS_NAME_USER_STATE",a),s.sessionSet("client",t.data.session.client),s.sessionSet("user",t.data.session.user),s.$moment.tz.setDefault(t.data.session.timezone),sessionStorage.setItem("firstLogin",t.data.session.isFirstTimeLogin),e.next=19,s.$store.commit("menuOptions",t.data.session.permissions);case 19:return e.next=21,s.$store.dispatch("devices/LOAD_DEVICES",t.data.devices);case 21:return n=t.data.fleets,e.next=24,s.$store.dispatch("devices/LOAD_FLEETS",n);case 24:return e.next=26,s.getRequest("catalogs/devices/reports/types");case 26:return r=e.sent,e.next=29,s.$store.commit("ws/CATALOG_REPORT_TYPES",r.data.reportTypes);case 29:if(s.$store.state.devices.fleets.push({id:null,name:"SIN ASIGNAR",selected:!1,iconCollapse:!0}),s.$store.state.loader=!1,!0!==t.data.session.isFirstTimeLogin){e.next=37;break}return e.next=34,s.$store.dispatch("loginFirstTime",!0);case 34:s.$router.push({name:"loginchangePassword",params:{token:s.sessionGet("token")}}),e.next=44;break;case 37:return e.next=39,s.$store.dispatch("SuccessLogin",t.data);case 39:return s.sessionSet("logged",!0),s.$store.dispatch("showMenu",!0),e.next=43,s.$store.dispatch("loginFirstTime",!1);case 43:s.$router.push({name:"home"});case 44:e.next=63;break;case 46:return s.$store.state.loader=!1,s.sessionSet("logged",!1),e.next=50,s.$store.dispatch("FailLogin",t.error);case 50:o="",e.t0=t.error.title,e.next="PROVIDER_SUSPEND"===e.t0?54:"ACCOUNT_SUSPEND"===e.t0?56:"USER_SUSPEND"===e.t0?58:60;break;case 54:return o="El PROVEEDOR de servicio se encuentra suspendido, por favor comunicate con él para poder acceder a la plataforma.",e.abrupt("break",62);case 56:return o="La CUENTA se encuentra suspendida, por favor comunicate con soporte.",e.abrupt("break",62);case 58:return o="El USUARIO se encuentra suspendido, por favor comunicate con soporte.",e.abrupt("break",62);case 60:return o="El usuario/contraseña son incorrectos.",e.abrupt("break",62);case 62:$("#alertas").html("<div class='alert alert-danger alert-dismissible fade show' role='alert' style='text-align: initial;'><strong>Error! </strong>"+o+"<button type='button' class='close' data-dismiss='alert' aria-label='Close' style='padding-top: 0px;'><span aria-hidden='true'>&times;</span></button></div>");case 63:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.log("error",e)}))),this.$store.state.loader=!1;case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},computed:{logoGet:function(){return this.Getlogo},logged:function(){return this.$store.getters.isLogged}}},d=u,g=(s("eeb1"),s("2877")),p=Object(g["a"])(d,a,n,!1,null,null,null);t["default"]=p.exports},eeb1:function(e,t,s){"use strict";var a=s("64a5"),n=s.n(a);n.a}}]);
//# sourceMappingURL=chunk-175af6f3.e9ce10df.js.map