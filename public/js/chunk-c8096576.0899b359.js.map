{"version":3,"sources":["webpack:///./src/views/Administrador/productos/tablesorter_Product.vue?6c34","webpack:///src/views/Administrador/productos/tablesorter_Product.vue","webpack:///./src/views/Administrador/productos/tablesorter_Product.vue?db89","webpack:///./src/views/Administrador/productos/tablesorter_Product.vue?e50d","webpack:///./src/views/Administrador/productos/tablesorter_Product.vue?cc93"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_m","ref","attrs","onEditVisible","onWatchVisible","ondeleteVisible","on","OnWatch","OnEdit","OnDelete","staticRenderFns","staticStyle","_v","name","mixins","API","data","listProduct","components","cModalDelete","dataTable","created","$store","state","StoreCliente","modal","datosDymanic","idCliente","getClientID","getProduct","mounted","seccionMenu","$","css","suscribeToDeviceEvents","beforeDestroy","unsuscribreToDeviceEvents","methods","changeHeaderTable","headers","forEach","element","creationTimestamp","moment","format","console","debug","rows","$refs","table","Render","Refresh","modalFormProductEdit","item","sender","eliminar","EventBus","computed","component"],"mappings":"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","file":"js/chunk-c8096576.0899b359.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"row\"},[_vm._m(0),_c('div',{staticClass:\" col-12 float-left\"},[_c('data-table',{ref:\"table\",attrs:{\"showEditButton\":_vm.onEditVisible,\"showWatchButton\":_vm.onWatchVisible,\"showDeleteButton\":_vm.ondeleteVisible,\"showActiveButton\":false,\"showIndex\":true},on:{\"OnWatch\":_vm.OnWatch,\"OnEdit\":_vm.OnEdit,\"OnDelete\":_vm.OnDelete}})],1)])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"col-12\"},[_c('h5',{staticClass:\"float-left\",staticStyle:{\"font-size\":\"20px\",\"padding-bottom\":\"10px\"}},[_c('b',[_vm._v(\"Productos genéricos\")])])])}]\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"row\" >\r\n      <div class=\"col-12\"> <h5 class=\"float-left\" style=\"font-size: 20px; padding-bottom: 10px;\"><b>Productos genéricos</b></h5></div>\r\n\r\n      <div class=\" col-12 float-left\">\r\n           <data-table ref=\"table\"\r\n                    @OnWatch=\"OnWatch\"\r\n                    @OnEdit=\"OnEdit\"\r\n                    @OnDelete=\"OnDelete\"\r\n\r\n                    :showEditButton=\"onEditVisible\"\r\n                    :showWatchButton=\"onWatchVisible\"\r\n                    :showDeleteButton=\"ondeleteVisible\"\r\n                    :showActiveButton=\"false\"\r\n                      :showIndex=\"true\"\r\n                />\r\n      </div>\r\n\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { API } from '@/mixins/API'\r\n// import FormProduct from '@/views/Administrador/productos/formProduc'\r\nimport FormPrincipal from '@/views/Administrador/FormPrincipalRegister'\r\nimport cModalDelete from '@/views/Administrador/DeleteModal'\r\nimport EventBus from '@/EventBus'\r\nimport dataTable from '@/components/DataTable/DataTable'\r\n/**\r\n * @vuese\r\n * @group Administrador/Distribuidor\r\n * Tabla de productos generico\r\n */\r\nexport default {\r\n  name: 'tablaProductos',\r\n  mixins: [API],\r\n  data () {\r\n    return {\r\n      listProduct: null,\r\n      onWatchVisible: false,\r\n      onEditVisible: false,\r\n      ondeleteVisible: false\r\n    }\r\n  },\r\n  components: {\r\n    cModalDelete,\r\n    dataTable\r\n  },\r\n  created () {\r\n    this.$store.state.StoreCliente = this.$store.state.modal.datosDymanic.idCliente\r\n    if (this.getClientID == 0) {\r\n      this.ondeleteVisible = true\r\n      this.onEditVisible = true\r\n    }\r\n    if (this.getClientID != 0) {\r\n      this.onWatchVisible = true\r\n    }\r\n    this.getProduct()\r\n  },\r\n  mounted () {\r\n    this.$store.state.seccionMenu = 'adminGps'\r\n    $('#containerPrincipal').css({ 'margin-left': this.$store.state.widthMenu })\r\n    $('#containerPrincipal').css({ 'margin-top': this.$store.state.topMenu })\r\n    this.suscribeToDeviceEvents()\r\n  },\r\n  beforeDestroy () {\r\n    this.unsuscribreToDeviceEvents()\r\n  },\r\n  methods: {\r\n    async getListProduct () {\r\n      if (this.$store.state.StoreCliente == 0) {\r\n        var request = await this.getRequest('products/generic')\r\n\r\n        if (request.success === true) {\r\n          this.listProduct = request.data.products\r\n        }\r\n      } else {\r\n        var dato = {\r\n          'clientID': this.$store.state.StoreCliente\r\n        }\r\n        var request = await this.getRequest('products/generic', dato)\r\n\r\n        if (request.success === true) {\r\n          this.listProduct = request.data.products\r\n        }\r\n      }\r\n    },\r\n    /**\r\n   * @vuese\r\n   * obtiene la lista de gps en almacen\r\n   */\r\n    async getProduct () {\r\n      if (this.$store.state.StoreCliente == 0) {\r\n        var request = await this.getRequest('products/generic')\r\n\r\n        if (request.success === true) {\r\n          this.listProduct = request.data.products\r\n        }\r\n      } else {\r\n        var dato = {\r\n          'clientID': this.$store.state.StoreCliente\r\n        }\r\n        var request = await this.getRequest('products/generic', dato)\r\n\r\n        if (request.success === true) {\r\n          this.listProduct = request.data.products\r\n        }\r\n      }\r\n\r\n      await this.changeHeaderTable()\r\n    },\r\n    changeHeaderTable () {\r\n      this.headers = [\r\n        // {\r\n        //   title: '#',\r\n        //   key: 'index',\r\n        //   default: ''\r\n        // },\r\n        {\r\n          title: 'Serial',\r\n          key: 'serial',\r\n          default: ''\r\n\r\n        },\r\n        {\r\n          title: 'Marca',\r\n          key: 'factoryName',\r\n          default: '-',\r\n          priority: 1\r\n        },\r\n        {\r\n          title: 'Modelo',\r\n          key: 'modelName',\r\n          default: '-'\r\n\r\n        },\r\n        {\r\n          title: 'Fecha de creación',\r\n          key: 'creationTimestamp',\r\n          default: '-',\r\n          priority: 5\r\n        }\r\n\r\n      ]\r\n\r\n      this.listProduct.forEach(element => {\r\n        if (element.creationTimestamp) {\r\n          element.creationTimestamp = moment(element.creationTimestamp * 1000).format('DD-MM-YYYY')\r\n        }\r\n      })\r\n\r\n      console.debug(this.listProduct, 'DATOS_list')\r\n      this.rows = this.listProduct\r\n      console.debug('DATOS_ROWS', this.rows)\r\n      this.$refs.table.Render(this.headers, this.rows)\r\n      this.Refresh()\r\n    },\r\n    Refresh () {\r\n      console.debug('data_REFRESH')\r\n      this.$refs.table.Refresh()\r\n    },\r\n    OnWatch (item, sender) {\r\n      console.debug(`WATCH: ${item.id} ${item.serial}`)\r\n      this.modalFormProductEdit(item, sender)\r\n    },\r\n    OnEdit (item, sender) {\r\n      console.debug(`onEdit: ${item.id} ${item.serial}`)\r\n      this.modalFormProductEdit(item, sender)\r\n    },\r\n    OnDelete (item, sender) {\r\n      console.debug(`DELETE: ${item.id} ${item.serial} `)\r\n      console.debug('DELETE row', sender, item)\r\n      this.eliminar(item, sender)\r\n    },\r\n\r\n    /**\r\n   * @vuese\r\n   * Abre el modal para editar el producto\r\n   * @arg `id` Id de producto\r\n   */\r\n    async modalFormProductEdit (item, sender) {\r\n      this.$store.state.loader = true\r\n      this.$store.commit('CLEAR_MODAL_DINAMIC')\r\n\r\n      var datos = {\r\n        'component': FormPrincipal,\r\n        'datos': {\r\n          'seccion': 'product',\r\n          'accion': 'editar',\r\n          'id': item.id,\r\n          'item': item,\r\n          'sender': sender\r\n\r\n        }\r\n      }\r\n\r\n      await this.$store.commit('ADD_COMPONENT_DINAMIC', datos)\r\n      await this.$store.commit('ADD_COMPONENT_DINAMIC_STATE', true)\r\n    },\r\n    async editarProducto (data) {\r\n      console.debug('DATOS EDIT', data.datos)\r\n\r\n      var request = await this.putRequest('products/generic/' + data.item.id, data.datos)\r\n\r\n      if (request.success === true) {\r\n        this.$store.state.loader = false\r\n\r\n        this.getListProduct()\r\n        this.$refs.table.RemoveRow(data.sender)\r\n        this.$refs.table.AddRow(data.item)\r\n        notify('Excelente!', 'Se ha editado el producto ', 'top', 'right', 'success', 10, 50)\r\n      } else {\r\n        this.$store.state.loader = false\r\n\r\n        var message = ''\r\n        switch (request.error.title) {\r\n          case 'SERIAL_EXISTS':\r\n            message = 'El serial ya existe'\r\n            break\r\n          case 'UNAUTHORIZED':\r\n            message = 'No cuenta con los permisos para realizar la accion'\r\n            break\r\n          default:\r\n            message = 'No se ha actualizado el producto'\r\n            break\r\n        }\r\n        notify('Error!', message, 'top', 'right', 'danger', 10, 50)\r\n      }\r\n    },\r\n    /**\r\n   * @vuese\r\n   * Abre el modal de confirmacion para eliminar el producto\r\n   * @arg `id` Id de producto\r\n  * @arg `name` Nombre de gps\r\n   */\r\n    async eliminar (item, sender) {\r\n      this.$store.commit('CLEAR_MODAL_DINAMIC')\r\n\r\n      var datos = {\r\n        'component': cModalDelete,\r\n        'datos': {\r\n          'ID': item.id,\r\n          'name': item.serial,\r\n          'tipo': 'product',\r\n          'item': item,\r\n          'sender': sender\r\n        }\r\n      }\r\n      await this.$store.commit('ADD_COMPONENT_DINAMIC', datos)\r\n      await this.$store.commit('ADD_COMPONENT_DINAMIC_STATE', true)\r\n    },\r\n    async eliminarProducto (data) {\r\n      var productID = data.id\r\n\r\n      var request = await this.deleteRequest('products/generic/' + data.id)\r\n\r\n      if (request.success === true) {\r\n        this.$store.state.loader = false\r\n        this.$refs.table.RemoveRow(data.sender)\r\n        this.getListProduct()\r\n        notify('Excelente!', 'Se ha eliminado el producto ', 'top', 'right', 'success', 10, 50)\r\n      } else {\r\n        this.$store.state.loader = false\r\n        notify('Error!', 'No se ha eliminado el producto ', 'top', 'right', 'danger', 10, 50)\r\n      }\r\n    },\r\n    /**\r\n   * @vuese\r\n   * se suscribe a eventos eventBus para actulizar el listado de gps\r\n   */\r\n    suscribeToDeviceEvents () {\r\n      EventBus.$on('editar_products', (data) => {\r\n        console.debug('DATOS_EDITPRODUCT', data)\r\n        this.editarProducto(data)\r\n      })\r\n      EventBus.$on('eliminar_products', (data) => {\r\n        console.debug('DATOS_ELIMINARPRODUCT', data)\r\n        this.eliminarProducto(data)\r\n      })\r\n    },\r\n    /**\r\n   * @vuese\r\n   * Se destruye la suscripcion al eventBus\r\n   */\r\n    unsuscribreToDeviceEvents () {\r\n      EventBus.$off('editar_products')\r\n      EventBus.$off('eliminar_products')\r\n    }\r\n  },\r\n  computed: {\r\n    getClientID () {\r\n      return this.$store.state.StoreCliente\r\n    }\r\n\r\n  }\r\n}\r\n</script>\r\n\r\n<style>\r\n.scrollTable{\r\n  position: relative;\r\n    overflow: auto;\r\n    height: 293px;\r\n    /* height: 480px; */\r\n    width: 100%;\r\n}\r\n</style>\r\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./tablesorter_Product.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./tablesorter_Product.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./tablesorter_Product.vue?vue&type=template&id=323092f7&\"\nimport script from \"./tablesorter_Product.vue?vue&type=script&lang=js&\"\nexport * from \"./tablesorter_Product.vue?vue&type=script&lang=js&\"\nimport style0 from \"./tablesorter_Product.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./tablesorter_Product.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./tablesorter_Product.vue?vue&type=style&index=0&lang=css&\""],"sourceRoot":""}