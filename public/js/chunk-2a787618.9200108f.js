(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2a787618"],{"0f32":function(t,e,s){"use strict";var a=s("8d81"),i=s.n(a);i.a},"6ea7":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:" row "},[t._m(0),s("div",{staticClass:" col-12"},[s("div",{staticClass:"card"},[s("div",{staticClass:"card-header row"},[t._m(1),s("div",{staticClass:"col-3",staticStyle:{height:"30px"}},[s("router-link",{attrs:{to:"/registerFlotilla"}},[s("button",{staticClass:"btn btn-primary float-right btn-sm cssToolTipp",attrs:{type:"button"}},[t._v("NUEVA\n                   "),s("p",{staticStyle:{top:"25px !important",right:"10% !important"}},[t._v("Nueva flotilla")])])])],1)]),s("div",{staticClass:"card-body"},[s("div",{staticClass:"table-responsive scrollTable"},[s("table",{staticClass:"table table-hover header_fijo"},[t._m(2),s("tbody",t._l(t.listFlotas,(function(e,a){return s("tr",{key:e.id},[s("td",[t._v(t._s(a+1))]),s("td",[t._v(t._s(e.name))]),s("td",[t._v(t._s(e.totalDevices))]),s("td",[t._v(" "+t._s(t._f("moment")(1e3*e.creationTimestamp,"MMMM DD YYYY")))]),s("td",[s("span",{staticClass:"cursor"},[s("i",{staticClass:"icon icon-md universalicon-pencil cursor cssToolTipp",on:{click:function(s){return t.editar(e.id)}}},[s("p",{staticStyle:{top:"25px !important",right:"10% !important"}},[t._v("Editar flotilla")])])]),s("span",{on:{click:function(s){return t.eliminar(e.id,e.name)}}},[t._m(3,!0)])])])})),0)])])])])])])},i=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"col-12"},[s("h5",{staticClass:"float-left",staticStyle:{"font-size":"20px","padding-bottom":"10px"}},[s("b",[t._v("Flotillas - Lista de flotillas")])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"col-9"},[s("h5",{staticClass:" float-left"},[t._v("Flotillas")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("thead",[s("tr",[s("th",[t._v("#")]),s("th",[t._v("Flotilla")]),s("th",[t._v("Dispositivos")]),s("th",[t._v("Fecha de creación")]),s("th",[t._v("Acciones")])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("i",{staticClass:"cursor icon-small icon universalicon-trash-2 colorText-red cssToolTipp"},[s("p",{staticStyle:{top:"25px !important",right:"10% !important"}},[t._v("Eliminar flotilla")])])}],n=(s("96cf"),s("3b8d")),l=s("08e6"),r=s("d3e3"),o=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"modal fade ",attrs:{id:"modalDelete",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalCenterTitle","aria-hidden":"true"}},[s("div",{staticClass:"modal-dialog modal-dialog-centered ",attrs:{role:"document"}},[s("div",{staticClass:"modal-content"},[t._m(0),s("div",{staticClass:"modal-body "},[s("div",{staticClass:"container"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-1"}),s("div",{staticClass:"col-10"},[s("p",[t._v("¿Estás seguro que deseas eliminar la flotilla "+t._s(this.$store.state.modal.datosDymanic.name)+" ?")])]),s("div",{staticClass:"col-1"})])])]),s("div",{staticClass:"modal-footer"},[s("button",{staticClass:"btn btn-secondary",attrs:{type:"button","data-dismiss":"modal"}},[t._v("CANCELAR")]),s("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(e){return t.confirmModal()}}},[t._v("ACEPTAR")])]),s("div",{attrs:{id:"alertasFleet"}})])])])},c=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"modal-header"},[s("h5",{staticClass:"modal-title",attrs:{id:"exampleModalCenterTitle"}},[t._v("Eliminar flotilla")]),s("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[s("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])])}],u=(s("7f7f"),s("ac6a"),s("8615"),{name:"ModalEliminarFlotilla",mixins:[l["a"]],data:function(){return{}},mounted:function(){$("#modalDelete").modal("show")},destroyed:function(){},methods:{confirmModal:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(){var e,s,a,i,n,l,o,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=this.$store.state.modal.datosDymanic.ID,t.next=3,this.getRequest("fleets/"+e);case 3:return s=t.sent,i=[],!0===s.success&&(a=s.data.fleet,i=a.devices),t.next=8,this.deleteRequest("fleets/"+e);case 8:s=t.sent,!0===s.success?(i.length>0&&(n=Object.values(this.$store.state.devices.devices),n.forEach((function(t){i.forEach((function(e){parseInt(t.id)==e&&(t.fleetID=null)}))}))),o=this.$store.state.modal.datosDymanic.name,c=Object.values(this.$store.state.devices.fleets),c.filter((function(t,e){if(t.name===o)return l=e,!0})),c.splice(l,1),$("#modalDelete").modal("hide"),this.$store.commit("CLEAR_MODAL_DINAMIC"),r["a"].$emit("GET_LIST_fleets",1)):$("#alertasFleet").html("<div class='alert alert-danger alert-dismissible fade show' role='alert' style='text-align: initial;'><strong>Error! </strong>No se ha eliminado la flotilla<button type='button' class='close' data-dismiss='alert' aria-label='Close' style='padding-top: 0px;'><span aria-hidden='true'>&times;</span></button></div>");case 10:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},computed:{}}),d=u,m=s("2877"),f=Object(m["a"])(d,o,c,!1,null,null,null),h=f.exports,p={name:"tablaFlotillas",mixins:[l["a"]],data:function(){return{listaFlotillas:[]}},components:{cModalDelete:h},created:function(){this.listFlotillas()},mounted:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.$store.state.submenuActive="config",this.$store.state.itemSubmenuActive="itemFlotilla",t.next=4,r["a"].$emit("NAVBAR_MenuOpciones","config","itemFlotilla");case 4:this.suscribeToDeviceEvents(),$("#containerPrincipal").css({"margin-left":this.$store.state.widthMenu}),$("#containerPrincipal").css({"margin-top":this.$store.state.topMenu});case 7:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),beforeDestroy:function(){this.unsuscribreToDeviceEvents()},methods:{listFlotillas:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(){var e,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.getRequest("fleets");case 2:e=t.sent,!0===e.success&&(s=e.data.fleets),this.listaFlotillas=s,this.$store.commit("CLEAR_MODAL_DINAMIC");case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),editar:function(t){this.$store.commit("CLEAR_MODAL_DINAMIC"),this.$store.state.loader=!0,this.$router.push({name:"registerFlotilla",params:{accion:"editar",id:t}})},eliminar:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(e,s){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.$store.commit("CLEAR_MODAL_DINAMIC"),a={component:h,datos:{ID:e,name:s}},t.next=4,this.$store.commit("ADD_COMPONENT_DINAMIC",a);case 4:return t.next=6,this.$store.commit("ADD_COMPONENT_DINAMIC_STATE",!0);case 6:case"end":return t.stop()}}),t,this)})));function e(e,s){return t.apply(this,arguments)}return e}(),suscribeToDeviceEvents:function(){var t=this;r["a"].$on("GET_LIST_fleets",(function(e){t.listFlotillas()}))},unsuscribreToDeviceEvents:function(){r["a"].$off("GET_LIST_fleets")}},computed:{listFlotas:function(){return this.listaFlotillas}}},v=p,_=(s("0f32"),Object(m["a"])(v,a,i,!1,null,null,null));e["default"]=_.exports},"8d81":function(t,e,s){}}]);
//# sourceMappingURL=chunk-2a787618.9200108f.js.map