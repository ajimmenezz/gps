(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d216420"],{c261:function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"row"},[i("form",{on:{submit:function(e){e.preventDefault()}}},[i("div",{staticClass:"col-12"},[0!=this.$store.state.modal.datosDymanic.idCliente&&"nuevo"==this.accion?i("p",{staticClass:"text-muted"},[e._v("El gps se agregará en el almacén del cliente: "),i("b",[e._v(e._s(this.$store.state.modal.datosDymanic.nameClient))])]):e._e(),0==this.$store.state.modal.datosDymanic.idCliente&&"nuevo"==this.accion?i("p",[e._v("El gps se agregará en tú almacén")]):e._e(),i("div",{staticClass:"row"},[i("div",{staticClass:"col-12",staticStyle:{"margin-top":"10px"},attrs:{id:"alertAdminImeiNotas"}},[3==e.getMarca?i("div",{staticClass:"alert alert-info alert-dismissible fade show",staticStyle:{"text-align":"initial"},attrs:{role:"alert"}},[i("strong",{staticStyle:{"font-weight":"800"}},[e._v("Nota! ")]),e._v("\n                      "+e._s(e.messageInfo)+" "),i("br"),null!=this.exampleImei?i("strong",{staticStyle:{"font-weight":"800"}},[e._v("Ejemplo: ")]):e._e(),e._v(" "+e._s(e.exampleImei)+"\n                      ")]):e._e()]),i("div",{staticClass:"col-12 col-md-4"},[i("div",{staticClass:"form-group"},[i("label",{attrs:{for:"marca"}},[e._v("Marca")]),i("select",{directives:[{name:"model",rawName:"v-model",value:e.marca,expression:"marca"}],staticClass:"form-control",attrs:{id:"marca",valor:e.marca,required:""},on:{change:[function(t){var i=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.marca=t.target.multiple?i:i[0]},function(t){return e.modelGPS()}]}},[i("option",{attrs:{value:""}},[e._v("Selecciona")]),e._l(e.listFactories,(function(t){return i("option",{key:t.id,domProps:{value:t.id}},[e._v(e._s(t.factory))])}))],2)])]),i("div",{staticClass:"col-12 col-md-4"},[i("div",{staticClass:"form-group"},[i("label",{attrs:{for:"model"}},[e._v("Modelo")]),i("select",{directives:[{name:"model",rawName:"v-model",value:e.model,expression:"model"}],staticClass:"form-control",attrs:{id:"model",valor:e.model,required:""},on:{change:function(t){var i=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.model=t.target.multiple?i:i[0]}}},[i("option",{attrs:{value:""}},[e._v("Selecciona")]),e._l(e.listmodels,(function(t){return i("option",{key:t.id,domProps:{value:t.id}},[e._v(e._s(t.model))])}))],2)])]),i("div",{staticClass:"col-12 col-md-4"},["nuevo"==this.accion?i("config-input",{attrs:{id:"imei",label:"IMEI",typeinput:"text",placeholder:"IMEI",required:"true",valor:e.imei,minlength:e.valuePattern,maxlength:e.valuePattern,onkeypress:e.onkeypress},model:{value:e.imei,callback:function(t){e.imei="string"===typeof t?t.trim():t},expression:"imei"}}):e._e(),"editar"==this.accion?i("config-input",{attrs:{id:"imei",label:"IMEI",typeinput:"text",placeholder:"IMEI",required:"false",disabled:"true",valor:e.imei},model:{value:e.imei,callback:function(t){e.imei="string"===typeof t?t.trim():t},expression:"imei"}}):e._e()],1),2==this.comportamiento?i("div",{staticClass:"col-12 col-md-4"},[i("config-input",{attrs:{id:"alias",label:"Alias",typeinput:"text",placeholder:"Alias",required:"false",valor:e.alias},model:{value:e.alias,callback:function(t){e.alias="string"===typeof t?t.trim():t},expression:"alias"}})],1):e._e(),i("div",{staticClass:"col-12 "},[i("config-input",{attrs:{id:"notes",label:"Notas",typeinput:"text",placeholder:"Notas",required:"false",valor:e.notas},model:{value:e.notas,callback:function(t){e.notas="string"===typeof t?t.trim():t},expression:"notas"}})],1)]),2==this.comportamiento?i("div",{staticClass:"row"},[e._m(0),i("div",{staticClass:"col-12 col-md-4"},[i("div",{staticClass:"form-group"},[i("label",{attrs:{for:"cliente"}},[e._v("Cliente")]),i("select",{directives:[{name:"model",rawName:"v-model",value:e.cliente,expression:"cliente"}],staticClass:"form-control",attrs:{id:"cliente",valor:e.cliente,required:""},on:{change:function(t){var i=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.cliente=t.target.multiple?i:i[0]}}},[i("option",{attrs:{value:""}},[e._v("Selecciona")]),e._l(e.listmodels,(function(t){return i("option",{key:t.id,domProps:{value:t.id}},[e._v(e._s(t.model))])}))],2)])])]):e._e(),2==this.comportamiento?i("div",{staticClass:"row"},[e._m(1),i("div",{staticClass:"col-12 col-md-6"},[i("config-input",{attrs:{id:"nameDriver",label:"Conductor",typeinput:"text",placeholder:"Conductor",required:"false",valor:e.nameDriver},model:{value:e.nameDriver,callback:function(t){e.nameDriver="string"===typeof t?t.trim():t},expression:"nameDriver"}})],1),i("div",{staticClass:"col-12 col-md-6"},[i("config-input",{attrs:{id:"phoneDriver",label:"Teléfono",typeinput:"text",placeholder:"Teléfono",required:"false",valor:e.phoneDriver},model:{value:e.phoneDriver,callback:function(t){e.phoneDriver="string"===typeof t?t.trim():t},expression:"phoneDriver"}})],1)]):e._e(),2==this.comportamiento?i("div",{staticClass:"row"},[e._m(2),i("div",{staticClass:"col-12 col-md-4"},[i("config-input",{attrs:{id:"vehMarca",label:"Marca",typeinput:"text",placeholder:"Marca",required:"false",valor:e.vehMarca},model:{value:e.vehMarca,callback:function(t){e.vehMarca="string"===typeof t?t.trim():t},expression:"vehMarca"}})],1),i("div",{staticClass:"col-12 col-md-4"},[i("config-input",{attrs:{id:"vehModel",label:"Modelo",typeinput:"text",placeholder:"Modelo",required:"false",valor:e.vehModel},model:{value:e.vehModel,callback:function(t){e.vehModel="string"===typeof t?t.trim():t},expression:"vehModel"}})],1),i("div",{staticClass:"col-12 col-md-4"},[i("config-input",{attrs:{id:"vehVin",label:"Vin",typeinput:"text",placeholder:"Vin",required:"false",valor:e.vehVin},model:{value:e.vehVin,callback:function(t){e.vehVin="string"===typeof t?t.trim():t},expression:"vehVin"}})],1),i("div",{staticClass:"col-12 col-md-4"},[i("config-input",{attrs:{id:"vehAnio",label:"Año",typeinput:"text",placeholder:"Año",required:"false",valor:e.vehAnio},model:{value:e.vehAnio,callback:function(t){e.vehAnio="string"===typeof t?t.trim():t},expression:"vehAnio"}})],1),i("div",{staticClass:"col-12 col-md-4"},[i("config-input",{attrs:{id:"vehPlacas",label:"Placas",typeinput:"text",placeholder:"Placas",required:"false",valor:e.vehPlacas},model:{value:e.vehPlacas,callback:function(t){e.vehPlacas="string"===typeof t?t.trim():t},expression:"vehPlacas"}})],1),i("div",{staticClass:"col-12 col-md-4"},[i("config-input",{attrs:{id:"vehColor",label:"Color",typeinput:"text",placeholder:"Color",required:"false",valor:e.vehColor},model:{value:e.vehColor,callback:function(t){e.vehColor="string"===typeof t?t.trim():t},expression:"vehColor"}})],1),i("div",{staticClass:"col-12 col-md-4"},[i("config-input",{attrs:{id:"vehPais",label:"País",typeinput:"text",placeholder:"País",required:"false",valor:e.vehPais},model:{value:e.vehPais,callback:function(t){e.vehPais="string"===typeof t?t.trim():t},expression:"vehPais"}})],1),i("div",{staticClass:"col-12 col-md-4"},[i("config-input",{attrs:{id:"vehRegion",label:"Estado/Región",typeinput:"text",placeholder:"Estado/Región",required:"false",valor:e.vehRegion},model:{value:e.vehRegion,callback:function(t){e.vehRegion="string"===typeof t?t.trim():t},expression:"vehRegion"}})],1),i("div",{staticClass:"col-12 col-md-4"},[i("config-input",{attrs:{id:"vehSeguro",label:"Seguro",typeinput:"text",placeholder:"Seguro",required:"false",valor:e.vehSeguro},model:{value:e.vehSeguro,callback:function(t){e.vehSeguro="string"===typeof t?t.trim():t},expression:"vehSeguro"}})],1),i("div",{staticClass:"col-12 col-md-4"},[i("config-input",{attrs:{id:"vehNumSeguro",label:"# seguro",typeinput:"text",placeholder:"# seguro",required:"false",valor:e.vehNumSeguro},model:{value:e.vehNumSeguro,callback:function(t){e.vehNumSeguro="string"===typeof t?t.trim():t},expression:"vehNumSeguro"}})],1),i("div",{staticClass:"col-12"},[i("config-input",{attrs:{id:"vehNotas",label:"Notas",typeinput:"text",placeholder:"Notas",required:"false",valor:e.vehNotas},model:{value:e.vehNotas,callback:function(t){e.vehNotas="string"===typeof t?t.trim():t},expression:"vehNotas"}})],1)]):e._e(),e._m(3)]),i("div",{staticClass:"col-12 float-right"},[i("button",{staticClass:"btn btn-secondary shadow-2 mb-4 float-left",on:{click:function(t){return e.cancel()}}},[e._v("CANCELAR")]),"nuevo"===this.$store.state.modal.datosDymanic.accion?i("button",{staticClass:"btn btn-primary shadow-2 mb-4 float-right",attrs:{id:"btnRegistrar",type:"submit"},on:{click:function(t){return e.SendForm()}}},[e._v("REGISTRAR")]):e._e(),"editar"===this.$store.state.modal.datosDymanic.accion&&0==this.$store.state.StoreCliente?i("button",{staticClass:"btn btn-primary shadow-2 mb-4 float-right",attrs:{id:"btnEnditar",type:"submit"},on:{click:function(t){return e.SendForm()}}},[e._v("EDITAR")]):e._e()])])])},s=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"col-12"},[i("h5",{staticClass:"float-left"},[e._v("Cliente")]),i("hr",{staticStyle:{"margin-top":"2rem"}})])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"col-12"},[i("h5",{staticClass:"float-left"},[e._v("Conductor")]),i("hr",{staticStyle:{"margin-top":"2rem"}})])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"col-12"},[i("h5",{staticClass:"float-left"},[e._v("Vehículo")]),i("hr",{staticStyle:{"margin-top":"2rem"}})])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"row"},[i("div",{staticClass:"col-12",attrs:{id:"alertAdminGps"}})])}],o=(i("96cf"),i("3b8d")),r=i("08e6"),l=i("d3e3"),n={name:"ModalFormGps",mixins:[r["a"]],data:function(){return{messageInfoImei:null,exampleImei:null,marca:"",model:"",imei:null,notas:null,listFactories:[],listmodels:[],alias:null,cliente:"",nameDriver:null,phoneDriver:null,vehMarca:null,vehModel:null,vehVin:null,vehAnio:0,vehPlacas:null,vehColor:null,vehPais:null,vehRegion:null,vehSeguro:null,vehNumSeguro:null,vehNotas:null,comportamiento:1,model2:null,accion:this.$store.state.modal.datosDymanic.accion,sims:null,valuePattern:null,onkeypress:null}},created:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.$store.state.loader=!0,this.factories(),console.debug("ACCION",this.accion),"editar"==this.accion&&this.getDeviceInfo();case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),mounted:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.$store.state.loader=!1,null!=this.marca&&this.modelGPS();case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),destroyed:function(){},methods:{factories:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getRequest("catalogs/devices/factories");case 2:t=e.sent,!0===t.success&&(this.listFactories=t.data.deviceFactories);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),modelGPS:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.listmodels=[],this.model="",this.imei=null,this.messageInfoImei=null,this.exampleImei=null,null==this.marca&&(this.marca=null),null!=this.model2&&(console.debug("MODEL2",this.model2,this.marca),this.model2!=this.marca&&(this.model="")),3==this.marca?(this.messageInfoImei="El imei de los GPS SUNTECH se compone por 15 o 16 dígitos, de los cuales solo se ingresan los últimos 9 dígitos, menos el último.",this.exampleImei="xxxxx1-23-456789-x",this.onkeypress="return event.charCode >= 48 && event.charCode <= 57",this.valuePattern="9"):(this.messageInfoImei="",this.exampleImei="",this.onkeypress=null,this.valuePattern=null),console.debug("entra modelo",this.marca),e.next=11,this.getRequest("catalogs/devices/factories/"+this.marca+"/models");case 11:t=e.sent,console.debug("RESP",t),!0===t.success&&(this.listmodels=t.data.deviceModels);case 14:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getDeviceInfo:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getRequest("devices/".concat(this.$store.state.modal.datosDymanic.id));case 2:t=e.sent,i=t.data.device,console.debug(i),this.marca=i.deviceBrandID,this.modelGPS(),this.imei=i.imei,this.notas=i.notas,this.alias=i.alias,this.cliente=i.clientID,this.nameDriver=i.driver,this.phoneDriver=i.driverPhone,this.vehMarca=i.vehicleBrand,this.vehModel=i.vehicleModel,this.vehVin=i.vehicleVIN,this.vehAnio=i.vehicleYear,this.vehPlacas=i.carplate,this.vehColor=i.vehicleColor,this.vehPais=i.country,this.vehRegion=i.region,this.vehSeguro=i.insurance,this.vehNumSeguro=i.insuranceID,this.vehNotas=i.vehicleNotes,this.simID=i.simID,this.model=i.deviceModelID,this.model2=i.deviceBrandID;case 27:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),SendForm:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,i,a,s,o,r,n,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(""==this.marca||""==this.model||null==this.imei){e.next=41;break}if(this.$store.state.loader=!0,"nuevo"!=this.accion){e.next=40;break}return t={modelID:this.model,clientID:this.cliente,markerTypeID:1,imei:this.imei,alias:"",notes:this.notas},console.debug("this.$store.state.modal.datosDymanic.idCliente",this.$store.state.modal.datosDymanic.idCliente),0!=this.$store.state.modal.datosDymanic.idCliente&&(t.clientID=this.$store.state.modal.datosDymanic.idCliente),i={brand:this.vehMarca,model:this.vehModel,year:this.vehAnio,vin:this.vehVin,colour:this.vehColor,carPlate:this.vehPlacas,country:this.vehPais,region:this.vehRegion,insurance:this.vehSeguro,insuranceID:this.vehNumSeguro,notes:this.vehNotas},a={name:this.nameDriver,phone:this.phoneDriver},s={},s["device"]=t,s["vehicle"]=i,s["driver"]=a,console.debug("DATOS",s),e.next=15,this.postRequest("devices",s);case 15:if(o=e.sent,!0!==o.success){e.next=25;break}this.$store.state.loader=!1,$("#btnRegistrar").attr("disabled","disabled"),$("#alertAdminGps").html("<div class='alert alert-success alert-dismissible fade show' role='alert' style='text-align: initial;'><strong>Excelente! </strong>Se ha registrado el dispositivo<button type='button' class='close' data-dismiss='alert' aria-label='Close' style='padding-top: 0px;'><span aria-hidden='true'>&times;</span></button></div>"),setTimeout((function(){$("#alertAdminGps").html(""),l["a"].$emit("GET_Graficas",1),$("#btnRegistrar").removeAttr("disabled")}),3e3),this.imei=null,this.notas=null,e.next=40;break;case 25:$("#btnRegistrar").removeAttr("disabled"),this.$store.state.loader=!1,r="",e.t0=o.error.title,e.next="IMEI_EXISTS"===e.t0?31:"VIN_EXISTS"===e.t0?33:"UNAUTHORIZED"===e.t0?35:37;break;case 31:return r="El IMEI ya existe",e.abrupt("break",39);case 33:return r="El VIN ya existe",e.abrupt("break",39);case 35:return r="No cuenta con los permisos para realizar la accion",e.abrupt("break",39);case 37:return r="No se ha registrado el dispositivo",e.abrupt("break",39);case 39:$("#alertAdminGps").html("<div class='alert alert-danger alert-dismissible fade show' role='alert' style='text-align: initial;'><strong>Error! </strong>".concat(r,"<button type='button' class='close' data-dismiss='alert' aria-label='Close' style='padding-top: 0px;'><span aria-hidden='true'>&times;</span></button></div>"));case 40:"editar"==this.accion&&(n={modelo:this.model,notes:this.notas},s={},s["device"]=n,this.$store.state.loader=!0,console.debug("DATOS EDIT",s),$("#btnEnditar").attr("disabled","disabled"),c={datos:s,item:this.$store.state.modal.datosDymanic.item,sender:this.$store.state.modal.datosDymanic.sender},l["a"].$emit("editar_devices",c),l["a"].$emit("GET_Graficas",1),this.imei=null,this.notas=null,this.cancel());case 41:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),cancel:function(){this.$store.commit("CLEAR_MODAL_DINAMIC"),$("#modalAdminForm").modal("hide")}},computed:{messageInfo:function(){return this.messageInfoImei},getMarca:function(){return this.marca}}},c=n,d=i("2877"),u=Object(d["a"])(c,a,s,!1,null,null,null);t["default"]=u.exports}}]);
//# sourceMappingURL=chunk-2d216420.12f86481.js.map