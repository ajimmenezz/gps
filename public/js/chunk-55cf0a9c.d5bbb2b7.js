(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-55cf0a9c"],{"6cbd":function(t,e,n){},d8e1:function(t,e,n){"use strict";var a=n("6cbd"),o=n.n(a);o.a},dc30:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"card-body"},[n("div",{attrs:{id:"contactos"}},[n("div",{staticClass:"row"},[n("div",{staticClass:"col-12"},[n("data-table",{ref:"table",attrs:{showEditButton:!0,showWatchButton:!1,showDeleteButton:!0,showIndex:!1},on:{OnWatch:t.OnWatch,OnEdit:t.OnEdit,OnDelete:t.OnDelete}})],1),t.isEmptyContacts?n("div",{staticClass:"col-12"},[t._v("Sin contactos")]):t._e(),n("div",{staticClass:"col-12",staticStyle:{"margin-top":"40px"},attrs:{id:"alertasAD"}}),n("div",{staticClass:"col-12 ",staticStyle:{"margin-top":"15px"}},[n("button",{staticClass:"btn btn-primary shadow-2 mb-4 float-right",attrs:{id:"agregarContac",type:"button"},on:{click:function(e){return t.modalContactCreate()}}},[t._v("Agregar contacto")])])])])])},o=[],s=(n("7f7f"),n("ac6a"),n("96cf"),n("3b8d")),i=n("08e6"),c=n("511d"),r=n("d3e3"),l=n("5e83"),u=n("e3a0"),d=n("a9b0"),h=n("862e"),f={name:"dataTableCuenta",mixins:[i["a"],c["a"]],components:{dataTable:d["a"]},data:function(){return{cuenta:null,email:null,statusLegal:"",labelLegal:null,labelRFC:null,nameLegal:null,rfc:null,pais:null,region:null,codep:null,notas:"",contactos:[],contactosFine:[],addres:null,catLegalStatus:[],catTipoContact:[],id:0,seccion:this.$route.params.id,title:null,zonaH:14,listZonaHoraria:[],visabled:!0,accionT:this.$store.state.modal.datosDymanic.accion,active:null,setDisabled:!0,idCliente:null,resultado:!1,idInp:"input",files:[],Getlogo:localStorage.getItem("imgLogo")}},created:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.debug("CREATED_INICIO"),t.next=3,this.getInfoMiPerfil();case 3:console.debug("CREATED_FIN"),this.catPeople();case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),mounted:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return $("#containerPrincipal").css({"margin-left":this.$store.state.widthMenu}),$("#containerPrincipal").css({"margin-top":this.$store.state.topMenu}),t.next=4,r["a"].$emit("NAVBAR_MenuSimple",this.$store.state.seccionMenu);case 4:return this.$store.state.submenuActive="config",this.$store.state.itemSubmenuActive="itemPerfil",t.next=8,r["a"].$emit("NAVBAR_MenuOpciones","config","itemPerfil");case 8:this.title=" Mi cuenta",this.suscribeToDeviceEvents(),this.$store.state.loader=!1;case 11:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),destroyed:function(){this.unsuscribreToDeviceEvents()},methods:{catPeople:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){var e,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.getRequest("catalogs/people");case 2:e=t.sent,n=e.data.peopleTypes,this.catTipoContact=n;case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),suscribeToDeviceEvents:function(){var t=this;r["a"].$on("GET_list_contactos",(function(e){t.getInfoMiPerfil(),$("#legales-tab").removeClass("active"),$("#contactos-tab").addClass("active")})),r["a"].$on("agregar_contactos",(function(e){t.agregarContacto(e),$("#legales-tab").removeClass("active"),$("#contactos-tab").addClass("active")})),r["a"].$on("edit_contactos",(function(e){t.editarContacto(e),$("#legales-tab").removeClass("active"),$("#contactos-tab").addClass("active")})),r["a"].$on("Delete_contactos",(function(e){e.accion="eliminar",t.eliminarcontac(e)})),r["a"].$on("refresh_dataTable",(function(e){console.debug("EVEN_REFRESH"),t.Refresh()}))},unsuscribreToDeviceEvents:function(){r["a"].$off("GET_list_contactos"),r["a"].$off("agregar_contactos"),r["a"].$off("Delete_contactos"),r["a"].$off("edit_contactos"),r["a"].$off("refresh_dataTable")},modalContactCreate:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.$store.commit("CLEAR_MODAL_DINAMIC"),this.$store.state.loader=!0,e={component:l["a"],datos:{seccion:"contacto"}},t.next=5,this.$store.commit("ADD_COMPONENT_DINAMIC",e);case 5:return t.next=7,this.$store.commit("ADD_COMPONENT_DINAMIC_STATE",!0);case 7:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),getInfoMiPerfil:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){var e,n,a,o=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.debug("GET_INFO_TABLE_INICIO"),this.$store.state.loader=!0,this.contactosFine=[],this.contactos=[],t.next=6,this.getRequest("configuration/account");case 6:return e=t.sent,console.debug("GET_INFO_PERFIL",e),n=e.data.customer,this.active=n.active,this.cuenta=n.account,this.idCliente=n.id,a=n.contacts,console.debug("CONTACTOS",a),a.forEach((function(t){console.debug("PHONE_CELL",t.phone,t.cel),""!=t.phone&&null!=t.phone||(console.debug("VACIO_PHONE"),t.phone=null),t.cel==""-t.cel==null&&(console.debug("VACIO_CEL"),t.cel=null),o.contactos.push({id:t.id,idC:t.id,name:t.name,phone:t.phone,cel:t.cel,email:t.email,tipo:t.contactType,notes:t.notes}),o.contactosFine.push({id:t.id,idC:t.id,type:t.contactTypeID,name:t.name,phone:t.phone,cel:t.cel,email:t.email,notes:t.notes})})),this.$store.state.loader=!1,console.debug("GET_INFO_TABLE_FIN"),this.resultado=!0,t.next=20,this.changeHeaderTable();case 20:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),changeHeaderTable:function(){this.headers=[{title:"Contacto",key:"name",default:""},{title:"Tipo",key:"tipo",default:""},{title:"Tel√©fono",key:"phone",default:"-"},{title:"Celular",key:"cel",default:"-"},{title:"Correo",key:"email",default:""}],this.rows=this.contactos,console.debug("DATOS_ROWS",this.rows),this.$refs.table.Render(this.headers,this.rows),this.Refresh()},agregarContacto:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(e){var n,a,o,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(console.debug("DA ",e," ta"),"editar"!=e.accion){t.next=7;break}this.$store.state.loader=!1,this.$refs.table.AddRow(e),this.contactos.push(e),t.next=17;break;case 7:return n=e,a={contactType:n.type,name:n.name,phone:n.phone,cel:n.cel,email:n.email,notes:n.notes},o={},o["contact"]=a,console.debug("DATOOS",o),t.next=14,this.postRequest("accounts/contacts",o);case 14:s=t.sent,console.debug("DATOOS_REQUEST",s),!0===s.success?(this.$store.state.loader=!1,n.id=s.data.contactID,n.idC=s.data.contactID,this.$refs.table.AddRow(n),this.contactos.push(e)):(this.$store.state.loader=!1,$("#alertasAD").html("<div class='alert alert-danger alert-dismissible fade show' role='alert' style='text-align: initial;'><strong>Error, </strong>No se ha agregado el contacto</div>"),setTimeout((function(){$("#alertasAD").html("")}),5e3));case 17:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),Refresh:function(){console.debug("data_REFRESH"),this.$refs.table.Refresh()},OnWatch:function(t,e){alert("WATCH: ".concat(t.name," ").concat(t.age," ").concat(t.country))},OnEdit:function(t,e){this.modalEditContact(t,e)},OnDelete:function(t,e){console.debug("DELETE: ".concat(t.name," ").concat(t.id," ").concat(t.tipo)),console.debug("DELETE row",e,t),this.modalEliminarcontac(t.id,e)},eliminarcontac:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(e){var n,a,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(console.debug("DATA_DELETE",e),"editar"!=e.accion){t.next=10;break}this.$store.state.loader=!1,a=0,this.contactos.filter((function(t,o){if(t.id==e.id)return n=o,a=t,!0})),console.debug("TIPO",a),this.contactos.splice(n,1),this.$refs.table.RemoveRow(e.sender),t.next=14;break;case 10:return t.next=12,this.deleteRequest("accounts/contacts/"+e.id);case 12:o=t.sent,!0===o.success?(this.$store.state.loader=!1,a=0,this.contactos.filter((function(t,o){if(t.id==e.id)return n=o,a=t,!0})),console.debug("TIPO",a),this.contactos.splice(n,1),this.$refs.table.RemoveRow(e.sender)):(this.$store.state.loader=!1,$("#alertasAD").html("<div class='alert alert-danger alert-dismissible fade show' role='alert' style='text-align: initial;'><strong>Error, </strong>No se ha eliminado el contacto</div>"),setTimeout((function(){$("#alertasAD").html("")}),5e3));case 14:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),editarContacto:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(e){var n,a,o,s,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.debug("DATA_EDIT",e),e.data.accion="editar",e.accion="editar",n=e.data,a={contactType:n.tipo,name:n.name,phone:n.phone,cel:n.cel,email:n.email,notes:n.notes},o={},o["contact"]=a,console.debug("DATOOS",o),t.next=10,this.putRequest("contact/"+n.id,o);case 10:s=t.sent,!0===s.success?(this.$store.state.loader=!1,this.eliminarcontac(e),i=0,this.catTipoContact.filter((function(t,n){if(t.id===e.data.tipo)return n,i=t,!0})),e.data.tipo=i.name,this.agregarContacto(e.data)):(this.$store.state.loader=!1,$("#alertasAD").html("<div class='alert alert-danger alert-dismissible fade show' role='alert' style='text-align: initial;'><strong>Error, </strong>No se ha agregado el contacto</div>"),setTimeout((function(){$("#alertasAD").html("")}),5e3));case 12:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),modalEditContact:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(e,n){var a,o,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.debug("CLICK_EDIT",e),this.$store.commit("CLEAR_MODAL_DINAMIC"),this.$store.state.loader=!0,a=0,this.contactos.filter((function(t,n){if(t.id==e.id)return n,a=t,!0})),o=0,this.catTipoContact.filter((function(t,e){if(t.name===a.tipo)return e,o=t,!0})),console.debug(a,"MODAL_CONTAT",this.catTipoContact),console.debug("TIPO_MODAL_EDIT",o),a.tipoId=o.id,s={component:h["a"],datos:{seccion:"contacto",data:e,sender:n,dataContact:a}},t.next=13,this.$store.commit("ADD_COMPONENT_DINAMIC",s);case 13:return t.next=15,this.$store.commit("ADD_COMPONENT_DINAMIC_STATE",!0);case 15:case"end":return t.stop()}}),t,this)})));function e(e,n){return t.apply(this,arguments)}return e}(),modalEliminarcontac:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(e,n){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.$store.commit("CLEAR_MODAL_DINAMIC"),this.$store.state.loader=!0,a={component:u["a"],datos:{seccion:"contacto",id:e,sender:n}},t.next=5,this.$store.commit("ADD_COMPONENT_DINAMIC",a);case 5:return t.next=7,this.$store.commit("ADD_COMPONENT_DINAMIC_STATE",!0);case 7:case"end":return t.stop()}}),t,this)})));function e(e,n){return t.apply(this,arguments)}return e}()},computed:{Getdisabled:function(){return this.setDisabled},getShowTable:function(){return this.resultado},getContactos:function(){return this.contactos},isEmptyContacts:function(){return $.isEmptyObject(this.contactos)},logoGet:function(){return this.Getlogo}}},m=f,p=(n("d8e1"),n("2877")),g=Object(p["a"])(m,a,o,!1,null,"038760ba",null);e["default"]=g.exports}}]);
//# sourceMappingURL=chunk-55cf0a9c.d5bbb2b7.js.map