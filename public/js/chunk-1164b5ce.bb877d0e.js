(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1164b5ce"],{"47c4":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:" row m-r-5"},[t._m(0),t._m(1),i("div",{staticClass:" col-12",staticStyle:{"margin-top":"25px"}},[i("div",{staticClass:"card"},[i("div",{staticClass:"card-body"},[i("data-table",{ref:"table",attrs:{showEditButton:!0,showWatchButton:!1,showDeleteButton:!0,showActiveButton:!0,showIndex:!0},on:{OnWatch:t.OnWatch,OnEdit:t.OnEdit,OnDelete:t.OnDelete,onActive:t.onActive}}),i("div",{staticClass:"col-12 ",staticStyle:{"margin-top":"15px"}},[i("router-link",{attrs:{to:"userRegisterM"}},[i("button",{staticClass:"btn btn-primary shadow-2 mb-4 float-right cssToolTipp",attrs:{type:"button"}},[t._v("Agregar usuario\n                          "),i("p",{staticStyle:{top:"25px !important",right:"10% !important"}},[t._v("Nuevo Usuario")])])])],1)],1)])])])},n=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"col-12 float-left"},[i("h4",{staticClass:"float-left",staticStyle:{"font-size":"20px","padding-bottom":"10px"}},[i("b",[t._v("Usuarios")])])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"col-12 float-left",staticStyle:{"margin-top":"-18px"}},[i("h6",[t._v("Podrás crear, consultar, editar y eliminar  la información de usuarios.")]),i("hr")])}],a=(i("7f7f"),i("ac6a"),i("96cf"),i("3b8d")),r=i("08e6"),c=i("d3e3"),o=i("e8de"),u=i("0ebe"),l={name:"tablaUsuariosM",mixins:[r["a"]],data:function(){return{listUser:[],table:null}},components:{cModalDelete:o["a"],dataTable:u["a"]},created:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.flistaUsers();case 2:this.table=t.sent;case 3:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),mounted:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.$store.state.submenuActive="config",this.$store.state.itemSubmenuActive="itemUser",t.next=4,c["a"].$emit("NAVBAR_MenuOpciones","config","itemUser");case 4:this.suscribeToDeviceEvents(),$("#containerPrincipal").css({"margin-left":this.$store.state.widthMenu}),$("#containerPrincipal").css({"margin-top":this.$store.state.topMenu});case 7:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),beforeDestroy:function(){this.unsuscribreToDeviceEvents()},methods:{getListUser:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(){var e,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.getRequest("users");case 2:e=t.sent,!0===e.success&&(i=e.data.users),this.listUser=i;case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),flistaUsers:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(){var e,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.getRequest("users");case 2:return e=t.sent,!0===e.success&&(i=e.data.users),this.listUser=i,t.next=7,this.changeHeaderTable();case 7:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),changeHeaderTable:function(){this.headers=[{title:"Usuario",key:"username",default:""},{title:"Estado",key:"activeDiv",default:"-",priority:1},{title:"Fecha creación",key:"creationTimestamp",default:""},{title:"Tipo",key:"tipo",default:"-",priority:5},{title:"Correo",key:"email",default:"-",priority:5}],this.listUser.forEach((function(t){1==t.active&&(t.activeDiv='  <div class="form-group" >\n                                        <div class="switch switch-primary d-inline m-r-10 ActiveAction">\n                                            <input class="ActiveAction" type="checkbox"  :id="switch-p-'.concat(t.id,'" checked>\n                                            <label :for="switch-p-').concat(t.id,'" class="cr"></label>\n                                        </div><br>\n                                        <small  >Activo</small>\n                                    </div>')),0==t.active&&(t.activeDiv='<div class="form-group" >\n                                      <div class="switch switch-primary d-inline m-r-10 ActiveAction">\n                                          <input class="ActiveAction" type="checkbox"  :id="switch-p-'.concat(t.id,'"  >\n                                          <label :for="switch-p-').concat(t.id,'" class="cr"></label>\n                                      </div><br>\n                                      <small  >Suspendido</small>\n                                  </div>')),t.creationTimestamp&&(t.creationTimestamp=moment(1e3*t.creationTimestamp).format("DD-MM-YYYY")),1==t.userType&&(t.tipo="Cliente"),2==t.userType&&(t.tipo="Asociado"),3==t.userType&&(t.tipo="Distribuidor")})),console.debug(this.listUser,"DATOS_list"),this.rows=this.listUser,console.debug("DATOS_ROWS",this.rows),this.$refs.table.Render(this.headers,this.rows),this.Refresh()},Refresh:function(){console.debug("data_REFRESH"),this.$refs.table.Refresh()},OnWatch:function(t,e){console.debug("WATCH: ".concat(t.name," ").concat(t.id))},OnEdit:function(t,e){console.debug("onEdit: ".concat(t.name," ").concat(t.username)),this.editar(t.id)},OnDelete:function(t,e){console.debug("DELETE: ".concat(t.name," ").concat(t.id," ")),console.debug("DELETE row",e,t),this.eliminarModal(t,e)},onActive:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(e,i){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.debug("ONaCTIVE: ".concat(e.name," ").concat(e.id," ").concat(e.tipo)),console.debug("ONaCTIVE row",i,e),this.suspender(e.id,e.active),t.next=5,this.clearTable(e);case 5:case"end":return t.stop()}}),t,this)})));function e(e,i){return t.apply(this,arguments)}return e}(),editar:function(t){this.$store.state.loader=!0,this.$router.push({name:"userUpdate",params:{accion:"editar",id:t}})},eliminarModal:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(e,i){var s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.$store.commit("CLEAR_MODAL_DINAMIC"),s={component:o["a"],datos:{item:e,sender:i}},t.next=4,this.$store.commit("ADD_COMPONENT_DINAMIC",s);case 4:return t.next=6,this.$store.commit("ADD_COMPONENT_DINAMIC_STATE",!0);case 6:case"end":return t.stop()}}),t,this)})));function e(e,i){return t.apply(this,arguments)}return e}(),eliminar:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(e){var i,s,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.debug("DATA_DELETE",e,e.id),i=e.data,s=i.id,t.next=5,this.deleteRequest("users/"+s);case 5:n=t.sent,!0===n.success?(this.$refs.table.RemoveRow(e.sender),this.getListUser(),this.$store.state.loader=!1,notify("Excelente!","Se ha eliminado al usuario ","top","right","success",10,50)):(this.$store.state.loader=!1,notify("Error!","No se ha eliminado al usuario ","top","right","danger",10,50));case 7:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),suspender:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(e,i){var s,n,a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return s=!0,n="activado",1==i&&(n="suspendido",s=!1),a={status:s},t.next=6,this.putRequest("users/"+e+"/status",a);case 6:r=t.sent,!0===r.success?notify("Excelente!","Se ha "+n+" el usuario ","top","right","success",10,50):notify("Error!","No se ha "+n+" el usuario ","top","right","danger",10,50);case 8:case"end":return t.stop()}}),t,this)})));function e(e,i){return t.apply(this,arguments)}return e}(),clearTable:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(e){var i,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.$refs.table.Clear(),i=0,this.listUser.filter((function(t,s){if(console.debug("ITEM",t),t.id==e.id)return s,i=t,!0})),s=i.active,1==s&&(i.active=0),0==s&&(i.active=1),1==i.active&&(i.activeDiv='  <div class="form-group" >\n                                        <div class="switch switch-primary d-inline m-r-10 ActiveAction">\n                                            <input class="ActiveAction" type="checkbox"  :id="switch-p-'.concat(i.id,'" checked>\n                                            <label :for="switch-p-').concat(i.id,'" class="cr"></label>\n                                        </div><br>\n                                        <small  >Activo</small>\n                                    </div>')),0==i.active&&(i.activeDiv='<div class="form-group" >\n                                      <div class="switch switch-primary d-inline m-r-10 ActiveAction">\n                                          <input class="ActiveAction" type="checkbox"  :id="switch-p-'.concat(i.id,'"  >\n                                          <label :for="switch-p-').concat(i.id,'" class="cr"></label>\n                                      </div><br>\n                                      <small  >Suspendido</small>\n                                  </div>')),i.creationTimestamp&&(i.creationTimestamp=moment(1e3*i.creationTimestamp).format("DD-MM-YYYY")),1==i.userType&&(i.tipo="Cliente"),2==i.userType&&(i.tipo="Asociado"),3==i.userType&&(i.tipo="Distribuidor"),console.debug(this.listUser,"DATOS_list"),this.rows=this.listUser,console.debug("DATOS_ROWS",this.rows),t.next=17,this.$refs.table.AddRows(this.rows);case 17:this.Refresh();case 18:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),cancel:function(){this.$router.push("/users")},suscribeToDeviceEvents:function(){var t=this;c["a"].$on("GET_LIST_users",(function(e){console.debug("BUS_ELIMINAR_USER",e),t.eliminar(e)}))},unsuscribreToDeviceEvents:function(){c["a"].$off("GET_LIST_users")}},computed:{getUserList:function(){return this.listUser}}},d=l,m=(i("8c76"),i("2877")),h=Object(m["a"])(d,s,n,!1,null,null,null);e["default"]=h.exports},"8c76":function(t,e,i){"use strict";var s=i("e8c2"),n=i.n(s);n.a},e8c2:function(t,e,i){},e8de:function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"modal fade ",attrs:{id:"modalDelete",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalCenterTitle","aria-hidden":"true"}},[i("div",{staticClass:"modal-dialog modal-dialog-centered ",attrs:{role:"document"}},[i("div",{staticClass:"modal-content"},[i("div",{staticClass:"modal-body "},[i("div",{staticClass:"container"},[t._m(0),i("div",{staticClass:"row",staticStyle:{"margin-top":"20px","margin-bottom":"20px"}},[i("div",{staticClass:"col-1"}),i("div",{staticClass:"col-10"},[i("p",[t._v("¿Estás seguro que deseas eliminar el usuario "),i("b",[t._v(t._s(this.$store.state.modal.datosDymanic.item.username))]),t._v(" ?")])]),i("div",{staticClass:"col-1"})]),i("div",{staticClass:"row"},[i("div",{staticClass:"col-12"},[i("button",{staticClass:"btn btn-outline-primary",attrs:{type:"button","data-dismiss":"modal"}},[t._v("CANCELAR")]),i("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(e){return t.confirmModal()}}},[t._v("ACEPTAR")])])])])]),i("div",{attrs:{id:"alertasUser"}})])])])},n=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"row"},[i("div",{staticClass:"col-12 float-left",staticStyle:{color:"#007bff"}},[i("h5",{staticClass:"modal-title",staticStyle:{color:"#007bff"},attrs:{id:"exampleModalCenterTitle"}},[t._v("Eliminar usuario")]),i("hr",{staticStyle:{"margin-top":"-1px",background:"#007bff"}})])])}],a=(i("96cf"),i("3b8d")),r=i("08e6"),c=i("d3e3"),o={name:"ModalEliminarUsuario",mixins:[r["a"]],data:function(){return{}},mounted:function(){$("#modalDelete").modal("show")},destroyed:function(){},methods:{confirmModal:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:$("#modalDelete").modal("hide"),e={data:this.$store.state.modal.datosDymanic.item,sender:this.$store.state.modal.datosDymanic.sender},c["a"].$emit("GET_LIST_users",e);case 3:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),cancel:function(){$("#modalDelete").modal("hide");this.$store.state.modal.datosDymanic.seccion;this.$store.commit("CLEAR_MODAL_DINAMIC"),this.$router.push("/ListTableDistrobuitor")}},computed:{}},u=o,l=i("2877"),d=Object(l["a"])(u,s,n,!1,null,null,null);e["a"]=d.exports}}]);
//# sourceMappingURL=chunk-1164b5ce.bb877d0e.js.map