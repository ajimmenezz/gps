{"version":3,"sources":["webpack:///./src/views/Login/Form_recovery_password.vue?08f0","webpack:///src/views/Login/Form_recovery_password.vue","webpack:///./src/views/Login/Form_recovery_password.vue?495a","webpack:///./src/views/Login/Form_recovery_password.vue?732a","webpack:///./src/mixins/ValidateVariables.js","webpack:///./src/mixins/Login.js","webpack:///./src/views/Login/Form_recovery_password.vue?c2a7"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_v","_e","attrs","logoGet","on","$event","preventDefault","model","value","callback","$$v","passw","trim","expression","confirmPassw","savePassword","_m","staticRenderFns","staticStyle","name","mixins","Login","data","token","$route","params","userRecover","visibleChangePassw","Getlogo","localStorage","getItem","mounted","validateToken","methods","$store","state","apiUrl","isValidateToken","datos","loader","checkPass","ValidatePassword","console","debug","changePassword","$","html","computed","loginFirst","getters","getloginFirstTime","isVisibleChangePassw","component","ValidateVariables","confirmPass","length","mayuscula","minuscula","numero","caracter_raro","i","charCodeAt","credentials","datosparams","Promise","res","rej","Axios","get","url","then","response","catch","err","login","user","password","recover","email","log","defaults","headers","common","put"],"mappings":"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","file":"js/chunk-bd327926.38326e03.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[(_vm.isVisibleChangePassw)?_c('div',{staticClass:\"auth-wrapper aut-bg-img-side cotainer-fiuid align-items-stretch\"},[_c('div',{staticClass:\"row align-items-center w-100 align-items-stretch bg-white\"},[_c('div',{staticClass:\"d-none d-lg-flex col-lg-8 login-img-bg align-items-center d-flex justify-content-center\"},[_c('div',{staticClass:\"col-md-8\"},[_c('h5',{staticClass:\"text-white mb-5\"},[_vm._v(\" \")]),(_vm.loginFirst)?_c('h5',{staticClass:\"text-white mb-5\"},[_vm._v(\"Hemos detectado que es la primera vez que ingresas.\"),_c('br'),_vm._v(\" Por seguridad, \"),_c('b',[_vm._v(\"Favor de cambiar su contraseña\")]),_vm._v(\", para continuar.\")]):_vm._e()])]),_c('div',{staticClass:\"col-lg-4 align-items-stret h-100 align-items-center d-flex justify-content-center\"},[_c('div',{staticClass:\" auth-content text-center\"},[_c('div',{staticClass:\"mb-4\"},[_c('img',{staticClass:\"img-fluid\",attrs:{\"src\":(_vm.logoGet + \"logo.png\")}})]),_c('h3',{staticClass:\"mb-4\"},[_vm._v(\"Cambiar contraseña\")]),_c('form',{attrs:{\"autocomplete\":\"off\"},on:{\"submit\":function($event){$event.preventDefault();}}},[_c('div',{staticClass:\"col-md-12\"},[_c('config-input',{attrs:{\"id\":\"passw\",\"label\":\"null\",\"typeinput\":\"password\",\"placeholder\":\"Contraseña nueva\",\"required\":\"true\"},model:{value:(_vm.passw),callback:function ($$v) {_vm.passw=(typeof $$v === 'string'? $$v.trim(): $$v)},expression:\"passw\"}})],1),_c('div',{staticClass:\"col-md-12\"},[_c('config-input',{attrs:{\"id\":\"confirmPassw\",\"label\":\"null\",\"typeinput\":\"password\",\"placeholder\":\"Confirma contraseña\",\"required\":\"true\"},model:{value:(_vm.confirmPassw),callback:function ($$v) {_vm.confirmPassw=(typeof $$v === 'string'? $$v.trim(): $$v)},expression:\"confirmPassw\"}}),_c('div',{attrs:{\"id\":\"alertas\"}})],1),_c('button',{staticClass:\"btn btn-primary shadow-2 mb-4\",on:{\"click\":function($event){return _vm.savePassword()}}},[_vm._v(\"GUARDAR\")])]),_vm._m(0)])])])]):_vm._e()])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"col-sm-12\",staticStyle:{\"text-align\":\"justify\",\"color\":\"#888\"}},[_c('p',[_c('b',[_vm._v(\"Nota: \")]),_vm._v(\" La contraseña debe contener como minimo 8 caracteres (entre ellos: mayúsculas, minúculas, números y caracteres especiales (.-#$&%))\")])])])}]\n\nexport { render, staticRenderFns }","<template>\r\n    <div>\r\n\r\n      <div class=\"auth-wrapper aut-bg-img-side cotainer-fiuid align-items-stretch\" v-if=\"isVisibleChangePassw\">\r\n        <div class=\"row align-items-center w-100 align-items-stretch bg-white\">\r\n            <div class=\"d-none d-lg-flex col-lg-8 login-img-bg align-items-center d-flex justify-content-center\">\r\n\r\n                <div class=\"col-md-8\">\r\n                    <h5 class=\"text-white mb-5\">&nbsp;</h5>\r\n\r\n                    <h5 class=\"text-white mb-5\" v-if=\"loginFirst\">Hemos detectado que es la primera vez que ingresas.</br> Por seguridad, <b>Favor de cambiar su contraseña</b>, para continuar.</h5>\r\n                </div>\r\n\r\n            </div>\r\n            <div class=\"col-lg-4 align-items-stret h-100 align-items-center d-flex justify-content-center\">\r\n                <div class=\" auth-content text-center\">\r\n\r\n                    <!-- <div class=\"row\" v-if=\"loginFirst\">\r\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"col-sm-12\" style=\"background-color: #cce5ff; color: #1c7aa5; border-color: #b9e7fc; text-align: justify;\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<p>Hemos detectado que es la primera vez que ingresas.</br> Por seguridad, <b>Favor de cambiar su contraseña</b>, para continuar.</p>\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t  </div> -->\r\n\r\n                    <div class=\"mb-4\">\r\n                        <img class=\"img-fluid\" :src=\"`${logoGet}logo.png`\">\r\n                    </div>\r\n\r\n                    <h3 class=\"mb-4\">Cambiar contraseña</h3>\r\n\r\n                      <form @submit.prevent autocomplete=\"off\">\r\n\r\n                        <div class=\"col-md-12\">\r\n                          <config-input  id=\"passw\" label=\"null\"  typeinput=\"password\"  placeholder=\"Contraseña nueva\" v-model.trim=\"passw\" required=\"true\"> </config-input>\r\n\r\n                        </div>\r\n\r\n                        <div class=\"col-md-12\">\r\n                          <config-input  id=\"confirmPassw\" label=\"null\"  typeinput=\"password\"  placeholder=\"Confirma contraseña\" v-model.trim=\"confirmPassw\" required=\"true\"> </config-input>\r\n\r\n                            <div id=\"alertas\" ></div>\r\n                        </div>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t<button class=\"btn btn-primary shadow-2 mb-4\" @click=\"savePassword()\">GUARDAR</button>\r\n\r\n                      </form>\r\n\r\n                      <div  class=\"row\" >\r\n                        <div class=\"col-sm-12\" style=\"text-align: justify; color:#888;\">\r\n                          <p><b>Nota: </b> La contraseña debe contener como minimo 8 caracteres (entre ellos: mayúsculas, minúculas, números y caracteres especiales (.-#$&%))</p>\r\n\r\n                        </div>\r\n                      </div>\r\n\r\n                </div>\r\n            </div>\r\n        </div>\r\n      </div>\r\n\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n\r\nimport { Login } from '@/mixins/Login.js'\r\nimport { ValidateVariables } from '@/mixins/ValidateVariables.js'\r\nimport { SecureStorage } from '@/mixins/SecureStorage.js'\r\n/**\r\n * @group Login\r\n * Formulario para recuperar contraseña de acceso\r\n */\r\nexport default {\r\n  name: 'FormularioRecuperarContrasenia',\r\n  mixins: [Login, ValidateVariables, SecureStorage],\r\n  data () {\r\n    return {\r\n      passw: '',\r\n      confirmPassw: '',\r\n      token: this.$route.params.token,\r\n      userRecover: '',\r\n      visibleChangePassw: false,\r\n      Getlogo: localStorage.getItem('imgLogo')\r\n    }\r\n  },\r\n  mounted () {\r\n    this.validateToken()\r\n    this.Getlogo = localStorage.getItem('imgLogo')\r\n  },\r\n  methods: {\r\n    /**\r\n   * @vuese\r\n   * valida que el token del usuario\r\n   */\r\n    validateToken () {\r\n      const datos = {\r\n        'url': this.$store.state.apiUrl,\r\n        'token': this.token\r\n      }\r\n\r\n      this.isValidateToken(datos)\r\n        .then(async (res) => {\r\n          if (res.success === true) {\r\n            this.visibleChangePassw = true\r\n          } else {\r\n            this.$router.push({ name: 'errorValidate' })\r\n          }\r\n        })\r\n        .catch((err) => {\r\n          console.log('error', err)\r\n        })\r\n    },\r\n    /**\r\n   * @vuese\r\n   * Actualiza la contraseña del usuario\r\n   */\r\n    savePassword () {\r\n      if (this.passw !== '' && this.confirmPassw !== '') {\r\n        this.$store.state.loader = true\r\n        var checkPass = this.ValidatePassword(this.passw, this.confirmPassw)\r\n        console.debug(checkPass)\r\n        if (checkPass === 1) {\r\n          const datos = {\r\n            'password': this.passw,\r\n            'url': this.$store.state.apiUrl,\r\n            'token': this.token\r\n          }\r\n\r\n          this.changePassword(datos)\r\n            .then(async (res) => {\r\n              if (res.success === true) {\r\n                this.userRecover = res.data.user\r\n                $('#alertas').html(\"<div class='alert alert-success alert-dismissible fade show' role='alert' style='text-align: initial;'><strong>excelente! </strong>Se ha cambiado la contraseña <button type='button' class='close' data-dismiss='alert' aria-label='Close' style='padding-top: 0px;'><span aria-hidden='true'>&times;</span></button></div>\")\r\n                await setTimeout(this.redirecPage(), 7000)\r\n              } else {\r\n                this.$store.state.loader = false\r\n                $('#alertas').html(\"<div class='alert alert-danger alert-dismissible fade show' role='alert' style='text-align: initial;'><strong>Error! </strong>\" + res.error.message + \"<button type='button' class='close' data-dismiss='alert' aria-label='Close' style='padding-top: 0px;'><span aria-hidden='true'>&times;</span></button></div>\")\r\n              }\r\n            })\r\n            .catch((err) => {\r\n              console.log('error', err)\r\n            })\r\n        }\r\n        if (checkPass === 0) {\r\n          this.$store.state.loader = false\r\n          $('#alertas').html(\"<div class='alert alert-danger alert-dismissible fade show' role='alert' style='text-align: initial;'><strong>Error! </strong>La contraseña debe contener como minimo 8 caracteres (entre ellos: mayúsculas, minúculas, números y caracteres especiales) <button type='button' class='close' data-dismiss='alert' aria-label='Close' style='padding-top: 0px;'><span aria-hidden='true'>&times;</span></button></div>\")\r\n        }\r\n        if (checkPass === 2) {\r\n          this.$store.state.loader = false\r\n          $('#alertas').html(\"<div class='alert alert-danger alert-dismissible fade show' role='alert' style='text-align: initial;'><strong>Error! </strong>Las constraseñas no coinciden <button type='button' class='close' data-dismiss='alert' aria-label='Close' style='padding-top: 0px;'><span aria-hidden='true'>&times;</span></button></div>\")\r\n        }\r\n      }\r\n    },\r\n    /**\r\n   * @vuese\r\n   * Redirige a la la suiene paguina ya sea logeo automatico o volver al inicio\r\n   */\r\n    async redirecPage () {\r\n      console.log('entraredirec', sessionStorage.firstLogin)\r\n      if (sessionStorage.firstLogin !== undefined) {\r\n        if (sessionStorage.firstLogin === 'true' || sessionStorage.firstLogin === true) { // primera vez\r\n          console.debug('redirecHome')\r\n          this.$store.dispatch('showMenu', true)\r\n          // sessionStorage.setItem('logged', true)\r\n          this.sessionSet('logged', true)\r\n          var data = {\r\n            session: {\r\n              isFirstTimeLogin: sessionStorage.firstLogin,\r\n              userType: sessionStorage.UT,\r\n              clientType: sessionStorage.TC\r\n            }\r\n          }\r\n          await this.$store.dispatch('SuccessLogin', data)\r\n          await this.$store.dispatch('loginFirstTime', false)\r\n          this.$store.state.loader = false\r\n          this.$router.push({ name: 'home' })\r\n        } else {\r\n          this.$store.state.loader = false\r\n          // TODO: Poner todas las variables para iniciar sesion correctamente\r\n          // console.debug('redireclogin2')\r\n          // this.sessionSet('logged', true)\r\n          this.$router.push({ name: 'home' })\r\n        }\r\n      } else {\r\n        console.debug('redirecHomeEmail')\r\n        const datos = {\r\n          'user': this.userRecover,\r\n          'password': this.passw,\r\n          'url': process.env.VUE_APP_API_URL\r\n        }\r\n\r\n        this.login(datos)\r\n          .then(async (res) => {\r\n            if (res.success === true) {\r\n              this.sessionSet('token', res.data.session.token)\r\n              this.sessionSet('timezone', res.data.session.timezone)\r\n              this.sessionSet('loginFist', res.data.session.isFirstTimeLogin)\r\n              this.sessionSet('client', res.data.session.client)\r\n              this.sessionSet('user', res.data.session.user)\r\n\r\n              sessionStorage.setItem('firstLogin', res.data.session.isFirstTimeLogin)\r\n              sessionStorage.setItem('TC', res.data.session.clientType)\r\n              sessionStorage.setItem('UT', res.data.session.userType)\r\n\r\n              var result = await this.getlogoUser_login(this.user)\r\n\r\n              this.Getlogo = localStorage.getItem('imgLogo')\r\n              this.$store.state.modaloader.Getlogo = this.Getlogo\r\n\r\n              await this.$store.commit('menuOptions', res.data.session.permissions)\r\n\r\n              await this.$store.dispatch('devices/LOAD_DEVICES', res.data.devices)\r\n\r\n              /* carga array flotillas */\r\n\r\n              var fleets = res.data.fleets\r\n              await this.$store.dispatch('devices/LOAD_FLEETS', fleets)\r\n              this.$store.state.devices.fleets.push({ 'id': null, 'name': 'SIN ASIGNAR', 'selected': false, 'iconCollapse': true })\r\n\r\n              await this.$store.dispatch('SuccessLogin', res.data)\r\n              this.sessionSet('logged', true)\r\n              this.$store.dispatch('showMenu', true)\r\n              await this.$store.dispatch('loginFirstTime', false)\r\n\r\n              this.$store.state.loader = false\r\n              this.$router.push({ name: 'home' })\r\n            } else {\r\n              this.$store.state.loader = false\r\n              var message = ''\r\n              switch (res.error.title) {\r\n                case 'PROVIDER_SUSPEND':\r\n                  message = 'El PROVEEDOR de servicio se encuentra suspendido, por favor comunicate con él para poder acceder a la plataforma.'\r\n                  break\r\n                case 'ACCOUNT_SUSPEND':\r\n                  message = 'La CUENTA se encuentra suspendida, por favor comunicate con soporte.'\r\n                  break\r\n                case 'USER_SUSPEND':\r\n                  message = 'El USUARIO se encuentra suspendido, por favor comunicate con soporte.'\r\n                  break\r\n                default:\r\n                  message = 'El usuario/contraseña son incorrectos.'\r\n                  break\r\n              }\r\n              $('#alertas').html(\"<div class='alert alert-danger alert-dismissible fade show' role='alert' style='text-align: initial;'><strong>Error! </strong>\" + message + \"<button type='button' class='close' data-dismiss='alert' aria-label='Close' style='padding-top: 0px;'><span aria-hidden='true'>&times;</span></button></div>\")\r\n            }\r\n          })\r\n          .catch((err) => {\r\n            console.log('error', err)\r\n          })\r\n      }\r\n    }\r\n\r\n  },\r\n  computed: {\r\n    logoGet () {\r\n      return this.Getlogo\r\n    },\r\n    /**\r\n   * @vuese\r\n   * Ver si es la primera vez que se logea el usuario\r\n   */\r\n    loginFirst () {\r\n      return this.$store.getters.getloginFirstTime\r\n    },\r\n    isVisibleChangePassw () {\r\n      return this.visibleChangePassw\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style >\r\n\r\n  .login-img-bg{\r\n    background-image: url(\"../../assets/img/fondo_login.jpg\");\r\n    background-size: cover;\r\n\r\n    background-position: center;\r\n\r\n  }\r\n\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Form_recovery_password.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Form_recovery_password.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Form_recovery_password.vue?vue&type=template&id=678102a6&\"\nimport script from \"./Form_recovery_password.vue?vue&type=script&lang=js&\"\nexport * from \"./Form_recovery_password.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Form_recovery_password.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","\r\nexport const ValidateVariables = {\r\n  data () {\r\n    return {\r\n\r\n    }\r\n  },\r\n  methods: {\r\n    ValidatePassword: function (passw, confirmPass) {\r\n      if (passw === confirmPass) {\r\n        if (passw.length >= 8) {\r\n          var mayuscula = false\r\n          var minuscula = false\r\n          var numero = false\r\n          var caracter_raro = false\r\n\r\n          for (var i = 0; i < passw.length; i++) {\r\n            if (passw.charCodeAt(i) >= 65 && passw.charCodeAt(i) <= 90) {\r\n              mayuscula = true\r\n            } else if (passw.charCodeAt(i) >= 97 && passw.charCodeAt(i) <= 122) {\r\n              minuscula = true\r\n            } else if (passw.charCodeAt(i) >= 48 && passw.charCodeAt(i) <= 57) {\r\n              numero = true\r\n            } else if (passw.charCodeAt(i) >= 35 && passw.charCodeAt(i) <= 38 || passw.charCodeAt(i) >= 45 && passw.charCodeAt(i) <= 46) {\r\n              caracter_raro = true\r\n            }\r\n          }\r\n          if (mayuscula == true && minuscula == true && caracter_raro == true && numero == true) {\r\n            return 1\r\n          }\r\n        }\r\n        return 0\r\n      } else {\r\n        return 2\r\n      }\r\n    }\r\n  }\r\n\r\n}\r\n","import Axios from 'axios'\r\nimport API from '@/mixins/API'\r\n\r\nexport const Login = {\r\n  data () {\r\n    return {\r\n\r\n    }\r\n  },\r\n  methods: {\r\n    isValidateToken: function (credentials) {\r\n      var datosparams = {\r\n        'token': credentials.token\r\n      }\r\n      return new Promise((res, rej) => {\r\n        Axios.get(credentials.url + 'tokens/validate', { params: datosparams })\r\n          .then((response) => {\r\n            res(response.data)\r\n          })\r\n          .catch((err) => {\r\n            res(err)\r\n          })\r\n      })\r\n    },\r\n    login: function (credentials) {\r\n      var datosparams = {\r\n        'user': credentials.user,\r\n        'password': credentials.password\r\n      }\r\n      return new Promise((res, rej) => {\r\n        Axios.get(credentials.url + 'login', { params: datosparams })\r\n          .then((response) => {\r\n            res(response.data)\r\n          })\r\n          .catch((err) => {\r\n            res(err)\r\n          })\r\n      })\r\n    },\r\n    recover: function (credentials) {\r\n      var datosparams = {\r\n        'email': credentials.email\r\n      }\r\n\r\n      return new Promise((res, rej) => {\r\n        Axios.get(credentials.url + 'login/recover', { params: datosparams })\r\n          .then((response) => {\r\n            console.log('api')\r\n            console.log(response)\r\n            res(response.data)\r\n          })\r\n          .catch((err) => {\r\n            res(err)\r\n          })\r\n      })\r\n    },\r\n    changePassword: function (credentials) {\r\n      Axios.defaults.headers.common['Authorization'] = 'Bearer ' + credentials.token\r\n\r\n      var datosparams = {\r\n        'password': credentials.password\r\n      }\r\n\r\n      return new Promise((res, rej) => {\r\n        Axios.put(credentials.url + 'login/password', datosparams)\r\n          .then((response) => {\r\n            res(response.data)\r\n          })\r\n          .catch((err) => {\r\n            res(err)\r\n          })\r\n      })\r\n    }\r\n\r\n  }\r\n\r\n}\r\n","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Form_recovery_password.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Form_recovery_password.vue?vue&type=style&index=0&lang=css&\""],"sourceRoot":""}