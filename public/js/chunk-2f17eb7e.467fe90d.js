(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2f17eb7e"],{9921:function(e,t,s){"use strict";var i=s("a485"),n=s.n(i);n.a},a485:function(e,t,s){},afc7:function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:" row "},[e._m(0),s("div",{staticClass:" col-12 float-left"},[s("data-table",{ref:"table",attrs:{showEditButton:e.onEditVisible,showWatchButton:!0,showDeleteButton:e.ondeleteVisible,showActiveButton:!1,showIndex:!0},on:{OnWatch:e.OnWatch,OnEdit:e.OnEdit,OnDelete:e.OnDelete}})],1)])},n=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"col-12"},[s("h5",{staticClass:"float-left",staticStyle:{"font-size":"20px","padding-bottom":"10px"}},[s("b",[e._v("Dispositivos GPS")])])])}],a=(s("ac6a"),s("96cf"),s("3b8d")),r=s("08e6"),o=s("e2a2"),c=s("ed73"),l=s("d3e3"),u=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"modal fade ",attrs:{id:"modalConsultaForm",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalCenterTitle","aria-hidden":"true"}},[s("div",{staticClass:"modal-dialog modal-dialog-centered modal-lg ",attrs:{role:"document"}},[s("div",{staticClass:"modal-content"},[e._m(0),s("div",{staticClass:"modal-body float-left"},[e.getDataDevice?s("div",{staticClass:"row"},[s("div",{staticClass:"col-12 col-md-4 mb-4"},[e._v("\n                           Marca: "),s("br"),s("b",[e._v(e._s(e.getDataDevice.deviceBrand))])]),s("div",{staticClass:"col-12 col-md-4 mb-4"},[e._v("\n                           Modelo: "),s("br"),s("b",[e._v(e._s(e.getDataDevice.deviceModel))])]),s("div",{staticClass:"col-12 col-md-4 mb-4"},[e._v("\n                            IMEI: "),s("br"),s("b",[e._v(e._s(e.getDataDevice.imei))])]),s("div",{staticClass:"col-12 col-md-4 mb-4"},[e._v("\n                            Alias: "),s("br"),s("b",[e._v(e._s(e.getDataDevice.alias))])]),s("div",{staticClass:"col-12 col-md-4 mb-4 "},[e._v("\n\n                               Notas: "),s("br"),s("b",[e._v(e._s(e.getDataDevice.notas))])])]):e._e()]),s("div",{staticClass:"modal-footer"},[s("button",{staticClass:"btn btn-secondary",attrs:{type:"button","data-dismiss":"modal"},on:{click:function(t){return e.cancel()}}},[e._v("CANCELAR")])])])])])},d=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"modal-header"},[s("h5",{staticClass:"modal-title",attrs:{id:"exampleModalCenterTitle"}},[e._v("Consultar GPS")]),s("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[s("span",{attrs:{"aria-hidden":"true"}},[e._v("×")])])])}],m={name:"ModalConsultarClientesDistribuidor",mixins:[r["a"]],data:function(){return{dataDevice:null}},created:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getDeviceInfo();case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),mounted:function(){this.$store.state.loader=!1,$("#modalConsultaForm").modal("show")},destroyed:function(){},methods:{getDeviceInfo:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getRequest("devices/".concat(this.$store.state.modal.datosDymanic.id));case 2:t=e.sent,s=t.data.device,console.debug(s),this.dataDevice=s;case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),cancel:function(){this.$store.commit("CLEAR_MODAL_DINAMIC"),$("#modalAdminForm").modal("hide")}},computed:{getDataDevice:function(){return this.dataDevice}}},h=m,v=s("2877"),f=Object(v["a"])(h,u,d,!1,null,null,null),p=f.exports,D=s("a9b0"),b={name:"tablaGps",mixins:[r["a"]],data:function(){return{listDevices:null,ondeleteVisible:!1,onEditVisible:!1}},components:{cModalDelete:c["a"],dataTable:D["a"]},created:function(){this.$store.state.StoreCliente=this.$store.state.modal.datosDymanic.idCliente,0==this.getClientID&&(this.ondeleteVisible=!0,this.onEditVisible=!0),this.getDevices()},mounted:function(){this.$store.state.seccionMenu="almacen",$("#containerPrincipal").css({"margin-left":this.$store.state.widthMenu}),$("#containerPrincipal").css({"margin-top":this.$store.state.topMenu}),this.suscribeToDeviceEvents()},beforeDestroy:function(){this.unsuscribreToDeviceEvents()},methods:{getDevices:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(0!=this.$store.state.StoreCliente){e.next=7;break}return e.next=3,this.getRequest("devices/store");case 3:t=e.sent,!0===t.success&&(this.listDevices=t.data.devices),e.next=12;break;case 7:return s={clientID:this.$store.state.StoreCliente},e.next=10,this.getRequest("devices/store",s);case 10:t=e.sent,!0===t.success&&(this.listDevices=t.data.devices);case 12:return e.next=14,this.changeHeaderTable();case 14:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getListDevices:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(0!=this.$store.state.StoreCliente){e.next=7;break}return e.next=3,this.getRequest("devices/store");case 3:t=e.sent,!0===t.success&&(this.listDevices=t.data.devices),e.next=12;break;case 7:return s={clientID:this.$store.state.StoreCliente},e.next=10,this.getRequest("devices/store",s);case 10:t=e.sent,!0===t.success&&(this.listDevices=t.data.devices);case 12:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),changeHeaderTable:function(){this.headers=[{title:"Imei",key:"imei",default:""},{title:"Alias",key:"alias",default:"-",priority:1},{title:"Compañia teléfonica",key:"carrier",default:"-"},{title:"Teléfono",key:"phone",default:"-",priority:5},{title:"Fecha de creación",key:"fechaCreacion",default:"-",priority:5}],this.listDevices.forEach((function(e){e.fechaCreacion&&(e.fechaCreacion=moment(1e3*e.fechaCreacion).format("DD-MM-YYYY"))})),console.debug(this.listDevices,"DATOS_list"),this.rows=this.listDevices,console.debug("DATOS_ROWS",this.rows),this.$refs.table.Render(this.headers,this.rows),this.Refresh()},Refresh:function(){console.debug("data_REFRESH"),this.$refs.table.Refresh()},OnWatch:function(e,t){console.debug("WATCH: ".concat(e.imei," ").concat(e.alias)),this.consultar(e.id)},OnEdit:function(e,t){console.debug("onEdit: ".concat(e.imei," ").concat(e.alias)),this.modalFormGpsEdit(e,t)},OnDelete:function(e,t){console.debug("DELETE: ".concat(e.imei," ").concat(e.alias," ")),console.debug("DELETE row",t,e),this.eliminar(e,t)},modalFormGps:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.$store.state.loader=!0,t={component:FormGPS,datos:{seccion:"gps",accion:"nuevo"}},this.$store.commit("CLEAR_MODAL_DINAMIC"),e.next=5,this.$store.commit("ADD_COMPONENT_DINAMIC",t);case 5:return e.next=7,this.$store.commit("ADD_COMPONENT_DINAMIC_STATE",!0);case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),modalFormGpsEdit:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t,s){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.$store.state.loader=!0,this.$store.commit("CLEAR_MODAL_DINAMIC"),i={component:o["a"],datos:{seccion:"gps",accion:"editar",id:t.id,sender:s,item:t}},e.next=5,this.$store.commit("ADD_COMPONENT_DINAMIC",i);case 5:return e.next=7,this.$store.commit("ADD_COMPONENT_DINAMIC_STATE",!0);case 7:console.debug("MODAL_EDITAR",this.$store.state.modal.datosDymanic.accion,this.$store.state.modal.datosDymanic.seccion);case 8:case"end":return e.stop()}}),e,this)})));function t(t,s){return e.apply(this,arguments)}return t}(),editarDevice:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.debug("DATOS EDIT",t.datos),e.next=3,this.putRequest("devices/"+this.$store.state.modal.datosDymanic.id,t.datos);case 3:s=e.sent,!0===s.success?(this.$store.state.loader=!1,this.getListDevices(),this.$refs.table.RemoveRow(t.sender),this.$refs.table.AddRow(t.item),notify("Excelente!","Se ha editado el gps ","top","right","success",10,50)):(this.$store.state.loader=!1,notify("Error!","No se ha editado el gps ","top","right","danger",10,50));case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),consultar:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.$store.state.loader=!0,this.$store.commit("CLEAR_MODAL_DINAMIC"),s={component:p,datos:{id:t}},e.next=5,this.$store.commit("ADD_COMPONENT_DINAMIC",s);case 5:return e.next=7,this.$store.commit("ADD_COMPONENT_DINAMIC_STATE",!0);case 7:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),eliminar:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t,s){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.$store.commit("CLEAR_MODAL_DINAMIC"),i={component:c["a"],datos:{ID:t.id,name:t.imei,tipo:"gps",sender:s,data:t}},e.next=4,this.$store.commit("ADD_COMPONENT_DINAMIC",i);case 4:return e.next=6,this.$store.commit("ADD_COMPONENT_DINAMIC_STATE",!0);case 6:case"end":return e.stop()}}),e,this)})));function t(t,s){return e.apply(this,arguments)}return t}(),eliminarDevice:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(null==t.deviceSims){e.next=11;break}if(0==t.comportamiento){e.next=7;break}return e.next=4,this.deleteRequest("devices/"+t.device+"/sim/"+t.deviceSims+"/store/"+t.comportamiento);case 4:s=e.sent,e.next=9;break;case 7:return $("#alertasModalDelete").html("<div class='alert alert-danger alert-dismissible fade show' role='alert' style='text-align: initial;'><strong>Error! </strong>Selecicona que desea hacer con la sims<button type='button' class='close' data-dismiss='alert' aria-label='Close' style='padding-top: 0px;'><span aria-hidden='true'>&times;</span></button></div>"),e.abrupt("return",!1);case 9:e.next=14;break;case 11:return e.next=13,this.deleteRequest("devices/"+t.device+"/sim/0/store/0");case 13:s=e.sent;case 14:console.debug("DATOS",t),!0===s.success?(this.$refs.table.RemoveRow(t.sender),this.getListDevices(),this.$store.state.loader=!1,notify("Excelente!","Se ha eliminado el gps ","top","right","success",10,50)):(this.$store.state.loader=!1,notify("Error!","No se ha eliminado el gps ","top","right","danger",10,50));case 16:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),suscribeToDeviceEvents:function(){var e=this;l["a"].$on("eliminar_devices",(function(t){console.debug("eliminar",t),e.eliminarDevice(t)})),l["a"].$on("editar_devices",(function(t){console.debug("editar",t),e.editarDevice(t)}))},unsuscribreToDeviceEvents:function(){l["a"].$off("eliminar_devices"),l["a"].$off("editar_devices")}},computed:{getClientID:function(){return this.$store.state.StoreCliente}}},g=b,C=(s("9921"),Object(v["a"])(g,i,n,!1,null,null,null));t["default"]=C.exports}}]);
//# sourceMappingURL=chunk-2f17eb7e.467fe90d.js.map