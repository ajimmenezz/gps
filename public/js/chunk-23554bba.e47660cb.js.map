{"version":3,"sources":["webpack:///./src/components/basico/m.autocomplete.vue?8432","webpack:///./src/views/Administrador/Transactions/Sales/productSelector.vue?162e","webpack:///./src/components/basico/m.autocomplete.vue?4679","webpack:///src/components/basico/m.autocomplete.vue","webpack:///./src/components/basico/m.autocomplete.vue?c6ca","webpack:///./src/components/basico/m.autocomplete.vue?cfcd","webpack:///src/views/Administrador/Transactions/Sales/productSelector.vue","webpack:///./src/views/Administrador/Transactions/Sales/productSelector.vue?58a0","webpack:///./src/views/Administrador/Transactions/Sales/productSelector.vue","webpack:///./src/components/basico/m.select.vue?3664","webpack:///src/components/basico/m.select.vue","webpack:///./src/components/basico/m.select.vue?2f38","webpack:///./src/components/basico/m.select.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","ref","attrs","productType","catalog","on","onProductTypeSelected","factory","onFactorySelected","model","onModelSelected","_e","product","store","onProductSelected","class","addProductBtnClass","$event","addProduct","_v","staticRenderFns","staticStyle","_s","title","directives","name","rawName","value","expression","domProps","type","indexOf","_k","keyCode","key","up","down","close","show","autoClearSelection","target","composing","query","_l","match","index","filterby","itemClicked","props","data","Array","required","String","default","resetOnClick","Boolean","itemHeight","selectedItem","selectedIndex","visible","methods","clearSelection","$emit","setTimeout","console","debug","matches","searchItem","length","$refs","input","blur","scrollToItem","optionsList","scrollTop","computed","filter","watch","component","mixins","components","mAutocomplete","mSelect","selected","mounted","getProductTypes","clearProducts","clearModel","id","clearFactory","getFactories","getProducts","getModels","productTypeSelect","nameSelect","$$selectedVal","prototype","call","options","o","map","val","_value","multiple","onChange","item","created"],"mappings":"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","file":"js/chunk-23554bba.e47660cb.js","sourcesContent":["import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./m.autocomplete.vue?vue&type=style&index=0&id=089e06fa&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./m.autocomplete.vue?vue&type=style&index=0&id=089e06fa&scoped=true&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"col-6 col-lg-3\"},[_c('m-select',{ref:\"productTypeSelect\",attrs:{\"data\":_vm.productType.catalog,\"filterby\":\"type\",\"title\":\"Seleccione tipo de producto\"},on:{\"selectionChanged\":_vm.onProductTypeSelected}})],1),_c('div',{staticClass:\"w-100\"}),_c('div',{staticClass:\"col-6 col-lg-3\"},[_c('m-select',{attrs:{\"data\":_vm.factory.catalog,\"filterby\":\"name\",\"title\":\"Seleccione Marca\"},on:{\"selectionChanged\":_vm.onFactorySelected}})],1),(_vm.model.visible)?_c('div',{staticClass:\"col-6 col-lg-3\"},[_c('m-select',{attrs:{\"data\":_vm.model.catalog,\"filterby\":\"name\",\"title\":\"Seleccione Modelo\"},on:{\"selectionChanged\":_vm.onModelSelected}})],1):_vm._e(),_c('div',{staticClass:\"col-6 col-lg-3\"},[_c('m-autocomplete',{attrs:{\"data\":_vm.product.store,\"filterby\":\"id\",\"title\":\"Seleccione producto\"},on:{\"selectionChanged\":_vm.onProductSelected}})],1),_c('div',{staticClass:\"col-6  col-lg-3 align-self-end text-left\"},[_c('button',{staticClass:\"btn\",class:[_vm.addProductBtnClass],on:{\"click\":function($event){return _vm.addProduct()}}},[_vm._v(\"Agregar\")])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"form-group text-left\",staticStyle:{\"margin-bottom\":\"10px\"}},[_c('label',[_vm._v(_vm._s(_vm.title))]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.query),expression:\"query\"}],ref:\"input\",staticClass:\"form-control\",attrs:{\"type\":\"text\",\"placeholder\":\"Seleccione\"},domProps:{\"value\":(_vm.query)},on:{\"keydown\":[function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"up\",38,$event.key,[\"Up\",\"ArrowUp\"])){ return null; }return _vm.up($event)},function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"down\",40,$event.key,[\"Down\",\"ArrowDown\"])){ return null; }return _vm.down($event)},function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.close()}],\"click\":function($event){_vm.show(true), _vm.autoClearSelection()},\"blur\":function($event){return _vm.close()},\"input\":function($event){if($event.target.composing){ return; }_vm.query=$event.target.value}}}),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.visible),expression:\"visible\"}],ref:\"optionsList\",staticClass:\"popover options\"},[_c('ul',{on:{\"mouseleave\":function($event){return _vm.close()}}},_vm._l((_vm.matches),function(match,index){return _c('li',{key:index,domProps:{\"textContent\":_vm._s(match[_vm.filterby])},on:{\"click\":function($event){return _vm.itemClicked(index)}}})}),0)])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <div class=\"form-group text-left\" style=\"margin-bottom:10px;\">\r\n      <label>{{title}}</label>\r\n      <input class=\"form-control\" type=\"text\"\r\n        ref=\"input\"\r\n        v-model=\"query\"\r\n        @keydown.up=\"up\"\r\n        @keydown.down=\"down\"\r\n        @keydown.enter=\"close()\"\r\n        placeholder=\"Seleccione\"\r\n        @click=\"show(true), autoClearSelection()\"\r\n        @blur=\"close()\"\r\n        >\r\n      <div class=\"popover options\" ref=\"optionsList\" v-show=\"visible\">\r\n        <ul @mouseleave=\"close()\">\r\n          <li v-for=\"(match, index) in matches\"\r\n            :key=\"index\"\r\n            @click=\"itemClicked(index)\"\r\n            v-text=\"match[filterby]\"></li>\r\n        </ul>\r\n      </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n// inpiration https://github.com/AfikDeri/VueJS-Autocomplete/blob/master/src/components/Autocomplete.vue\r\nexport default {\r\n  name: 'MAutocomplete',\r\n  props: {\r\n    data: {\r\n      type: Array,\r\n      required: true\r\n    },\r\n    filterby: {\r\n      type: String,\r\n      required: true\r\n    },\r\n    title: {\r\n      default: 'Seleccione',\r\n      type: String\r\n    },\r\n    resetOnClick: {\r\n      type: Boolean,\r\n      default: false\r\n    }\r\n  },\r\n  data () {\r\n    return {\r\n      itemHeight: 39,\r\n      selectedItem: null,\r\n      selectedIndex: -1,\r\n      query: '',\r\n      visible: false\r\n    }\r\n  },\r\n  methods: {\r\n    autoClearSelection () {\r\n      if (this.resetOnClick) { this.clearSelection() }\r\n    },\r\n    clearSelection () {\r\n      this.selectedIndex = -1\r\n      this.query = ''\r\n      this.selectedItem = null\r\n\r\n      //   console.debug('selectionChanged', this.selectedItem)\r\n      this.$emit('selectionChanged', this.selectedItem)\r\n    },\r\n    close () {\r\n      setTimeout(() => {\r\n        if (this.visible) {\r\n          console.debug('close and searchItem')\r\n          this.searchItem()\r\n        }\r\n      }, 250)\r\n    },\r\n    show (show) {\r\n      setTimeout(() => {\r\n        this.visible = show\r\n      }, 50)\r\n    },\r\n    itemClicked (index) {\r\n      console.debug(`ItemClick`, index)\r\n      //   this.selectedIndex = index\r\n      this.selectedItem = this.matches[index]\r\n      this.query = this.selectedItem[this.filterby]\r\n      this.show(false)\r\n\r\n      //   console.debug('selectionChanged', this.selectedItem)\r\n      this.$emit('selectionChanged', this.selectedItem)\r\n    },\r\n    searchItem () {\r\n      try {\r\n        console.debug('searchItem')\r\n        if (this.matches.length == 1) {\r\n          this.selectedItem = this.matches[0]\r\n          this.query = this.selectedItem[this.filterby]\r\n        } else {\r\n          this.selectedItem = null\r\n          this.query = ''\r\n        }\r\n      } catch (err) {\r\n        this.selectedItem = null\r\n        this.query = ''\r\n      }\r\n\r\n      this.show(false)\r\n      this.$refs.input.blur()\r\n      //   console.debug('selectionChanged', this.selectedItem)\r\n      this.$emit('selectionChanged', this.selectedItem)\r\n    },\r\n    up () {\r\n      if (this.selectedIndex == 0) {\r\n        return\r\n      }\r\n      this.selectedIndex -= 1\r\n      this.scrollToItem()\r\n    },\r\n    down () {\r\n      if (this.selectedIndex >= this.matches.length - 1) {\r\n        return\r\n      }\r\n      this.selectedIndex += 1\r\n      this.scrollToItem()\r\n    },\r\n    scrollToItem () {\r\n      this.$refs.optionsList.scrollTop = this.selectedIndex * this.itemHeight\r\n    }\r\n  },\r\n  computed: {\r\n    matches () {\r\n      try {\r\n        if (this.query === '') {\r\n          return this.data\r\n        }\r\n\r\n        return this.data.filter((item) => item[this.filterby].toLowerCase().includes(this.query.toLowerCase()))\r\n      } catch (err) {\r\n        return this.data\r\n      }\r\n    }\r\n  },\r\n  watch: {\r\n    data () {\r\n      this.clearSelection()\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.popover{\r\n    /* margin-top: 5px; */\r\n    border-radius: 0px;\r\n    border: 1px solid lightgray;\r\n}\r\n.options {\r\n    width: 90%;\r\n    max-height: 150px;\r\n    overflow-y: scroll;\r\n    margin-top: 70px;\r\n    margin-left: 15px;\r\n}\r\n.options ul {\r\n    list-style-type: none;\r\n    text-align: left;\r\n    padding-left: 0;\r\n}\r\n.options ul li {\r\n    border-bottom: 1px solid lightgray;\r\n    padding: 10px;\r\n    cursor: pointer;\r\n    background: white;\r\n}\r\n.options ul li:first-child {\r\n    border-top: 2px solid #d6d6d6;\r\n}\r\n.options ul li:hover {\r\n    background: #04a9f5;\r\n    color: #fff;\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./m.autocomplete.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./m.autocomplete.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./m.autocomplete.vue?vue&type=template&id=089e06fa&scoped=true&\"\nimport script from \"./m.autocomplete.vue?vue&type=script&lang=js&\"\nexport * from \"./m.autocomplete.vue?vue&type=script&lang=js&\"\nimport style0 from \"./m.autocomplete.vue?vue&type=style&index=0&id=089e06fa&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"089e06fa\",\n  null\n  \n)\n\nexport default component.exports","<template>\r\n<div class=\"row\">\r\n  <div class=\"col-6 col-lg-3\">\r\n    <m-select\r\n    ref=\"productTypeSelect\"\r\n    :data=\"productType.catalog\"\r\n    filterby=\"type\"\r\n    title=\"Seleccione tipo de producto\"\r\n    @selectionChanged=\"onProductTypeSelected\"></m-select>\r\n  </div>\r\n  <div class=\"w-100\"></div>\r\n  <div class=\"col-6 col-lg-3\" >\r\n    <m-select\r\n    :data=\"factory.catalog\"\r\n    filterby=\"name\"\r\n    title=\"Seleccione Marca\"\r\n    @selectionChanged=\"onFactorySelected\"></m-select>\r\n  </div>\r\n  <div class=\"col-6 col-lg-3\" v-if=\"model.visible\">\r\n     <m-select\r\n    :data=\"model.catalog\"\r\n    filterby=\"name\"\r\n    title=\"Seleccione Modelo\"\r\n    @selectionChanged=\"onModelSelected\"></m-select>\r\n  </div>\r\n  <div class=\"col-6 col-lg-3\">\r\n     <m-autocomplete\r\n     :data=\"product.store\"\r\n     filterby=\"id\"\r\n     title=\"Seleccione producto\"\r\n     @selectionChanged=\"onProductSelected\"/>\r\n  </div>\r\n  <div class=\"col-6  col-lg-3 align-self-end text-left\">\r\n    <button class=\"btn\" v-bind:class=\"[addProductBtnClass]\" @click=\"addProduct()\">Agregar</button>\r\n  </div>\r\n</div>\r\n</template>\r\n\r\n<script>\r\nimport { API } from '@/mixins/API'\r\nimport mAutocomplete from '@/components/basico/m.autocomplete.vue'\r\nimport mSelect from '@/components/basico/m.select.vue'\r\nexport default {\r\n  name: 'ProductSelector',\r\n  mixins: [\r\n    API\r\n  ],\r\n  components: {\r\n    mAutocomplete,\r\n    mSelect\r\n  },\r\n  data () {\r\n    return {\r\n      productType: {\r\n        catalog: [],\r\n        selected: ''\r\n      },\r\n      factory: {\r\n        catalog: [],\r\n        selected: ''\r\n      },\r\n      model: {\r\n        catalog: [],\r\n        selected: '',\r\n        visible: true\r\n      },\r\n      product: {\r\n        store: [],\r\n        selected: ''\r\n      }\r\n    }\r\n  },\r\n  mounted () {\r\n    this.getProductTypes()\r\n  },\r\n  methods: {\r\n    clearProducts () {\r\n      this.product.store = []\r\n      this.product.selected = ''\r\n    },\r\n    clearModel () {\r\n      this.model.catalog = []\r\n      this.model.selected = ''\r\n\r\n      if (this.productType.selected.id == 2) {\r\n        this.model.visible = false\r\n      } else {\r\n        this.model.visible = true\r\n      }\r\n\r\n      this.clearProducts()\r\n    },\r\n    clearFactory () {\r\n      this.factory.catalog = []\r\n      this.factory.selected = ''\r\n      this.clearModel()\r\n    },\r\n    async getProductTypes () {\r\n      this.$store.state.loader = true\r\n      var request = await this.getRequest('catalogs/products/types')\r\n      this.productType.catalog = request.data.types\r\n      this.$store.state.loader = false\r\n    },\r\n    async getFactories (productTypeID) {\r\n      this.$store.state.loader = true\r\n      var params = {\r\n        productType: productTypeID\r\n      }\r\n      var request = await this.getRequest('catalogs/products/factories', params)\r\n      this.factory.catalog = request.data.factories\r\n      this.$store.state.loader = false\r\n    },\r\n    async getModels (factoryID) {\r\n      this.$store.state.loader = true\r\n      var params = {\r\n        productType: this.productType.selected.id\r\n      }\r\n      var request = await this.getRequest(`catalogs/products/factories/${factoryID}/models`, params)\r\n      this.model.catalog = request.data.models\r\n      this.$store.state.loader = false\r\n    },\r\n    async getProducts () {\r\n      this.$store.state.loader = true\r\n      var params = {\r\n        productType: this.productType.selected.id,\r\n        factory: this.factory.selected.id,\r\n        onTransfers: false,\r\n        limit: 0\r\n      }\r\n\r\n      if (this.productType.selected.id !== 2) {\r\n        params.model = this.model.selected.id\r\n      }\r\n\r\n      var request = await this.getRequest(`store`, params)\r\n      this.product.store = request.data.products\r\n\r\n      this.$store.state.loader = false\r\n    },\r\n    onProductTypeSelected (productType) {\r\n      this.productType.selected = productType\r\n      this.clearFactory()\r\n      this.getFactories(productType.id)\r\n    },\r\n    onFactorySelected (factory) {\r\n      this.clearModel()\r\n      this.factory.selected = factory\r\n\r\n      if (this.productType.selected.id == 2) {\r\n        this.getProducts()\r\n      } else {\r\n        this.getModels(factory.id)\r\n      }\r\n    },\r\n    onModelSelected (model) {\r\n      this.clearProducts()\r\n\r\n      this.model.selected = model\r\n      this.getProducts()\r\n    },\r\n    onProductSelected (product) {\r\n      this.product.selected = product\r\n    },\r\n    addProduct () {\r\n      if (this.product.selected) {\r\n        console.debug('OnProductSelected', this.product.selected)\r\n        this.$emit('OnProductSelected', this.product.selected)\r\n\r\n        this.$refs.productTypeSelect.selectedItem = ''\r\n        this.clearFactory()\r\n      }\r\n    }\r\n\r\n  },\r\n  computed: {\r\n    addProductBtnClass () {\r\n      if (this.product.selected) {\r\n        return 'btn-primary'\r\n      } else {\r\n        return 'btn-secondary'\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style>\r\n</style>\r\n","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./productSelector.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./productSelector.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./productSelector.vue?vue&type=template&id=4a498ff4&\"\nimport script from \"./productSelector.vue?vue&type=script&lang=js&\"\nexport * from \"./productSelector.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"text-left\",staticStyle:{\"margin-bottom\":\"10px\"}},[_c('label',[_vm._v(_vm._s(_vm.title))]),_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.selectedItem),expression:\"selectedItem\"}],staticClass:\"form-control\",attrs:{\"name\":_vm.nameSelect,\"refs\":\"select\"},on:{\"change\":[function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.selectedItem=$event.target.multiple ? $$selectedVal : $$selectedVal[0]},_vm.onChange]}},[_c('option',{attrs:{\"disabled\":\"\",\"value\":\"\"}},[_vm._v(\"Seleccione\")]),_vm._l((_vm.data),function(item,index){return _c('option',{key:index,domProps:{\"value\":item}},[_vm._v(_vm._s(item[_vm.filterby]))])})],2)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n<div class=\"text-left\" style=\"margin-bottom:10px;\">\r\n     <label>{{title}}</label>\r\n      <select class=\"form-control\"\r\n      :name=\"nameSelect\"\r\n      refs=\"select\"\r\n      @change=\"onChange\"\r\n      v-model=\"selectedItem\">\r\n        <option disabled value=''>Seleccione</option>\r\n        <option v-for=\"(item, index) in data\" v-bind:key=\"index\" v-bind:value=\"item\">{{item[filterby]}}</option>\r\n      </select>\r\n</div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'MSelect',\r\n  props: {\r\n    data: {\r\n      type: Array,\r\n      required: true\r\n    },\r\n    filterby: {\r\n      type: String,\r\n      required: true\r\n    },\r\n    title: {\r\n      default: 'Seleccione',\r\n      type: String\r\n    },\r\n    nameSelect: {\r\n      type: String,\r\n      required: false\r\n    }\r\n  },\r\n  data () {\r\n    return {\r\n      selectedItem: ''\r\n    }\r\n  },\r\n  created () {\r\n\r\n  },\r\n  methods: {\r\n    onChange () {\r\n      this.$emit('selectionChanged', this.selectedItem)\r\n    }\r\n  },\r\n  watch: {\r\n    data () {\r\n      this.selectedItem = ''\r\n    }\r\n  }\r\n\r\n}\r\n</script>\r\n\r\n<style>\r\n\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./m.select.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./m.select.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./m.select.vue?vue&type=template&id=8565f67a&\"\nimport script from \"./m.select.vue?vue&type=script&lang=js&\"\nexport * from \"./m.select.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}