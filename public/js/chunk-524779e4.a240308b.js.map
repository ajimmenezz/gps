{"version":3,"sources":["webpack:///./src/views/Administrador/sims/tablesorter_Sims.vue?e99b","webpack:///src/views/Administrador/sims/tablesorter_Sims.vue","webpack:///./src/views/Administrador/sims/tablesorter_Sims.vue?7b1f","webpack:///./src/views/Administrador/sims/tablesorter_Sims.vue?2084","webpack:///./src/views/Administrador/sims/tablesorter_Sims.vue?082a"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_m","ref","attrs","onEditVisible","onVisible","ondeleteVisible","on","OnWatch","OnEdit","OnDelete","staticRenderFns","staticStyle","_v","name","mixins","API","data","listSims","components","cModalDelete","dataTable","created","$store","state","StoreCliente","modal","datosDymanic","idCliente","getClientID","getSims","mounted","seccionMenu","$","css","suscribeToDeviceEvents","beforeDestroy","unsuscribreToDeviceEvents","methods","changeHeaderTable","headers","forEach","element","creationTime","moment","format","console","debug","rows","$refs","table","Render","Refresh","modalEdit","item","sender","eliminar","EventBus","computed","component"],"mappings":"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","file":"js/chunk-524779e4.a240308b.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\" row \"},[_vm._m(0),_c('div',{staticClass:\" col-12 float-left\"},[_c('data-table',{ref:\"table\",attrs:{\"showEditButton\":_vm.onEditVisible,\"showWatchButton\":_vm.onVisible,\"showDeleteButton\":_vm.ondeleteVisible,\"showActiveButton\":false,\"showIndex\":true},on:{\"OnWatch\":_vm.OnWatch,\"OnEdit\":_vm.OnEdit,\"OnDelete\":_vm.OnDelete}})],1)])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"col-12\"},[_c('h5',{staticClass:\"float-left\",staticStyle:{\"font-size\":\"20px\",\"padding-bottom\":\"10px\"}},[_c('b',[_vm._v(\"Sims\")])])])}]\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\" row \" >\r\n      <div class=\"col-12\"> <h5 class=\"float-left\" style=\"font-size: 20px; padding-bottom: 10px;\"><b>Sims</b></h5></div>\r\n\r\n      <div class=\" col-12 float-left\">\r\n            <data-table ref=\"table\"\r\n                    @OnWatch=\"OnWatch\"\r\n                    @OnEdit=\"OnEdit\"\r\n                    @OnDelete=\"OnDelete\"\r\n\r\n                    :showEditButton=\"onEditVisible\"\r\n                    :showWatchButton=\"onVisible\"\r\n                    :showDeleteButton=\"ondeleteVisible\"\r\n                    :showActiveButton=\"false\"\r\n                      :showIndex=\"true\"\r\n                />\r\n\r\n      </div>\r\n\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { API } from '@/mixins/API'\r\n// import FormSims from '@/views/Administrador/sims/FormSims'\r\nimport FormPrincipal from '@/views/Administrador/FormPrincipalRegister'\r\nimport cModalDelete from '@/views/Administrador/DeleteModal'\r\nimport EventBus from '@/EventBus'\r\nimport dataTable from '@/components/DataTable/DataTable'\r\n/**\r\n * @vuese\r\n * @group Administrador/Distribuidor\r\n * Tabla de sims\r\n */\r\nexport default {\r\n  name: 'tablaSims',\r\n  mixins: [API],\r\n  data () {\r\n    return {\r\n      listSims: null,\r\n      ondeleteVisible: false,\r\n      onEditVisible: false,\r\n      onVisible: false\r\n    }\r\n  },\r\n  components: {\r\n    cModalDelete,\r\n    dataTable\r\n  },\r\n  created () {\r\n    this.$store.state.StoreCliente = this.$store.state.modal.datosDymanic.idCliente\r\n    if (this.getClientID == 0) {\r\n      this.ondeleteVisible = true\r\n      this.onEditVisible = true\r\n    }\r\n    if (this.getClientID != 0) {\r\n      this.onVisible = true\r\n    }\r\n    this.getSims()\r\n  },\r\n  mounted () {\r\n    this.$store.state.seccionMenu = 'adminSims'\r\n    $('#containerPrincipal').css({ 'margin-left': this.$store.state.widthMenu })\r\n    $('#containerPrincipal').css({ 'margin-top': this.$store.state.topMenu })\r\n    this.suscribeToDeviceEvents()\r\n  },\r\n  beforeDestroy () {\r\n    this.unsuscribreToDeviceEvents()\r\n  },\r\n  methods: {\r\n    async getListSims () {\r\n      if (this.$store.state.StoreCliente == 0) {\r\n        var request = await this.getRequest('sims/store')\r\n\r\n        if (request.success === true) {\r\n          this.listSims = request.data.sims\r\n        }\r\n      } else {\r\n        var dato = {\r\n          'clientID': this.$store.state.StoreCliente\r\n        }\r\n        var request = await this.getRequest('sims/store', dato)\r\n\r\n        if (request.success === true) {\r\n          this.listSims = request.data.sims\r\n        }\r\n      }\r\n    },\r\n    /**\r\n   * @vuese\r\n   * Obtiene la lista de las sims que estan en almacen\r\n   */\r\n    async getSims () {\r\n      if (this.$store.state.StoreCliente == 0) {\r\n        var request = await this.getRequest('sims/store')\r\n\r\n        if (request.success === true) {\r\n          this.listSims = request.data.sims\r\n        }\r\n      } else {\r\n        var dato = {\r\n          'clientID': this.$store.state.StoreCliente\r\n        }\r\n        var request = await this.getRequest('sims/store', dato)\r\n\r\n        if (request.success === true) {\r\n          this.listSims = request.data.sims\r\n        }\r\n      }\r\n      await this.changeHeaderTable()\r\n    },\r\n    changeHeaderTable () {\r\n      this.headers = [\r\n        {\r\n          title: 'Teléfono',\r\n          key: 'phone',\r\n          default: ''\r\n\r\n        },\r\n        {\r\n          title: 'Compañia teléfonica',\r\n          key: 'carrierName',\r\n          default: '-',\r\n          priority: 1\r\n        },\r\n        {\r\n          title: 'Fecha de creación',\r\n          key: 'creationTime',\r\n          default: '-',\r\n          priority: 5\r\n        }\r\n\r\n      ]\r\n\r\n      this.listSims.forEach(element => {\r\n        if (element.creationTime) {\r\n          element.creationTime = moment(element.creationTime * 1000).format('DD-MM-YYYY')\r\n        }\r\n      })\r\n\r\n      console.debug(this.listSims, 'DATOS_list')\r\n      this.rows = this.listSims\r\n      console.debug('DATOS_ROWS', this.rows)\r\n      this.$refs.table.Render(this.headers, this.rows)\r\n      this.Refresh()\r\n    },\r\n    Refresh () {\r\n      console.debug('data_REFRESH')\r\n      this.$refs.table.Refresh()\r\n    },\r\n    OnWatch (item, sender) {\r\n      console.debug(`WATCH: ${item.imei} ${item.alias}`)\r\n\r\n      this.modalEdit(item)\r\n    },\r\n    OnEdit (item, sender) {\r\n      console.debug(`onEdit: ${item.imei} ${item.alias}`)\r\n      this.modalEdit(item, 2, sender)\r\n    },\r\n    OnDelete (item, sender) {\r\n      console.debug(`DELETE: ${item.phone} ${item.id} `)\r\n      console.debug('DELETE row', sender, item)\r\n\r\n      this.eliminar(item, sender)\r\n    },\r\n    /**\r\n   * @vuese\r\n   * Abre el modal para registrar sims\r\n   */\r\n    async modalFormSims () {\r\n      this.$store.state.loader = true\r\n      this.$store.commit('CLEAR_MODAL_DINAMIC')\r\n\r\n      var datos = {\r\n        'component': FormSims,\r\n        'datos': {\r\n          'seccion': 'sims',\r\n          'accion': 'nueva'\r\n\r\n        }\r\n      }\r\n\r\n      console.debug(datos)\r\n\r\n      await this.$store.commit('ADD_COMPONENT_DINAMIC', datos)\r\n      await this.$store.commit('ADD_COMPONENT_DINAMIC_STATE', true)\r\n    },\r\n    /**\r\n   * @vuese\r\n   * Abre el modal para editar sims\r\n   * @arg `id` Id de sims\r\n   */\r\n    async modalEdit (item, accion = 1, sender = null) {\r\n      console.debug('MODALEDIT', item, accion, sender)\r\n      this.$store.state.loader = true\r\n      this.$store.commit('CLEAR_MODAL_DINAMIC')\r\n      await this.$store.commit('ADD_COMPONENT_DINAMIC_STATE', false)\r\n\r\n      var datos = {\r\n        'component': FormPrincipal,\r\n        'datos': {\r\n          'seccion': 'sims',\r\n          'accion': 'editar',\r\n          'id': item.id,\r\n          'item': item\r\n\r\n        }\r\n\r\n      }\r\n\r\n      if (accion == 2) {\r\n        datos.datos.sender = sender\r\n      }\r\n\r\n      console.debug('MODAL_OPEN_EDIT', datos)\r\n      await this.$store.commit('ADD_COMPONENT_DINAMIC', datos)\r\n      await this.$store.commit('ADD_COMPONENT_DINAMIC_STATE', true)\r\n    },\r\n    async editarSims (data) {\r\n      console.debug('DATOS', data.datos)\r\n\r\n      var request = await this.putRequest('sims/' + data.item.id, data.datos)\r\n\r\n      if (request.success === true) {\r\n        this.$store.state.loader = false\r\n        if (this.$store.state.StoreCliente == 0) {\r\n          var request = await this.getRequest('sims/store')\r\n\r\n          if (request.success === true) {\r\n            this.listSims = request.data.sims\r\n          }\r\n        } else {\r\n          var dato = {\r\n            'clientID': this.$store.state.StoreCliente\r\n          }\r\n          var request = await this.getRequest('sims/store', dato)\r\n\r\n          if (request.success === true) {\r\n            this.listSims = request.data.sims\r\n          }\r\n        }\r\n\r\n        var dat\r\n\r\n        this.listSims.filter(function (dato, i) {\r\n          console.debug('ITEM', dato, i)\r\n          if (data.item.id == dato.id) {\r\n            data.item = dato\r\n          }\r\n        })\r\n\r\n        await this.$refs.table.RemoveRow(data.sender)\r\n        console.debug('DATOS_FIn', data, dat)\r\n\r\n        await this.$refs.table.AddRow(data.item)\r\n        notify('Excelente!', 'Se ha editado la sims ', 'top', 'right', 'success', 10, 50)\r\n      } else {\r\n        this.$store.state.loader = false\r\n        notify('Error!', 'No se ha editado la sims ', 'top', 'right', 'danger', 10, 50)\r\n      }\r\n    },\r\n    /**\r\n   * @vuese\r\n   * Abre el modal de confirmacion para eliminar sims\r\n   * @arg `id` Id de sims\r\n  * @arg `tel` telefono sims\r\n   */\r\n    async eliminar (item, sender) {\r\n      this.$store.commit('CLEAR_MODAL_DINAMIC')\r\n\r\n      var datos = {\r\n        'component': cModalDelete,\r\n        'datos': {\r\n          'ID': item.id,\r\n          'name': item.phone,\r\n          'tipo': 'sims',\r\n          'item': item,\r\n          'sender': sender\r\n        }\r\n      }\r\n      await this.$store.commit('ADD_COMPONENT_DINAMIC', datos)\r\n      await this.$store.commit('ADD_COMPONENT_DINAMIC_STATE', true)\r\n    },\r\n    async eliminarSims (data) {\r\n      var simsID = data.id\r\n\r\n      var request = await this.deleteRequest('sims/store/' + simsID)\r\n\r\n      if (request.success === true) {\r\n        this.$refs.table.RemoveRow(data.sender)\r\n        this.getListSims()\r\n        this.$store.state.loader = false\r\n        notify('Excelente!', 'Se ha eliminado la sims ', 'top', 'right', 'success', 10, 50)\r\n      } else {\r\n        this.$store.state.loader = false\r\n        notify('Error!', 'No se ha eliminado la sims ', 'top', 'right', 'danger', 10, 50)\r\n      }\r\n    },\r\n    /**\r\n   * @vuese\r\n   * se suscribe a eventos eventBus para actulizar el listado de sims\r\n   */\r\n    suscribeToDeviceEvents () {\r\n      EventBus.$on('editar_sims', (data) => {\r\n        console.debug('EDITAR_SIMS', data)\r\n        this.editarSims(data)\r\n      })\r\n      EventBus.$on('eliminar_sims', (data) => {\r\n        console.debug('ELIMINAR_SIMS', data)\r\n        this.eliminarSims(data)\r\n      })\r\n    },\r\n    /**\r\n   * @vuese\r\n   * Se destruye la suscripcion al eventBus\r\n   */\r\n    unsuscribreToDeviceEvents () {\r\n      EventBus.$off('editar_sims')\r\n      EventBus.$off('eliminar_sims')\r\n    }\r\n  },\r\n  computed: {\r\n    getClientID () {\r\n      return this.$store.state.StoreCliente\r\n    }\r\n\r\n  }\r\n}\r\n</script>\r\n\r\n<style>\r\n.scrollTable{\r\n  position: relative;\r\n    overflow: auto;\r\n    height: 293px;\r\n    /* height: 480px; */\r\n    width: 100%;\r\n}\r\n</style>\r\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./tablesorter_Sims.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./tablesorter_Sims.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./tablesorter_Sims.vue?vue&type=template&id=e586f750&\"\nimport script from \"./tablesorter_Sims.vue?vue&type=script&lang=js&\"\nexport * from \"./tablesorter_Sims.vue?vue&type=script&lang=js&\"\nimport style0 from \"./tablesorter_Sims.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./tablesorter_Sims.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./tablesorter_Sims.vue?vue&type=style&index=0&lang=css&\""],"sourceRoot":""}