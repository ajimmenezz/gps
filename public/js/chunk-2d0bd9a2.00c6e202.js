(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0bd9a2"],{"2d60":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal fade ",attrs:{id:"modalAdminKits",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalCenterTitle","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog  modal-lg",attrs:{role:"document"}},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},["nuevo"==this.accion?a("h5",{staticClass:"modal-title",attrs:{id:"exampleModalCenterTitle"}},[t._v("Nuevo kit")]):t._e(),"editar"==this.accion?a("h5",{staticClass:"modal-title",attrs:{id:"exampleModalCenterTitle"}},[t._v("Editar kit")]):t._e(),t._m(0)]),a("div",{staticClass:"modal-body float-left"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-12 col-md-6"},[a("config-input",{attrs:{id:"nameKit",label:"Nombre",typeinput:"text",placeholder:"Nombre",required:"true",valor:t.nameKit},model:{value:t.nameKit,callback:function(e){t.nameKit="string"===typeof e?e.trim():e},expression:"nameKit"}})],1),a("div",{staticClass:"col-12 col-md-6"},[a("config-input",{attrs:{id:"notas",label:"Notas",typeinput:"text",placeholder:"Notas",required:"false",valor:t.notasKit},model:{value:t.notasKit,callback:function(e){t.notasKit="string"===typeof e?e.trim():e},expression:"notasKit"}})],1),t._m(1),a("div",{staticClass:"col-12 col-md-4"},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"exampleFormControlSelect2"}},[t._v("Tipo Producto")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.tipoProduct,expression:"tipoProduct"}],staticClass:"form-control",attrs:{id:"exampleFormControlSelect2",required:""},on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.tipoProduct=e.target.multiple?a:a[0]},function(e){return t.catMarcas()}]}},[a("option",{attrs:{value:"0"}},[t._v("Ninguno")]),a("option",{attrs:{value:"1"}},[t._v("Gps")]),a("option",{attrs:{value:"2"}},[t._v("Sim")]),a("option",{attrs:{value:"3"}},[t._v("Producto genérico")])])])]),a("div",{staticClass:"col-12"},[a("div",{staticClass:"row float-left"},[0!=t.tipoProduct?a("div",{staticClass:"col-12 col-md-4"},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"exampleFormControlSelect2"}},[t._v(t._s(t.marca))]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.marcaProduct,expression:"marcaProduct"}],staticClass:"form-control",attrs:{id:"exampleFormControlSelect2",valor:t.marcaProduct},on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.marcaProduct=e.target.multiple?a:a[0]},function(e){return t.cat_model()}]}},[a("option",{attrs:{value:"null"}},[t._v("Ninguno")]),t._l(t.listMarcas,(function(e){return a("option",{key:e.id,domProps:{value:e.id}},[t._v(t._s(e.name))])}))],2)])]):t._e(),0!=t.tipoProduct?a("div",{staticClass:"col-12 col-md-4"},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"exampleFormControlSelect2"}},[t._v(t._s(t.modelo))]),1==t.tipoProduct?a("select",{directives:[{name:"model",rawName:"v-model",value:t.modeloProduct,expression:"modeloProduct"}],staticClass:"form-control",attrs:{id:"exampleFormControlSelect2",valor:t.modeloProduct},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.modeloProduct=e.target.multiple?a:a[0]}}},[a("option",{attrs:{value:"null"}},[t._v("Ninguno")]),t._l(t.getlistModel,(function(e){return a("option",{key:e.id,domProps:{value:e.id}},[t._v(t._s(e.model))])}))],2):t._e(),3==t.tipoProduct?a("select",{directives:[{name:"model",rawName:"v-model",value:t.modeloProduct,expression:"modeloProduct"}],staticClass:"form-control",attrs:{id:"exampleFormControlSelect2",valor:t.modeloProduct},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.modeloProduct=e.target.multiple?a:a[0]}}},[a("option",{attrs:{value:"null"}},[t._v("Ninguno")]),t._l(t.getlistModel,(function(e){return a("option",{key:e.id,domProps:{value:e.id}},[t._v(t._s(e.name))])}))],2):t._e(),2==t.tipoProduct?a("select",{directives:[{name:"model",rawName:"v-model",value:t.modeloProduct,expression:"modeloProduct"}],staticClass:"form-control",attrs:{id:"exampleFormControlSelect2",valor:t.modeloProduct},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.modeloProduct=e.target.multiple?a:a[0]}}},t._l(t.getlistModel,(function(e){return a("option",{key:e.id,domProps:{value:e.id}},[t._v(t._s(e.name))])})),0):t._e()])]):t._e(),0!=t.tipoProduct?a("div",{staticClass:"col-10 col-md-3"},[a("config-input",{attrs:{id:"Cantidad",label:"Cantidad",typeinput:"number",placeholder:"Cantidad",required:"true",valor:t.cantidadKit},model:{value:t.cantidadKit,callback:function(e){t.cantidadKit="string"===typeof e?e.trim():e},expression:"cantidadKit"}})],1):t._e(),0!=t.tipoProduct?a("div",{staticClass:"col-2 col-md-1",staticStyle:{"padding-left":"0px"}},[a("button",{staticClass:"btn btn-icon btn-primary",staticStyle:{height:"35px","padding-top":"8px","margin-top":"32px"},attrs:{id:"agregarProducts",type:"button"},on:{click:function(e){return t.agregarProducts()}}},[a("i",{staticClass:"feather icon-plus"})])]):t._e(),0!=t.tipoProduct||"editar"==this.accion?a("div",{staticClass:"col-12",staticStyle:{"margin-top":"20px"}},[a("div",{staticClass:"row"},[t._m(2),t.listProductosKit.length>0?a("div",{staticClass:"col-12",staticStyle:{"margin-top":"15px",overflow:"auto","max-height":"300px"}},[a("table",{staticClass:"table table-hover header_fijo"},[t._m(3),a("tbody",t._l(t.listProductosKit,(function(e,i){return a("tr",{key:i},[a("td",[t._v(t._s(i+1))]),1==e.productType?a("td",[t._v("GPS")]):t._e(),2==e.productType?a("td",[t._v("SIM")]):t._e(),3==e.productType?a("td",[t._v("GENÉRICO")]):t._e(),a("td",[t._v(t._s(e.marcaString)+"-"+t._s(e.modeloString))]),a("td",[t._v(t._s(e.quantity))]),a("td",[a("span",{on:{click:function(a){return t.eliminarProduct(e.id)}}},[a("i",{staticClass:"cursor icon-small icon universalicon-trash-2 colorText-red"})])])])})),0)])]):t._e(),0==t.listProductosKit.length?a("div",{staticClass:"col-12"},[t._v("\n                                Sin productos\n                              ")]):t._e()])]):t._e()])])]),t._m(4)]),a("div",{staticClass:"modal-footer "},[a("button",{staticClass:"btn btn-secondary shadow-2 mb-4 float-left",on:{click:function(e){return t.cancel()}}},[t._v("CANCELAR")]),"nuevo"===this.$store.state.modal.datosDymanic.accion?a("button",{staticClass:"btn btn-primary shadow-2 mb-4 float-right",attrs:{id:"btnRegistrar",type:"submit"},on:{click:function(e){return t.SendForm()}}},[t._v("REGISTRAR")]):t._e(),"editar"===this.$store.state.modal.datosDymanic.accion?a("button",{staticClass:"btn btn-primary shadow-2 mb-4 float-right",attrs:{id:"btnEnditar",type:"submit"},on:{click:function(e){return t.SendForm()}}},[t._v("EDITAR")]):t._e()])])])])},s=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-12"},[a("h5",{staticClass:"float-left"},[t._v("Agregar productos")]),a("hr",{staticStyle:{"margin-top":"2rem"}})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-12"},[a("h5",{staticClass:"float-left"},[t._v("Lista de productos que contiene el kit")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",[t._v("#")]),a("th",[t._v("Producto")]),a("th",[t._v("Tipo")]),a("th",[t._v("Cantidad")]),a("th",[t._v("Acciones")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row"},[a("div",{staticClass:"col-12",staticStyle:{"margin-top":"35px"},attrs:{id:"alertAdminKits"}})])}],o=(a("ac6a"),a("7f7f"),a("7514"),a("96cf"),a("3b8d")),r=a("08e6"),n=a("d3e3"),l={name:"ModalFormKits",mixins:[r["a"]],data:function(){return{marca:"Marca",modelo:"Modelo",marcaProduct:null,modeloProduct:null,nameKit:null,notasKit:null,cantidadKit:null,tipoProduct:0,listMarcas:[],listaModelos:[],accion:this.$store.state.modal.datosDymanic.accion,listProductosKit:[],index:0}},created:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:"editar"==this.accion&&this.getInfoKit();case 1:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),mounted:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.$store.state.loader=!1,$("#modalAdminKits").modal("show");case 2:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),destroyed:function(){},methods:{catMarcas:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var e,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.marcaProduct=null,this.modeloProduct=null,this.listMarcas=[],this.listaModelos=[],0==this.tipoProduct){t.next=25;break}if(2!=this.tipoProduct){t.next=17;break}return console.debug("CAT_SIMS"),this.marca="Compañia teléfonica",this.modelo="Plan",this.modeloProduct=5,t.next=12,this.getRequest("catalogs/sims/carriers");case 12:e=t.sent,!0===e.success&&(this.listMarcas=e.data.simCarriers),this.catPlan(),t.next=25;break;case 17:return this.marca="Marca",this.modelo="Modelo",console.debug("CAT_PRODUCT_GPS",this.tipoProduct),a={productType:this.tipoProduct},t.next=23,this.getRequest("catalogs/products/factories",a);case 23:e=t.sent,!0===e.success&&(this.listMarcas=e.data.factories);case 25:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),cat_model:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(console.debug("marca",this.marcaProduct),console.debug("tipoP",this.tipoProduct),this.listaModelos=[],null==this.marcaProduct){t.next=22;break}if(2!=this.tipoProduct){t.next=10;break}return t.next=7,this.getRequest("catalogs/sims/plan");case 7:e=t.sent,console.debug("SIMS_RESP",e),!0===e.success&&(this.listaModelos=e.data.simPlans);case 10:if(1!=this.tipoProduct){t.next=16;break}return t.next=13,this.getRequest("catalogs/devices/factories/"+this.marcaProduct+"/models");case 13:e=t.sent,!0===e.success&&(this.listaModelos=e.data.deviceModels),console.debug("GPS_RESP",e,this.listaModelos);case 16:if(3!=this.tipoProduct){t.next=22;break}return t.next=19,this.getRequest("catalogs/products/factories/"+this.marcaProduct+"/models");case 19:e=t.sent,!0===e.success&&(this.listaModelos=e.data.models),console.debug("PRDUC_RESP",e,this.listaModelos);case 22:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),catPlan:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.listaModelos=[],this.modeloProduct=5,t.next=4,this.getRequest("catalogs/sims/plan");case 4:e=t.sent,!0===e.success&&(this.listaModelos=e.data.simPlans);case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),agregarProducts:function(){var t=this;if(null==this.marcaProduct)return 2!=this.tipoProduct?$("#alertAdminKits").html("<div class='alert alert-danger alert-dismissible fade show' role='alert' style='text-align: initial;'><strong>Por favor, </strong>Selecciona la marca</div>"):$("#alertAdminKits").html("<div class='alert alert-danger alert-dismissible fade show' role='alert' style='text-align: initial;'><strong>Por favor, </strong>Selecciona la compañia</div>"),setTimeout((function(){$("#alertAdminKits").html("")}),3e3),!1;if(null==this.modeloProduct)return 2!=this.tipoProduct?$("#alertAdminKits").html("<div class='alert alert-danger alert-dismissible fade show' role='alert' style='text-align: initial;'><strong>Por favor, </strong>Selecciona el modelo</div>"):$("#alertAdminKits").html("<div class='alert alert-danger alert-dismissible fade show' role='alert' style='text-align: initial;'><strong>Por favor, </strong>Selecciona el plan</div>"),setTimeout((function(){$("#alertAdminKits").html("")}),3e3),!1;if(null==this.cantidadKit||""==this.cantidadKit)return $("#alertAdminKits").html("<div class='alert alert-danger alert-dismissible fade show' role='alert' style='text-align: initial;'><strong>Por favor, </strong>Ingresa cantidad</div>"),setTimeout((function(){$("#alertAdminKits").html("")}),3e3),!1;var e=this.listMarcas.find((function(e){return e.id==t.marcaProduct})),a=this.listaModelos.find((function(e){return e.id==t.modeloProduct}));console.debug(this.cantidadKit,"MARCA",e),console.debug("MODELO",a),1!=this.tipoProduct?this.listProductosKit.push({id:this.index,productType:this.tipoProduct,model:this.modeloProduct,quantity:this.cantidadKit,marcaString:e.name,modeloString:a.name}):this.listProductosKit.push({id:this.index,productType:this.tipoProduct,model:this.modeloProduct,quantity:this.cantidadKit,marcaString:e.name,modeloString:a.model}),this.index++,this.marcaProduct=null,this.modeloProduct=null,this.cantidadKit=null},eliminarProduct:function(t){var e;this.listProductosKit.filter((function(a,i){if(a.id==t)return e=i,!0})),this.listProductosKit.splice(e,1)},SendForm:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var e,a,i,s=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(null!=this.nameKit&&""!=this.nameKit){t.next=4;break}return $("#alertAdminKits").html("<div class='alert alert-danger alert-dismissible fade show' role='alert' style='text-align: initial;'><strong>Por favor, </strong>Ingresa nombre</div>"),setTimeout((function(){$("#alertAdminKits").html("")}),3e3),t.abrupt("return",!1);case 4:if(0!=this.listProductosKit.length){t.next=8;break}return $("#alertAdminKits").html("<div class='alert alert-danger alert-dismissible fade show' role='alert' style='text-align: initial;'><strong>Por favor, </strong>Agrega productos</div>"),setTimeout((function(){$("#alertAdminKits").html("")}),3e3),t.abrupt("return",!1);case 8:if($("#btnRegistrar").attr("disabled","disabled"),$("#btnEnditar").attr("disabled","disabled"),this.$store.state.loader=!0,"nuevo"!==this.accion){t.next=21;break}return e={name:this.nameKit,notes:this.notasKit},a={},a["kit"]=e,a["products"]=this.listProductosKit,console.debug("DATOS",a),t.next=19,this.postRequest("kits",a);case 19:i=t.sent,!0===i.success?(this.$store.state.loader=!1,$("#alertAdminKits").html("<div class='alert alert-success alert-dismissible fade show' role='alert' style='text-align: initial;'><strong>Excelente! </strong>Se ha registrado el kit<button type='button' class='close' data-dismiss='alert' aria-label='Close' style='padding-top: 0px;'><span aria-hidden='true'>&times;</span></button></div>"),setTimeout((function(){$("#alertAdminKits").html(""),s.cancel(),n["a"].$emit("GET_LIST_kits",1)}),3e3)):(this.$store.state.loader=!1,$("#btnRegistrar").removeAttr("disabled"),$("#alertAdminKits").html("<div class='alert alert-danger alert-dismissible fade show' role='alert' style='text-align: initial;'><strong>Error! </strong>No se ha registrado el kit <button type='button' class='close' data-dismiss='alert' aria-label='Close' style='padding-top: 0px;'><span aria-hidden='true'>&times;</span></button></div>"));case 21:if("editar"!==this.accion){t.next=31;break}return e={name:this.nameKit,notes:this.notasKit},a={},a["kit"]=e,a["products"]=this.listProductosKit,console.debug("DATOS",a),t.next=29,this.putRequest("kits/"+this.$store.state.modal.datosDymanic.id,a);case 29:i=t.sent,!0===i.success?(this.$store.state.loader=!1,$("#alertAdminKits").html("<div class='alert alert-success alert-dismissible fade show' role='alert' style='text-align: initial;'><strong>Excelente! </strong>Se ha actualizado el kit<button type='button' class='close' data-dismiss='alert' aria-label='Close' style='padding-top: 0px;'><span aria-hidden='true'>&times;</span></button></div>"),setTimeout((function(){$("#alertAdminKits").html(""),s.cancel(),n["a"].$emit("GET_LIST_kits",1)}),3e3)):(this.$store.state.loader=!1,$("#btnEnditar").removeAttr("disabled"),$("#alertAdminKits").html("<div class='alert alert-danger alert-dismissible fade show' role='alert' style='text-align: initial;'><strong>Error! </strong>No se ha actualizado el kit <button type='button' class='close' data-dismiss='alert' aria-label='Close' style='padding-top: 0px;'><span aria-hidden='true'>&times;</span></button></div>"));case 31:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),getInfoKit:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var e,a,i=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.getRequest("kits/".concat(this.$store.state.modal.datosDymanic.id));case 2:e=t.sent,a=e.data.kit,console.debug(a),this.nameKit=a.kitName,this.notasKit=a.notes,a.products.forEach((function(t){i.listProductosKit.push({id:i.index,productType:t.productTypeID,model:t.modelID,quantity:t.quantity,marcaString:t.factory,modeloString:t.model}),i.index++}));case 8:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),cancel:function(){this.$store.commit("CLEAR_MODAL_DINAMIC"),$("#modalAdminKits").modal("hide")}},computed:{getlistModel:function(){return this.listaModelos}}},c=l,d=a("2877"),u=Object(d["a"])(c,i,s,!1,null,null,null);e["default"]=u.exports}}]);
//# sourceMappingURL=chunk-2d0bd9a2.00c6e202.js.map